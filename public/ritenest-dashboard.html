<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🌿 RiteNest™ - Your Ritual & Heritage Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        /* RiteNest Specific Color Palette */
        :root {
            --ritenest-primary: #047857; /* Deep forest green */
            --ritenest-secondary: #34d399; /* Medium green */
            --ritenest-accent: #10b981; /* Teal green */
            --ritenest-light-bg: #f0fdf4; /* Very light green */
            --ritenest-card-bg: #d1fae5; /* Lighter green for cards */
            --ritenest-dark-text: #1f2937; /* Dark gray for primary text */
            --ritenest-muted-text: #4b5563; /* Muted gray for secondary text */
            --ritenest-border: #a7f3d0; /* Light green border */
            --ritenest-button-hover: #065f46; /* Darker green on hover */

            /* Overriding original Fruitful/Dashboard colors for RiteNest theme */
            --primary-color: var(--ritenest-primary);
            --secondary-color: var(--ritenest-secondary);
            /* Dashboard specific colors are not directly used in this landing page, but kept for consistency if needed */
        }

        /* Base Styles - Now RiteNest themed */
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--ritenest-light-bg);
            color: var(--ritenest-dark-text);
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* Custom Scrollbar Styling for Light Theme */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #e0f2f7; /* Light blueish-green track */
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #a7f3d0; /* Light green thumb */
            border-radius: 10px;
            transition: background 0.3s ease;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #6ee7b7; /* Lighter on hover */
        }
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* Header - Sleek and modern, RiteNest themed */
        header {
            background-color: var(--ritenest-primary);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            padding-top: 1.2rem;
            padding-bottom: 1.2rem;
            box-shadow: 0 2px 15px rgba(0,0,0,0.2);
            position: sticky;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 50;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: white; /* Header text is white */
        }
        header h1 {
            color: white;
            font-weight: 800;
            font-size: 1.6rem;
            letter-spacing: -0.03em;
        }
        header nav a {
            color: #d1fae5; /* Lighter green for nav links */
            font-size: 0.95rem;
            font-weight: 500;
            padding: 0.6rem 1rem;
            border-radius: 8px;
            transition: all 0.2s ease-in-out;
            position: relative;
        }
        header nav a:hover {
            color: white;
            background-color: var(--ritenest-button-hover);
            transform: translateY(-2px);
        }
        header nav a::after {
            content: '';
            position: absolute;
            left: 50%;
            bottom: -2px;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, #6ee7b7, #34d399); /* Green gradient underline */
            transition: all 0.3s ease-out;
            transform: translateX(-50%);
            border-radius: 1px;
        }
        header nav a:hover::after {
            width: 80%;
        }
        header nav a.primary-btn { /* Dashboard button style */
            background: linear-gradient(90deg, var(--ritenest-secondary), var(--ritenest-accent));
            color: white;
            padding: 0.7rem 1.4rem;
            border-radius: 25px;
            font-weight: 700;
            font-size: 0.95rem;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        }
        header nav a.primary-btn:hover {
            filter: brightness(1.15);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3), 0 0 15px rgba(52, 211, 153, 0.5); /* Subtle green glow */
        }
        .header-nav-active {
            color: white !important;
            font-weight: 700 !important;
        }
        .header-nav-active::after {
            width: 100% !important;
            background: linear-gradient(90deg, #6ee7b7, #34d399) !important; /* Active green underline */
        }

        /* Hero Section - Dynamic and impactful, RiteNest themed */
        .hero-section {
            background: linear-gradient(135deg, #047857, #065f46, #064e3b); /* Deeper green gradient */
            min-height: 80vh;
            padding: 8rem 2rem;
            border-bottom-left-radius: 60px;
            border-bottom-right-radius: 60px;
            box-shadow: 0 15px 50px rgba(0,0,0,0.3);
            color: white;
            position: relative;
            overflow: hidden;
            animation: fadeInScale 1s ease-out;
        }
        .hero-section::before {
            content: '';
            position: absolute;
            top: -20%;
            left: -20%;
            width: 140%;
            height: 140%;
            background: radial-gradient(circle at 50% 50%, rgba(52, 211, 153, 0.1), transparent 70%),
                        radial-gradient(circle at 20% 80%, rgba(16, 185, 129, 0.1), transparent 70%);
            animation: rotateAndZoom 40s linear infinite;
            opacity: 0.6;
            z-index: 1;
        }
        @keyframes fadeInScale {
            from { opacity: 0; transform: scale(0.98); }
            to { opacity: 1; transform: scale(1); }
        }
        @keyframes rotateAndZoom {
            0% { transform: rotate(0deg) scale(1); }
            50% { transform: rotate(180deg) scale(1.05); }
            100% { transform: rotate(360deg) scale(1); }
        }
        .hero-content {
            z-index: 10;
            position: relative;
        }
        .hero-section h2 {
            font-size: 4.5rem;
            font-weight: 900;
            letter-spacing: -0.04em;
            line-height: 1.05;
            text-shadow: 0 4px 15px rgba(0,0,0,0.5);
        }
        .hero-section h2 span {
            background: linear-gradient(90deg, #fcd34d, #f97316); /* Warm gradient for "Flourish" */
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .hero-section p {
            font-size: 1.3rem;
            font-weight: 300;
            color: #d1fae5; /* Lighter green for body text */
            margin-top: 2rem;
            margin-bottom: 3rem;
            max-width: 900px;
        }
        .cta-button {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: linear-gradient(90deg, var(--ritenest-secondary), var(--ritenest-accent)); /* Green gradient */
            color: white;
            padding: 1rem 2.5rem;
            border-radius: 30px;
            font-weight: 700;
            font-size: 1.15rem;
            transition: all 0.3s cubic-bezier(0.2, 0.8, 0.2, 1);
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            letter-spacing: 0.05em;
            text-transform: uppercase;
        }
        .cta-button:hover {
            filter: brightness(1.2);
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3), 0 0 25px rgba(52, 211, 153, 0.8); /* Green glow */
        }
        .cta-button span {
            display: inline-block;
            margin-left: 0.5rem;
            animation: bounceEmoji 1s infinite alternate;
        }
        @keyframes bounceEmoji {
            from { transform: translateY(0); }
            to { transform: translateY(-3px); }
        }


        /* Sections - Layered and defined, RiteNest themed */
        .landing-section {
            padding: 8rem 2rem;
            background-color: var(--ritenest-light-bg);
            box-shadow: inset 0 5px 20px rgba(0,0,0,0.05);
            border-bottom: 1px solid rgba(4, 120, 87, 0.1);
            color: var(--ritenest-dark-text);
        }
        .landing-section:nth-of-type(odd) {
            background-color: #e0fdf0; /* Slightly different light green for odd sections */
        }
        .landing-section:last-of-type {
            border-bottom: none;
        }
        .landing-section h2, .landing-section h3 {
            color: var(--ritenest-dark-text);
            font-weight: 800;
            letter-spacing: -0.03em;
            margin-bottom: 2.5rem;
            font-size: 2.8rem;
            text-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .landing-section p {
            color: var(--ritenest-muted-text);
            font-size: 1.15rem;
            line-height: 1.6;
        }

        /* Feature Cards - Glowing and interactive, RiteNest themed */
        .feature-card {
            background-color: var(--ritenest-card-bg);
            border-radius: 16px;
            padding: 2.5rem;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transition: transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1), box-shadow 0.3s ease-in-out, border-color 0.3s ease;
            border: 1px solid var(--ritenest-border);
        }
        .feature-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2), 0 0 25px rgba(52, 211, 153, 0.5); /* Green glow on hover */
            border-color: var(--ritenest-accent); /* Teal border on hover */
        }
        .feature-card div:first-child { /* Icon */
            font-size: 3rem;
            margin-bottom: 1.5rem;
            color: var(--ritenest-accent); /* Teal for icons */
            text-shadow: 0 0 15px rgba(16, 185, 129, 0.6); /* Icon glow */
        }
        .feature-card h4 {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--ritenest-dark-text);
            margin-bottom: 0.75rem;
        }
        .feature-card p {
            font-size: 1rem;
            color: var(--ritenest-muted-text);
        }

        /* Share Signal Section - Digital display feel, RiteNest themed */
        #shareprice {
            background-color: var(--ritenest-card-bg);
            color: var(--ritenest-dark-text);
            padding: 5rem 2rem;
            border-bottom: 1px solid var(--ritenest-border);
            box-shadow: inset 0 5px 20px rgba(0,0,0,0.05);
        }
        #shareprice h2 {
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--ritenest-dark-text);
        }
        #price {
            font-size: 4rem;
            font-weight: 800;
            color: var(--ritenest-primary); /* Deep green for price */
            letter-spacing: -0.03em;
            text-shadow: 0 0 20px rgba(4, 120, 87, 0.6); /* Strong glow */
            animation: pricePulse 2s infinite alternate;
        }
        @keyframes pricePulse {
            from { text-shadow: 0 0 10px rgba(4, 120, 87, 0.4); }
            to { text-shadow: 0 0 25px rgba(4, 120, 87, 0.8); }
        }
        #timestamp {
            color: var(--ritenest-muted-text);
            font-size: 0.9rem;
        }

        /* Seedwave Growth - Dynamic chart, RiteNest themed */
        #seedwave {
            background-color: var(--ritenest-light-bg);
            padding: 6rem 2rem;
            border-bottom: 1px solid var(--ritenest-border);
            box-shadow: inset 0 5px 20px rgba(0,0,0,0.05);
        }
        #seedwave h2 {
            font-size: 2.8rem;
            font-weight: 800;
            margin-bottom: 3rem;
            color: var(--ritenest-dark-text);
        }
        #seedwave .w-full {
            background-color: var(--ritenest-card-bg);
            border: 1px solid var(--ritenest-border);
            padding: 2rem;
            border-radius: 16px;
            box-shadow: 0 5px 25px rgba(0,0,0,0.1);
        }
        /* Chart specific colors for RiteNest */
        #brandChart {
            border-color: var(--ritenest-accent) !important;
            background-color: rgba(16, 185, 129, 0.15) !important;
            point-background-color: var(--ritenest-accent) !important;
            point-border-color: var(--ritenest-card-bg) !important;
        }

        /* Founder's Note - Evocative text block, RiteNest themed */
        .landing-section.bg-gray-700 {
            background-color: #e0fdf0; /* Slightly different light green */
            color: var(--ritenest-dark-text);
            padding: 6rem 2rem;
            border-bottom: 1px solid var(--ritenest-border);
            box-shadow: inset 0 5px 20px rgba(0,0,0,0.05);
        }
        .landing-section.bg-gray-700 h2 {
            font-size: 3rem;
            font-weight: 800;
            color: var(--ritenest-dark-text);
            text-shadow: 0 2px 10px rgba(0,0,0,0.1);
            animation: textGlow 3s infinite alternate;
        }
        @keyframes textGlow {
            from { text-shadow: 0 0 5px rgba(4, 120, 87, 0.2); }
            to { text-shadow: 0 0 15px rgba(4, 120, 87, 0.5); }
        }
        .landing-section.bg-gray-700 p {
            font-size: 1.2rem;
            color: var(--ritenest-muted-text);
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }
        .landing-section.bg-gray-700 p.italic {
            color: #6b7280; /* Darker muted text */
            font-style: italic;
        }
        .landing-section.bg-gray-700 p.font-semibold {
            color: var(--ritenest-accent); /* Teal signature */
            font-weight: 600;
            margin-top: 2.5rem;
            text-shadow: 0 0 8px rgba(16, 185, 129, 0.4);
        }

        /* Vault Terminal Access - Futuristic interface, RiteNest themed */
        #vault-access {
            background-color: var(--ritenest-light-bg);
            padding: 6rem 2rem;
            border-bottom: 1px solid var(--ritenest-border);
            box-shadow: inset 0 5px 20px rgba(0,0,0,0.05);
        }
        #vault-access h3 {
            font-size: 2.8rem;
            font-weight: 800;
            color: var(--ritenest-dark-text);
            margin-bottom: 3rem;
            text-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        #vault-access .w-full.h-\[800px\] { /* Iframe container */
            background-color: #1a1b20; /* Dark background for iframe */
            border: 3px solid var(--ritenest-primary); /* Deep green border */
            border-radius: 12px;
            box-shadow: 0 0 30px rgba(4, 120, 87, 0.5); /* Green glow */
            overflow: hidden;
        }
        .terminal-btn {
            background-color: var(--ritenest-card-bg);
            color: var(--ritenest-primary); /* Deep green text */
            padding: 1.2rem 1.8rem;
            border-radius: 10px;
            font-weight: 600;
            transition: all 0.2s ease-in-out;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border: 1px solid var(--ritenest-border);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        .terminal-btn:hover {
            background-color: #a7f3d0; /* Lighter green on hover */
            color: var(--ritenest-dark-text);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2), 0 0 20px rgba(16, 185, 129, 0.6);
            border-color: var(--ritenest-accent);
        }
        .terminal-btn.ring { /* Active state */
            border-color: var(--ritenest-accent); /* Teal active ring */
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.5);
        }

        /* Sector Scrolls - Grid of glowing links, RiteNest themed */
        .landing-section.bg-gray-800.text-center {
            background-color: #e0fdf0; /* Slightly different light green */
            padding: 6rem 2rem;
            border-bottom: 1px solid var(--ritenest-border);
            box-shadow: inset 0 5px 20px rgba(0,0,0,0.05);
        }
        .landing-section.bg-gray-800.text-center h2 {
            font-size: 2.8rem;
            font-weight: 800;
            color: var(--ritenest-dark-text);
            margin-bottom: 3rem;
            text-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .glyph {
            background-color: var(--ritenest-card-bg);
            color: var(--ritenest-primary); /* Deep green text */
            padding: 1rem 1.5rem;
            border-radius: 10px;
            font-weight: 600;
            transition: all 0.2s ease-in-out;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border: 1px solid var(--ritenest-border);
        }
        .glyph:hover {
            background-color: #a7f3d0; /* Lighter green on hover */
            color: var(--ritenest-dark-text);
            transform: translateY(-3px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2), 0 0 15px rgba(16, 185, 129, 0.5);
            border-color: var(--ritenest-accent);
        }

        /* Treaty Section - Powerful statement, RiteNest themed */
        #treaty {
            background-color: var(--ritenest-light-bg);
            padding: 6rem 2rem;
            border-bottom: 1px solid var(--ritenest-border);
            box-shadow: inset 0 5px 20px rgba(0,0,0,0.05);
        }
        #treaty h2 {
            font-size: 2.8rem;
            font-weight: 800;
            color: var(--ritenest-dark-text);
            margin-bottom: 2rem;
            text-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        #treaty p {
            font-size: 1.2rem;
            color: var(--ritenest-muted-text);
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            margin-bottom: 2.5rem;
        }
        #treaty blockquote {
            font-size: 1.8rem;
            color: var(--ritenest-primary); /* Deep green for quote */
            font-weight: 700;
            line-height: 1.4;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            text-shadow: 0 0 15px rgba(4, 120, 87, 0.5);
        }
        #treaty blockquote::before, #treaty blockquote::after {
            content: '“';
            font-size: 3em;
            line-height: 0.1;
            vertical-align: -0.4em;
            color: #d1fae5; /* Lighter green for quote marks */
            margin-right: 0.1em;
        }
        #treaty blockquote::after {
            content: '”';
            margin-left: 0.05em;
        }

        /* Signal Packet - Hacker console feel, RiteNest themed */
        .landing-section.py-10.text-xs.text-center {
            background-color: var(--ritenest-card-bg);
            color: var(--ritenest-primary);
            padding: 4rem 2rem;
            border-bottom: 1px solid var(--ritenest-border);
            box-shadow: inset 0 5px 20px rgba(0,0,0,0.05);
        }
        .landing-section.py-10.text-xs.text-center pre {
            background-color: #1a1b20; /* Dark background for code */
            border: 1px solid var(--ritenest-primary); /* Deep green border */
            border-radius: 10px;
            padding: 2rem;
            box-shadow: 0 0 20px rgba(4, 120, 87, 0.4); /* Green glow */
            white-space: pre-wrap;
            word-break: break-all;
            font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;
            font-size: 0.9rem;
            color: var(--ritenest-secondary); /* Medium green for code text */
        }

        /* VaultMesh Executive Summary - Structured and powerful, RiteNest themed */
        #vaultmesh {
            background-color: var(--ritenest-light-bg);
            color: var(--ritenest-dark-text);
            padding: 6rem 2rem;
            border-bottom: 1px solid var(--ritenest-border);
            box-shadow: inset 0 5px 20px rgba(0,0,0,0.05);
        }
        #vaultmesh h2 {
            font-size: 2.8rem;
            font-weight: 800;
            color: var(--ritenest-dark-text);
            margin-bottom: 2rem;
            text-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        #vaultmesh h2.text-purple-400 { /* This was a purple gradient, now green-ish */
            background: linear-gradient(90deg, var(--ritenest-primary), var(--ritenest-accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        #vaultmesh h3 {
            font-size: 1.6rem;
            font-weight: 700;
            color: var(--ritenest-dark-text);
            margin-top: 3rem;
            margin-bottom: 1.2rem;
        }
        #vaultmesh p {
            font-size: 1.1rem;
            color: var(--ritenest-muted-text);
            line-height: 1.6;
        }
        #vaultmesh ul {
            list-style-type: none; /* Remove default bullets */
            padding-left: 0;
            margin-left: 0;
            color: var(--ritenest-muted-text);
        }
        #vaultmesh ul li {
            font-size: 1.1rem;
            margin-bottom: 0.75rem;
            position: relative;
            padding-left: 1.5rem;
        }
        #vaultmesh ul li::before { /* Custom bullet point */
            content: '•';
            position: absolute;
            left: 0;
            color: var(--ritenest-accent); /* Teal bullet */
            font-size: 1.2em;
            line-height: 1;
            top: 0.1em;
        }
        #vaultmesh ul.list-decimal li::before { /* Ensure decimal still works if applied */
            content: counter(list-item) ".";
            color: var(--ritenest-primary); /* Deep green for numbered lists */
        }
        #vaultmesh code {
            background-color: var(--ritenest-card-bg);
            padding: 0.3em 0.6em;
            border-radius: 6px;
            font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;
            color: var(--ritenest-primary);
            border: 1px solid var(--ritenest-border);
        }

        /* About Section - Clean and impactful, RiteNest themed */
        #about {
            background-color: #e0fdf0; /* Slightly different light green */
            color: var(--ritenest-dark-text);
            padding: 6rem 2rem;
            border-bottom: 1px solid var(--ritenest-border);
            box-shadow: inset 0 5px 20px rgba(0,0,0,0.05);
        }
        #about h3 {
            font-size: 2.8rem;
            font-weight: 800;
            color: var(--ritenest-dark-text);
            margin-bottom: 2rem;
            text-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        #about p {
            font-size: 1.2rem;
            color: var(--ritenest-muted-text);
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Call to Action Section - Bold and inviting, RiteNest themed */
        #cta-landing {
            background: linear-gradient(135deg, var(--ritenest-primary), var(--ritenest-secondary), var(--ritenest-accent)); /* Green gradient */
            padding: 8rem 2rem;
            color: white;
            text-align: center;
            border-top-left-radius: 60px;
            border-top-right-radius: 60px;
            box-shadow: 0 -15px 50px rgba(0,0,0,0.3);
        }
        #cta-landing h3 {
            font-size: 3.5rem;
            font-weight: 900;
            color: white;
            margin-bottom: 2rem;
            line-height: 1.1;
            text-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        #cta-landing p {
            font-size: 1.3rem;
            color: #d1fae5;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            margin-bottom: 3rem;
        }
        #cta-landing .cta-button {
            background: #fcd34d; /* Yellow button for contrast */
            color: var(--ritenest-dark-text);
            padding: 1.2rem 3rem;
            border-radius: 30px;
            font-weight: 800;
            font-size: 1.25rem;
            transition: all 0.3s cubic-bezier(0.2, 0.8, 0.2, 1);
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            letter-spacing: 0.08em;
            text-transform: uppercase;
        }
        #cta-landing .cta-button:hover {
            filter: brightness(1.1);
            transform: translateY(-5px) scale(1.03);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3), 0 0 30px rgba(252, 211, 77, 0.8);
        }

        /* Footer - Subtly integrated, RiteNest themed */
        footer {
            background-color: var(--ritenest-primary);
            color: #d1fae5;
            padding: 2.5rem;
            font-size: 0.9rem;
            border-top: 1px solid rgba(255,255,255,0.2);
            box-shadow: inset 0 5px 15px rgba(0,0,0,0.2);
            text-align: center;
        }
        footer a {
            color: #d1fae5;
            text-decoration: none;
            transition: color 0.2s ease;
        }
        footer a:hover {
            color: white;
        }

        /* Dashboard Wrapper - Hidden by default, shown by JS */
        #ritenest-dashboard-wrapper {
            background-color: var(--ritenest-light-bg);
            min-height: 100vh; /* Ensure it takes full height when active */
        }
        .dashboard-container {
            display: flex;
            flex-grow: 1;
        }
        .dashboard-sidebar {
            width: 256px; /* w-64 */
            padding: 24px; /* p-6 */
            background-color: var(--ritenest-card-bg);
            border-right: 1px solid var(--ritenest-border);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 16px; /* space-y-4 */
        }
        .dashboard-sidebar-nav-item {
            display: flex;
            align-items: center;
            gap: 12px; /* gap-3 */
            width: 100%;
            padding: 12px; /* p-3 */
            border-radius: 8px; /* rounded-lg */
            font-size: 18px; /* text-lg */
            font-weight: 500; /* font-medium */
            transition: all 0.2s;
            color: var(--ritenest-dark-text);
        }
        .dashboard-sidebar-nav-item:hover {
            background-color: var(--hover-bg-light);
        }
        .dashboard-sidebar-nav-item.active {
            background-color: var(--ritenest-primary);
            color: white;
        }
        .dashboard-main-content {
            flex-grow: 1;
            padding: 32px; /* p-8 */
            background-color: var(--ritenest-light-bg);
            overflow-y: auto;
        }
        .dashboard-card {
            padding: 24px; /* p-6 */
            background-color: var(--ritenest-card-bg);
            border-radius: 8px; /* rounded-lg */
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
            border: 1px solid var(--ritenest-border);
        }
        .dashboard-sub-card {
            padding: 20px; /* p-5 */
            background-color: #dcfce7; /* a bit lighter green for internal cards */
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .dashboard-text-light { color: var(--ritenest-dark-text); }
        .dashboard-muted-text { color: var(--ritenest-muted-text); }
        .text-accent { color: var(--ritenest-accent); } /* Used for icons/numbers in dashboard */
        .brand-heading { color: var(--ritenest-primary); } /* Used for section titles in dashboard */

        /* Tab navigation styles for dashboard internal sections */
        #ritenest-dashboard-wrapper .tab-nav-item {
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            white-space: nowrap;
            background-color: var(--ritenest-card-bg); /* Default background */
            color: var(--ritenest-dark-text); /* Default text color */
            border: 1px solid var(--ritenest-border); /* Default border */
            transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease;
        }
        #ritenest-dashboard-wrapper .tab-nav-item:hover {
            background-color: #a7f3d0; /* Lighter green on hover */
            color: var(--ritenest-primary); /* Darker text on hover */
        }
        #ritenest-dashboard-wrapper .tab-nav-item.active {
            background-color: var(--ritenest-primary); /* Active background */
            color: white; /* Active text color */
            border-color: var(--ritenest-primary); /* Active border */
            font-weight: 600;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        #ritenest-dashboard-wrapper .tab-content {
            display: none;
        }
        #ritenest-dashboard-wrapper .tab-content.active {
            display: block;
        }

        /* Specific styles for elements within the dashboard sections */
        .api-key-warning {
            color: #ef4444; /* red-500 */
            background-color: #fecaca; /* red-200 */
            border-left: 4px solid #ef4444;
            padding: 1rem;
            margin-top: 1rem;
            font-weight: 600;
        }
        .provenance-step {
            background-color: #ecfdf5;
            border-left: 4px solid var(--ritenest-primary);
            padding: 1rem;
            border-radius: 0.5rem;
            position: relative;
        }
        .provenance-step::before {
            content: '';
            position: absolute;
            left: -10px;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            background-color: var(--ritenest-primary);
            border-radius: 50%;
            border: 3px solid var(--ritenest-card-bg);
        }
        .discussion-post {
            background-color: #ecfdf5;
            border: 1px solid var(--ritenest-border);
            border-radius: 0.5rem;
            padding: 1rem;
        }

        /* Responsive adjustments for Dashboard elements */
        @media (max-width: 768px) {
            .dashboard-container {
                flex-direction: column;
            }
            .dashboard-sidebar {
                width: 100%;
                height: auto;
                border-right: none;
                border-bottom: 1px solid var(--ritenest-border);
                padding-bottom: 1rem;
            }
            .dashboard-sidebar-nav-item {
                justify-content: center;
            }
            .dashboard-main-content {
                width: 100%;
            }
            .grid-cols-2-md {
                grid-template-columns: 1fr;
            }
        }

        /* Banimal Section Styles - Re-themed to fit RiteNest light theme */
        #banimal-landing-page {
            background: linear-gradient(135deg, #e0fdf0 0%, #f0fdf4 100%); /* Light green gradient */
            color: var(--ritenest-dark-text);
            border-bottom: 1px solid var(--ritenest-border);
            box-shadow: inset 0 5px 20px rgba(0,0,0,0.05);
            position: relative; /* Needed for canvas positioning */
            overflow: hidden; /* Hide overflowing canvas particles */
            height: 100vh; /* Take full viewport height */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 2rem;
        }
        #banimal-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.5; /* More subtle */
            z-index: 0;
        }
        .banimal-hero-content {
            position: relative;
            z-index: 1; /* Ensure content is above canvas */
            max-width: 800px;
            margin: 0 auto;
        }
        .banimal-hero-content h1 {
            color: var(--ritenest-primary); /* Deep green for Banimal™ */
            text-shadow: 0 4px 10px rgba(4, 120, 87, 0.1);
            font-size: 3.5rem;
            font-weight: 900;
            line-height: 1.2;
            margin-bottom: 1rem;
        }
        .banimal-hero-content h1 span {
            color: var(--ritenest-secondary); /* Medium green for slogan */
            display: block;
            font-size: 0.7em;
            font-weight: 700;
        }
        .banimal-hero-content p {
            color: var(--ritenest-muted-text);
            font-size: 1.15rem;
            line-height: 1.6;
            margin-bottom: 2rem;
        }
        .shop-now-button {
            background: linear-gradient(45deg, #fcd34d, #f97316); /* Yellow/Orange for contrast */
            box-shadow: 0 8px 25px rgba(252, 211, 77, 0.4);
            border: 1px solid rgba(252, 211, 77, 0.5);
            color: var(--ritenest-dark-text); /* Dark text on light button */
        }
        .shop-now-button:hover {
            background: linear-gradient(45deg, #f97316, #fcd34d);
            box-shadow: 0 10px 30px rgba(252, 211, 77, 0.6);
            border-color: rgba(252, 211, 77, 0.8);
        }

        /* Modal Styles */
        .modal {
            position: fixed;
            z-index: 100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.6);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .modal-content {
            background-color: var(--ritenest-card-bg);
            margin: auto;
            padding: 20px;
            border: 1px solid var(--ritenest-border);
            border-radius: 10px;
            width: 80%;
            max-width: 500px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            text-align: center;
            position: relative;
        }
        .close-button {
            color: var(--ritenest-dark-text);
            position: absolute;
            top: 10px;
            right: 20px;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        .close-button:hover,
        .close-button:focus {
            color: var(--ritenest-primary);
            text-decoration: none;
            cursor: pointer;
        }

        /* Settings Tab Navigation - RiteNest Themed */
        #settings .settings-tab-btn {
            padding: 0.75rem 1.25rem;
            background-color: var(--ritenest-card-bg); /* Lighter green for default tab */
            border: 1px solid var(--ritenest-border);
            color: var(--ritenest-dark-text);
            font-weight: 500;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.2s ease;
            border-radius: 8px 8px 0 0; /* Rounded top corners */
        }
        #settings .settings-tab-btn:hover {
            color: var(--ritenest-primary);
            background-color: #a7f3d0; /* Even lighter green on hover */
            border-color: var(--ritenest-primary);
        }
        #settings .settings-tab-btn.active {
            color: white;
            background-color: var(--ritenest-primary); /* Deep green for active tab */
            border-color: var(--ritenest-primary);
            font-weight: 600;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        /* Settings Panel Styling - RiteNest Themed */
        #settings .panel {
            background-color: var(--ritenest-card-bg); /* Lighter green for panels */
            border: 1px solid var(--ritenest-border);
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            color: var(--ritenest-dark-text);
        }
        #settings .panel h3, #settings .panel h4 {
            color: var(--ritenest-primary); /* Deep green for headings */
        }
        #settings .panel p {
            color: var(--ritenest-muted-text);
        }

        /* Form Controls - RiteNest Themed */
        #settings .form-control label {
            color: var(--ritenest-dark-text);
        }
        #settings .form-control input[type="text"],
        #settings .form-control input[type="email"],
        #settings .form-control input[type="password"],
        #settings .form-control select,
        #settings .form-control textarea,
        #settings .form-control input[type="number"] {
            background-color: #ecfdf5; /* Very light green for input fields */
            border: 1px solid var(--ritenest-border);
            color: var(--ritenest-dark-text);
        }
        #settings .form-control input:focus,
        #settings .form-control select:focus,
        #settings .form-control textarea:focus {
            border-color: var(--ritenest-accent); /* Teal green focus */
            box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.3);
        }
        #settings .form-action-button {
            background-color: var(--ritenest-secondary); /* Medium green button */
            color: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        #settings .form-action-button:hover {
            background-color: var(--ritenest-primary); /* Darker green on hover */
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        /* API Key Table - RiteNest Themed */
        #settings .api-key-table th {
            background-color: #c6f6d5; /* Lightest green for table header */
            color: var(--ritenest-primary); /* Deep green for header text */
        }
        #settings .api-key-table td {
            color: var(--ritenest-dark-text);
        }
        #settings .api-key-table tr:hover {
            background-color: #e0fdf0; /* Slightly different light green on hover */
        }
        #settings .api-key-value {
            color: var(--ritenest-muted-text);
        }
        #settings .security-note {
            background-color: #fef2f2; /* Light red for warning */
            border-left-color: #dc2626; /* Stronger red border */
            color: #dc2626; /* Stronger red text */
        }

        /* Company Selection Card - RiteNest Themed */
        #settings .company-select-card {
            background-color: #ecfdf5; /* Very light green for company cards */
            border: 1px solid var(--ritenest-border);
            color: var(--ritenest-dark-text);
        }
        #settings .company-select-card:hover {
            background-color: #dcfce7; /* Lighter green on hover */
        }
        #settings .company-select-card h3 {
            color: var(--ritenest-primary); /* Deep green for company name */
        }
        #settings .company-select-card p {
            color: var(--ritenest-muted-text);
        }
        #settings .company-details-section {
            background-color: #ecfdf5; /* Very light green for details section */
            border: 1px solid var(--ritenest-border);
            color: var(--ritenest-dark-text);
        }
        #settings .company-details-section h4 {
            color: var(--ritenest-primary); /* Deep green for details heading */
        }
        #settings .company-details-section strong {
            color: var(--ritenest-accent); /* Teal green for detail keys */
        }
        #settings .copy-square {
            background-color: #ecfdf5; /* Very light green for copy squares */
            border: 1px solid var(--ritenest-border);
        }
        #settings .copy-square pre {
            color: var(--ritenest-dark-text);
        }
        #settings .copy-square .copy-button {
            background-color: var(--ritenest-secondary); /* Medium green copy button */
        }
        #settings .copy-square .copy-button:hover {
            background-color: var(--ritenest-primary); /* Darker green on hover */
        }
        #settings .loading-spinner {
            border-top-color: var(--ritenest-primary); /* Deep green spinner */
        }
        #settings .text-green-500 {
            color: var(--ritenest-accent); /* Teal green for success icons */
        }
        #settings .text-yellow-500 {
            color: #facc15; /* Yellow for pending icons */
        }
        #settings .text-red-500 {
            color: #ef4444; /* Red for error icons */
        }
        #settings .bg-purple-600 {
            background-color: #7c3aed; /* Purple for AI buttons */
        }
        #settings .hover:bg-purple-700:hover {
            background-color: #6d28d9; /* Darker purple on hover */
        }
        #settings .bg-blue-600 {
            background-color: #2563eb; /* Blue for deploy button */
        }
        #settings .hover:bg-blue-700:hover {
            background-color: #1d4ed8; /* Darker blue on hover */
        }
        #settings .text-blue-500 {
            color: #3b82f6; /* Blue for edit/delete buttons */
        }
        #settings .hover:text-blue-700:hover {
            color: #1d4ed8; /* Darker blue on hover */
        }

        /* Email Draft Modal specific styling */
        .custom-modal-overlay {
            background-color: rgba(0,0,0,0.6); /* Darker overlay */
        }
        .custom-modal-content {
            background-color: var(--ritenest-card-bg); /* Lighter green background */
            color: var(--ritenest-dark-text); /* Dark text */
            border: 1px solid var(--ritenest-border); /* Green border */
            box-shadow: 0 8px 25px rgba(0,0,0,0.3); /* Darker shadow */
        }
        .custom-modal-content h3 {
            color: var(--ritenest-primary); /* Deep green title */
        }
        .custom-modal-content .close-preview-btn {
            color: var(--ritenest-dark-text); /* Dark text for close button */
        }
        .custom-modal-content .close-preview-btn:hover {
            color: var(--ritenest-primary); /* Darker green on hover */
        }
        .custom-modal-content .template-preview-body p {
            color: var(--ritenest-muted-text); /* Muted text for body */
        }
        .custom-modal-content .form-control input,
        .custom-modal-content .form-control textarea {
            background-color: #ecfdf5; /* Very light green for inputs */
            border: 1px solid var(--ritenest-border);
            color: var(--ritenest-dark-text);
        }
        .custom-modal-content .form-action-button {
            background-color: var(--ritenest-secondary); /* Medium green button */
            color: white;
        }
        .custom-modal-content .form-action-button:hover {
            background-color: var(--ritenest-primary); /* Darker green on hover */
        }
        .custom-modal-content .btn-primary {
            background-color: var(--ritenest-accent); /* Teal green for primary action */
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            transition: background-color 0.2s ease;
        }
        .custom-modal-content .btn-primary:hover {
            background-color: var(--ritenest-primary); /* Darker green on hover */
        }
        .custom-modal-content .btn-secondary {
            background-color: #cbd5e1; /* Light gray for secondary action */
            color: var(--ritenest-dark-text);
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            transition: background-color 0.2s ease;
        }
        .custom-modal-content .btn-secondary:hover {
            background-color: #a0aec0; /* Darker gray on hover */
        }

    </style>
</head>
<body>

    <header class="py-4 px-6 md:px-12 flex justify-between items-center text-white">
        <h1 class="text-2xl font-extrabold tracking-tight">🌿 RiteNest™</h1>
        <nav class="flex items-center space-x-4">
            <a href="javascript:void(0)" class="header-nav-item transition-colors duration-200" onclick="window.showMainSection('hero-section')">Home</a>
            <a href="javascript:void(0)" class="header-nav-item transition-colors duration-200" onclick="window.showMainSection('features')">Features</a>
            <a href="javascript:void(0)" class="header-nav-item transition-colors duration-200" onclick="window.showMainSection('shareprice')">Signal</a>
            <a href="javascript:void(0)" class="header-nav-item transition-colors duration-200" onclick="window.showMainSection('vault-access')">Vault</a>
            <a href="javascript:void(0)" class="header-nav-item transition-colors duration-200" onclick="window.showMainSection('treaty')">Treaty</a>
            <a href="javascript:void(0)" class="header-nav-item transition-colors duration-200" onclick="window.showMainSection('vaultmesh')">VaultMesh</a>
            <a href="javascript:void(0)" class="header-nav-item primary-btn" onclick="window.showMainSection('ritenest-dashboard-wrapper')">Dashboard</a>
            <a href="javascript:void(0)" class="header-nav-item transition-colors duration-200" onclick="window.showMainSection('banimal-landing-page')">Banimal</a>
        </nav>
    </header>

    <!-- Landing Page Sections -->
    <section id="hero-section" class="landing-section text-center hidden">
        <div class="hero-content">
            <h2 class="text-5xl md:text-6xl font-extrabold mb-6 leading-tight">
                Preserve. Connect. <span class="text-yellow-300">Flourish.</span>
            </h2>
            <p class="text-xl md:text-2xl mb-10 max-w-2xl mx-auto">
                Digitally safeguard ancestral rituals and cultural heritage for future generations with RiteNest's secure protocols.
            </p>
            <a href="javascript:void(0)" class="cta-button" onclick="window.showMainSection('ritenest-dashboard-wrapper')">
                Explore RiteNest™ <span>🌿</span>
            </a>
        </div>
    </section>

    <section id="features" class="landing-section py-16 md:py-24 px-6 md:px-12 text-center hidden">
        <div class="max-w-6xl mx-auto">
            <h3 class="text-4xl font-bold text-center mb-16">
                Core Features of RiteNest™
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="feature-card">
                    <div><i class="fas fa-book-open"></i></div>
                    <h4>Ritual Documentation</h4>
                    <p>
                        Comprehensive tools for archiving and detailing ceremonial practices, oral histories, and cultural narratives.
                    </p>
                </div>
                <div class="feature-card">
                    <div><i class="fas fa-fingerprint"></i></div>
                    <h4>Digital Provenance (GlyphTag)</h4>
                    <p>
                        Securely timestamp and verify the authenticity and lineage of every piece of cultural content.
                    </p>
                </div>
                <div class="feature-card">
                    <div><i class="fas fa-cloud-upload-alt"></i></div>
                    <h4>Secure Media Vault (VaultSpirit)</h4>
                    <p>
                        High-fidelity storage for audio, video, and images of sacred ceremonies and artifacts.
                    </p>
                </div>
                <div class="feature-card">
                    <div><i class="fas fa-users-class"></i></div>
                    <h4>Community & Learning (ScrollLoop)</h4>
                    <p>
                        Foster discussions, share insights, and access educational resources on global rituals.
                    </p>
                </div>
                <div class="feature-card">
                    <div><i class="fas fa-map-marker-alt"></i></div>
                    <h4>Ancestral Mapping (TotemTrack)</h4>
                    <p>
                        Track the geographical and historical origins of totems and lineage.
                    </p>
                </div>
                <div class="feature-card">
                    <div><i class="fas fa-chart-line"></i></div>
                    <h4>Progress Analytics</h4>
                    <p>
                        Monitor the documentation progress and engagement metrics of your cultural archives.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <section id="shareprice" class="landing-section py-12 text-center hidden">
        <h2 class="text-3xl font-semibold mb-2">🌿 RiteNest™ Signal</h2>
        <div id="price" class="text-5xl font-bold">$88.88</div>
        <div class="text-sm text-gray-400 mt-1">Last updated: <span id="timestamp">Live</span></div>
    </section>

    <section id="seedwave" class="landing-section py-16 px-6 text-center hidden">
        <h2 class="text-4xl font-bold mb-8">🌱 RiteNest™ Growth & Impact 🌱</h2>
        <div class="w-full max-w-4xl mx-auto p-6 rounded-xl shadow-lg">
            <canvas id="brandChart"></canvas>
        </div>
    </section>

    <section id="founder-glyph" class="landing-section py-16 px-6 text-center bg-gray-700 hidden">
        <div class="max-w-3xl mx-auto">
            <h2 class="text-4xl font-bold mb-6">🌿 Founder's Vision</h2>
            <p class="text-xl leading-relaxed">
                RiteNest™ emerged from a deep respect for ancestral wisdom and the power of digital preservation. We believe in creating a living archive, where tradition meets technology to ensure cultural continuity.
            </p>
            <p class="mt-6 italic">
                This isn't just about data; it's about the soul of humanity, meticulously preserved and made accessible for future generations. Our protocols ensure integrity, authenticity, and profound connection.
            </p>
            <p class="mt-6 font-semibold">— From the Guardians of Heritage 🌍 RiteNest™ Protocol Activated™</p>
        </div>
    </section>

    <section id="vault-access" class="landing-section py-16 px-6 hidden">
        <h3 class="text-4xl font-bold text-center mb-10">🔐 RiteNest™ Vault Access</h3>

        <div class="w-full max-w-6xl mx-auto mb-10">
            <div class="w-full h-[800px] border-4 rounded-xl shadow-2xl overflow-hidden">
                <iframe
                    id="vault-frame"
                    src=""
                    class="w-full h-full rounded-xl"
                    frameborder="0"
                    title="VaultMaster Terminal"
                    sandbox="allow-scripts allow-same-origin allow-forms"
                ></iframe>
            </div>
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto">
            <button onclick="window.loadTerminal('vault-master.html')" class="terminal-btn p-6">🦍 VaultMaster Terminal</button>
            <button onclick="window.loadTerminal('cube-lattice.html')" class="terminal-btn p-6">🧱 Cube Lattice GPT</button>
            <button onclick="window.loadTerminal('global-view.html')" class="terminal-btn p-6">🌍 Global View GPT</button>
            <button onclick="window.loadTerminal('freight-ops.html')" class="terminal-btn p-6">🚚 Freight Ops GPT</button>
            <button onclick="window.loadTerminal('loop-watch.html')" class="terminal-btn p-6">♻️ Loop Watch GPT</button>
            <button onclick="window.loadTerminal('seedwave.html')" class="terminal-btn p-6">🌱 Seedwave GPT</button>
            <button onclick="window.loadTerminal('distribution.html')" class="terminal-btn p-6">📦 Distribution GPT</button>
            <button onclick="window.loadTerminal('signal.html')" class="terminal-btn p-6">🔐 Signal GPT</button>
            <button onclick="window.loadTerminal('faa-brands.html')" class="terminal-btn p-6">📦 All FAA Brands</button>
        </div>
    </section>

    <section id="sector-scrolls" class="landing-section py-16 px-6 text-center hidden">
        <h2 class="text-4xl font-bold mb-8">🧬 Ritual & Culture Sectors</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 max-w-6xl mx-auto">
            <a href="javascript:void(0)" class="glyph" data-vault="payroll" onclick="window.showMessage('Simulating: Navigating to Payroll Sector.')">💰 Payroll Core Systems</a>
            <a href="javascript:void(0)" class="glyph" data-vault="retail" onclick="window.showMessage('Simulating: Navigating to Retail Sector.')">🛍️ Retail, Vendor & Trade</a>
            <a href="javascript:void(0)" class="glyph" data-vault="ai-logic" onclick="window.showMessage('Simulating: Navigating to AI, Logic & Grid Systems Sector.')">🧠 AI, Logic & Grid Systems</a>
            <a href="javascript:void(0)" class="glyph" data-vault="design" onclick="window.showMessage('Simulating: Navigating to Creative & Design Systems Sector.')">✒️ Creative & Design Systems</a>
            <a href="javascript:void(0)" class="glyph" data-vault="finance" onclick="window.showMessage('Simulating: Navigating to Finance & Token Yield Sector.')">₿ Finance & Token Yield</a>
            <a href="javascript:void(0)" class="glyph" data-vault="webless" onclick="window.showMessage('Simulating: Navigating to Webless Tech & Nodes Sector.')">⚙️ Webless Tech & Nodes</a>
            <a href="javascript:void(0)" class="glyph" data-vault="logistics" onclick="window.showMessage('Simulating: Navigating to Logistics & Packaging Sector.')">📦 Logistics & Packaging</a>
            <a href="javascript:void(0)" class="glyph" data-vault="food" onclick="window.showMessage('Simulating: Navigating to Food, Soil & Farming Sector.')">🥦 Food, Soil & Farming</a>
            <a href="javascript:void(0)" class="glyph" data-vault="education" onclick="window.showMessage('Simulating: Navigating to Youth & Education Sector.')">🧒 Youth & Education</a>
            <a href="javascript:void(0)" class="glyph" data-vault="health" onclick="window.showMessage('Simulating: Navigating to Health & Hygiene Sector.')">🧴 Health & Hygiene</a>
            <a href="javascript:void(0)" class="glyph" data-vault="culture" onclick="window.showMessage('Simulating: Navigating to Aura, Ritual & Culture Sector.')">🪷 Aura, Ritual & Culture</a>
            <a href="javascript:void(0)" class="glyph" data-vault="housing" onclick="window.showMessage('Simulating: Navigating to Housing & Infrastructure Sector.')">🏛️ Housing & Infrastructure</a>
            <a href="javascript:void(0)" class="glyph" data-vault="nft" onclick="window.showMessage('Simulating: Navigating to NFT, IP, Ownership Grid Sector.')">🪪 NFT, IP, Ownership Grid</a>
            <a href="javascript:void(0)" class="glyph" data-vault="media" onclick="window.showMessage('Simulating: Navigating to Motion, Media, Sonic Sector.')">🌐 Motion, Media, Sonic</a>
            <a href="javascript:void(0)" class="glyph" data-vault="mining" onclick="window.showMessage('Simulating: Navigating to Mining & Material Yields Sector.')">⛏️ Mining & Material Yields</a>
            <a href="javascript:void(0)" class="glyph" data-vault="wildlife" onclick="window.showMessage('Simulating: Navigating to Wildlife Sector.')">🚁 Wildlife Sector</a>
        </div>
    </section>

    <div id="sector-content-container" class="mt-10 px-6 max-w-6xl mx-auto">
        <!-- Dynamic sector content will be loaded here -->
        <!-- Admin Panel Snapshot boxes (moved from dashboard HTML for consistency) -->
        <div id="embedded-payroll-snapshot" class="brand-snapshot hidden">
            <h4 class="text-xl font-bold mb-2 text-ritenest-dark-text">Payroll Core Systems Snapshot</h4>
            <p class="text-ritenest-muted-text">Payroll system overview. [Mock Data]</p>
        </div>
        <div id="embedded-retail-snapshot" class="brand-snapshot hidden">
            <h4 class="text-xl font-bold mb-2 text-ritenest-dark-text">Retail, Vendor & Trade Snapshot</h4>
            <p class="text-ritenest-muted-text">Retail sales and vendor management insights. [Mock Data]</p>
        </div>
        <div id="embedded-ai-logic-snapshot" class="brand-snapshot hidden">
            <h4 class="text-xl font-bold mb-2 text-ritenest-dark-text">AI, Logic & Grid Systems Snapshot</h4>
            <p class="text-ritenest-muted-text">AI model performance and grid utilization. [Mock Data]</p>
        </div>
        <div id="embedded-design-snapshot" class="brand-snapshot hidden">
            <h4 class="text-xl font-bold mb-2 text-ritenest-dark-text">Creative & Design Systems Snapshot</h4>
            <p class="text-ritenest-muted-text">Design asset management and creative pipeline. [Mock Data]</p>
        </div>
        <div id="embedded-finance-snapshot" class="brand-snapshot hidden">
            <h4 class="text-xl font-bold mb-2 text-ritenest-dark-text">Finance & Token Yield Snapshot</h4>
            <p class="text-ritenest-muted-text">Financial performance and token analytics. [Mock Data]</p>
        </div>
        <div id="embedded-webless-snapshot" class="brand-snapshot hidden">
            <h4 class="text-xl font-bold mb-2 text-ritenest-dark-text">Webless Tech & Nodes Snapshot</h4>
            <p class="text-ritenest-muted-text">Webless network status and node health. [Mock Data]</p>
        </div>
        <div id="embedded-logistics-snapshot" class="brand-snapshot hidden">
            <h4 class="text-xl font-bold mb-2 text-ritenest-dark-text">Logistics & Packaging Snapshot</h4>
            <p class="text-ritenest-muted-text">Supply chain efficiency and packaging optimization. [Mock Data]</p>
        </div>
        <div id="embedded-food-snapshot" class="brand-snapshot hidden">
            <h4 class="text-xl font-bold mb-2 text-ritenest-dark-text">Food, Soil & Farming Snapshot</h4>
            <p class="text-ritenest-muted-text">Agricultural data and food supply chain insights. [Mock Data]</p>
        </div>
        <div id="embedded-education-snapshot" class="brand-snapshot hidden">
            <h4 class="text-xl font-bold mb-2 text-ritenest-dark-text">Youth & Education Snapshot</h4>
            <p class="text-ritenest-muted-text">Educational program metrics and youth engagement. [Mock Data]</p>
        </div>
        <div id="embedded-health-snapshot" class="brand-snapshot hidden">
            <h4 class="text-xl font-bold mb-2 text-ritenest-dark-text">Health & Hygiene Snapshot</h4>
            <p class="text-ritenest-muted-text">Public health data and hygiene initiatives. [Mock Data]</p>
        </div>
        <div id="embedded-culture-snapshot" class="brand-snapshot hidden">
            <h4 class="text-xl font-bold mb-2 text-ritenest-dark-text">Aura, Ritual & Culture Snapshot</h4>
            <div class="scroll-cards flex flex-col space-y-6">
                <!-- Media scroll profiles will load here dynamically -->
                <p class="text-ritenest-muted-text">Loading media scroll profiles...</p>
            </div>
        </div>
        <div id="embedded-housing-snapshot" class="brand-snapshot hidden">
            <h4 class="text-xl font-bold mb-2 text-ritenest-dark-text">Housing & Infrastructure Snapshot</h4>
            <p class="text-ritenest-muted-text">Infrastructure development and housing project status. [Mock Data]</p>
        </div>
        <div id="embedded-nft-snapshot" class="brand-snapshot hidden">
            <h4 class="text-xl font-bold mb-2 text-ritenest-dark-text">NFT, IP, Ownership Grid Snapshot</h4>
            <p class="text-ritenest-muted-text">NFT market trends and intellectual property tracking. [Mock Data]</p>
        </div>
        <div id="embedded-media-snapshot" class="brand-snapshot hidden">
            <h4 class="text-xl font-bold mb-2 text-ritenest-dark-text">Motion, Media, Sonic Snapshot</h4>
            <div class="scroll-cards flex flex-col space-y-6">
                <!-- Media scroll profiles will load here dynamically -->
                <p class="text-ritenest-muted-text">Loading media scroll profiles...</p>
            </div>
        </div>
        <div id="embedded-mining-snapshot" class="brand-snapshot hidden">
            <h4 class="text-xl font-bold mb-2 text-ritenest-dark-text">Mining & Material Yields Snapshot</h4>
            <p class="text-ritenest-muted-text">Mining operations data and material yields. [Mock Data]</p>
        </div>
        <div id="embedded-wildlife-snapshot" class="brand-snapshot hidden">
            <h4 class="text-xl font-bold mb-2 text-ritenest-dark-text">Wildlife Population Data and Conservation Efforts Snapshot</h4>
            <p class="text-ritenest-muted-text">Wildlife population data and conservation efforts. [Mock Data]</p>
        </div>
    </div>


    <section id="treaty" class="landing-section py-16 px-6 text-center hidden">
        <h2 class="text-4xl font-bold mb-6">📜 Treaty System™</h2>
        <p class="max-w-2xl mx-auto text-lg mb-8">The FAA™ Treaty Layer binds interface to intention. This is not UI. This is glyph-encoded law.</p>
        <blockquote class="text-2xl italic font-semibold">"RiteNest™ isn't a site. It's the shape of alignment — and 🌿 holds the flame."</blockquote>
    </section>

    <section id="signal-packet" class="landing-section py-10 text-xs text-center hidden">
        <pre class="max-w-2xl mx-auto p-4 rounded-lg overflow-auto"><code>{
    "signal": "omnidrop",
    "origin": "If you don't like the fruits you are growing, change the seed™ / FAA Vault Layer",
    "payload": {
        "type": "scroll",
        "value": "homepage + VaultRouter + all terminal iframe buttons live + Treaty Grid"
    }
}</code></pre>
    </section>

    <section id="vaultmesh" class="landing-section py-20 px-6 hidden">
        <div class="max-w-4xl mx-auto text-left space-y-6">

            <h2 class="text-4xl font-bold">🧠 VaultMesh™: Executive Summary</h2>

            <p>VaultMesh™ is an intelligent data orchestration framework designed for the segmentation, synchronization, and secure deployment of high-value digital assets—referred to as scrolls—across decentralized and permissioned networks such as FAA.Zone™.</p>

            <ul class="list-disc ml-6 space-y-2">
                <li>Captures metadata-rich content streams (chats, code, brands, assets)</li>
                <li>Assigns them to programmable claim structures (ScrollClaims™)</li>
                <li>Secures their lineage using OmniSignal™, PulseGrid™, and GhostTrace™ layers</li>
                <li>Enforces royalty logic, scroll integrity, and traceability on-chain and off-grid</li>
            </ul>

            <p>VaultMesh™ powers high-tier operations like HSOMNI9000™, enabling Diamond-tier deployments, cross-sector scroll claims, and enterprise-scale content monetization with full compliance and provenance.</p>

            <p>The framework is deeply integrated with platforms such as <code>vault.faa.zone™</code>, where scrolls tied to brands like Fruitful Global Planet™ are securely hosted, organized into structured sectors, and deployed through FAA.Zone™-compliant channels.</p>

            <p>A critical operator in this ecosystem is HSOMNI9000™, the certified scroll class which governs Diamond-tier logic, enforces 10–11% royalty triggers, and auto-deploys ScrollClaims™ with real-time ClaimRoot™ verification.</p>

            <h3 class="text-2xl font-semibold mt-10">📖 VaultMesh™ Index</h3>
            <ul class="list-decimal ml-6 space-y-1">
                <li>Introduction to VaultMesh™</li>
                <li>Core System Components</li>
                <li>ScrollClaim™ Infrastructure</li>
                <li>Data Flow and Claim Lifecycle</li>
                <li>Tiering, Royalties, and Compliance</li>
                <li>Integration with FAA.Zone™</li>
                <li>Market Segments & Use Cases</li>
                <li>Revenue Streams & Monetization</li>
                <li>Technology Roadmap</li>
                <li>Team & Governance</li>
            </ul>

            <h3 class="text-xl font-bold mt-10">☑️ 1. Introduction to VaultMesh™</h3>
            <p>VaultMesh™ transforms disorganized digital content into claimable, trackable assets. It bridges enterprise content systems, decentralized data vaults, and monetization layers through FAA-compliant infrastructure.</p>

            <h3 class="text-xl font-bold mt-10">⚒️ 2. Core System Components</h3>
            <ul class="list-disc ml-6 space-y-1">
                <li>VaultDNA™: Immutable identifiers for scroll content</li>
                <li>ClaimRoot™: Origin anchor & timestamp</li>
                <li>ScrollClaim™ Contracts: Programmable wrappers</li>
                <li>PulseGrid™ Sync: Real-time scroll presence & sync</li>
                <li>OmniSignal™: Global scroll verification</li>
                <li>GhostTrace™ Gen2: Scroll interaction backtrace</li>
            </ul>

            <h3 class="text-xl font-bold mt-10">🛠️ 3. ScrollClaim™ Infrastructure</h3>
            <ul class="list-disc ml-6 space-y-1">
                <li>Set tier access (e.g., Diamond)</li>
                <li>Define royalty logic (10–11%)</li>
                <li>Lock scrolls with PulseGrid™ sync and OmniSignal™</li>
                <li>Deploy via FAA.Zone™ with compliant ZIP bundles</li>
            </ul>

            <h3 class="text-xl font-bold mt-10">📀 4. Data Flow and Claim Lifecycle</h3>
            <ul class="list-decimal ml-6 space-y-1">
                <li>Ingest — content enters VaultMesh™</li>
                <li>Encode — metadata & VaultDNA™ attached</li>
                <li>Wrap — ScrollClaim™ smart-wrapped</li>
                <li>Deploy — FAA.Zone™ push (ZIP, manifest, HTML)</li>
                <li>Sync — PulseGrid™ status & OmniSignal™ locked</li>
                <li>Enforce — Royalties, access & scroll activity logged via GhostTrace™</li>
            </ul>

            <h3 class="text-xl font-bold mt-10">💸 5. Tiering, Royalties, and Compliance</h3>
            <p>All financial values are simulated and for demonstration purposes only. Actual financial operations require secure backend integration.</p>
            <ul class="list-disc ml-6 space-y-1">
                <li>Diamond Tier: 10–11% royalty enforced</li>
                <li>SmartWallet Integration: ScrollClaim™ payments and transfers</li>
                <li>VaultPay™ Tier III: Required for commercial deployments</li>
                <li>Compliance: FAA scroll ID, ClaimRoot™ hash, and royalty schema</li>
            </ul>

            <h3 class="text-xl font-bold mt-10">📡 6. Integration with FAA.Zone™</h3>
            <ul class="list-disc ml-6 space-y-1">
                <li>Native support for /public/diamond/ structure</li>
                <li>ZIP, HTML, Manifest deployment bundles</li>
                <li>ClaimRoot™ timestamp validation</li>
                <li>Seamless PulseGrid™ auto-sync for live claim state</li>
                <li>Brand hosting via vault.faa.zone™</li>
            </ul>

            <h3 class="text-xl font-bold mt-10">🏢 7. Market Segments & Use Cases</h3>
            <ul class="list-disc ml-6 space-y-1">
                <li>GPT Conversations & Expert Threads</li>
                <li>Knowledge/Training Archives</li>
                <li>Creative IP Scrolls (music, literature, visuals)</li>
                <li>GeoSector Deployment Archives</li>
                <li>Enterprise Scroll Logs & Audit Trails</li>
            </ul>

            <h3 class="text-xl font-bold mt-10">💰 8. Revenue Streams & Monetization</h3>
            <ul class="list-disc ml-6 space-y-1">
                <li>Diamond Royalties (10–11%)</li>
                <li>Scroll Packaging Fees</li>
                <li>VaultMesh™ API Subscriptions</li>
                <li>PulseGrid™ and OmniSignal™ Licensing</li>
            </ul>

            <h3 class="text-xl font-bold mt-10 text-ritenest-dark-text">⚖️ 9. Technology Roadmap</h3>
            <ul class="list-disc ml-6 space-y-1">
                <li>Q2 2025: ScrollClaim™ v2.2 with multi-claim staking</li>
                <li>Q3 2025: GhostTrace™ Gen3 with forensic backtrace tooling</li>
                <li>Q4 2025: Autonomous AI Sector Agents</li>
                <li>Q1 2026: Inter-vault Federation</li>
            </ul>

            <h3 class="text-xl font-bold mt-10">🔧 10. Team & Governance</h3>
            <ul class="list-disc ml-6 space-y-1">
                <li>FAA-certified engineers (scroll claimers)</li>
                <li>Scroll Ministers: Compliance + tiering</li>
                <li>Vault Admins: Metadata + ClaimRoot™ enforcement</li>
                <li>HSOMNI9000™ Operators: Diamond-tier execution agents</li>
            </ul>

            <p class="text-sm mt-10">📎 This plan can now be exported as HTML, PDF, or ZIP.</p>
        </div>
    </section>

    <section id="about" class="landing-section py-16 md:py-24 px-6 md:px-12 text-center hidden">
        <div class="max-w-4xl mx-auto">
            <h3 class="text-4xl font-bold mb-8">About RiteNest™</h3>
            <p class="text-lg leading-relaxed mb-6">
                At RiteNest™, we are passionate about the digital preservation and celebration of global rituals and cultural heritage. Our platform provides the tools and community to ensure that ancient traditions thrive in the modern digital age.
            </p>
            <p class="text-lg leading-relaxed">
                We are committed to authenticity, accessibility, and community-driven curation, ensuring that every ritual, story, and artifact is documented with the respect and integrity it deserves. Join us in weaving the digital fabric of human heritage.
            </p>
        </div>
    </section>

    <section id="cta-landing" class="landing-section py-16 md:py-24 px-6 md:px-12 text-center hidden">
        <div class="max-w-3xl mx-auto">
            <h3 class="text-4xl font-extrabold mb-8 leading-tight">
                Ready to Preserve Your Heritage?
            </h3>
            <p class="text-xl mb-10">
                Join the RiteNest™ community today and contribute to the living archive of global rituals and cultural wisdom.
            </p>
            <a href="javascript:void(0)" class="cta-button" onclick="window.showMainSection('ritenest-dashboard-wrapper')">
                Start Documenting Now 🌿
            </a>
        </div>
    </section>

    <!-- RiteNest Dashboard Content (initially visible) -->
    <div id="ritenest-dashboard-wrapper" class="flex flex-grow dashboard-main-content-bg">
        <div class="flex flex-grow dashboard-container">
            <nav class="dashboard-sidebar-bg dashboard-sidebar">
                <h2 class="text-xl font-semibold dashboard-primary-text mb-4">RiteNest Navigation</h2>
                <a href="javascript:void(0)" class="dashboard-sidebar-nav-item active" data-tab="overview" onclick="window.showDashboardSectionTab('overview')">
                    <i class="fas fa-tachometer-alt"></i> Overview
                </a>
                <a href="javascript:void(0)" class="dashboard-sidebar-nav-item" data-tab="documentation-progress" onclick="window.showDashboardSectionTab('documentation-progress')">
                    <i class="fas fa-tasks"></i> Documentation Progress
                </a>
                <a href="javascript:void(0)" class="dashboard-sidebar-nav-item" data-tab="totemtrack" onclick="window.showDashboardSectionTab('totemtrack')">
                    <i class="fas fa-map-marker-alt"></i> TotemTrack
                </a>
                <a href="javascript:void(0)" class="dashboard-sidebar-nav-item" data-tab="vaultspirit" onclick="window.showDashboardSectionTab('vaultspirit')">
                    <i class="fas fa-cloud-upload-alt"></i> VaultSpirit
                </a>
                <a href="javascript:void(0)" class="dashboard-sidebar-nav-item" data-tab="glyphtag" onclick="window.showDashboardSectionTab('glyphtag')">
                    <i class="fas fa-fingerprint"></i> GlyphTag
                </a>
                <a href="javascript:void(0)" class="dashboard-sidebar-nav-item" data-tab="scrollloop" onclick="window.showDashboardSectionTab('scrollloop')">
                    <i class="fas fa-comments"></i> ScrollLoop
                </a>
                <div class="w-full h-px bg-gray-300 my-2"></div>
                <a href="javascript:void(0)" class="dashboard-sidebar-nav-item" data-tab="analytics" onclick="window.showDashboardSectionTab('analytics')">
                    <i class="fas fa-chart-pie"></i> Analytics
                </a>
                <a href="javascript:void(0)" class="dashboard-sidebar-nav-item" data-tab="admin-panel" onclick="window.showDashboardSectionTab('admin-panel')">
                    <i class="fas fa-users-cog"></i> Admin Panel
                </a>
                <a href="javascript:void(0)" class="dashboard-sidebar-nav-item" data-tab="ai-gemini" onclick="window.showDashboardSectionTab('ai-gemini')">
                    <i class="fas fa-robot"></i> AI Gemini
                </a>
                <a href="javascript:void(0)" class="dashboard-sidebar-nav-item" data-tab="settings" onclick="window.showDashboardSectionTab('settings')">
                    <i class="fas fa-cog"></i> Settings
                </a>
            </nav>

            <main class="flex-grow p-8 dashboard-main-content-bg overflow-y-auto dashboard-main-content">
                <!-- Dashboard Sections (Content for each tab) -->

                <!-- 1. Overview Section (Dashboard) -->
                <section id="overview" class="tab-content active">
                    <section class="text-center mb-12">
                        <h2 class="text-5xl font-extrabold mb-6 brand-heading">
                            RiteNest™ Dashboard Overview
                        </h2>
                        <p class="text-xl dashboard-muted-text max-w-2xl mx-auto">
                            A quick glance at your RiteNest™ activities and key metrics.
                        </p>
                    </section>

                    <!-- Dashboard Overview Metrics -->
                    <section class="mb-12">
                        <h3 class="text-3xl font-bold text-center mb-8 brand-heading">Overview Metrics</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                            <div class="dashboard-card p-6 rounded-lg shadow-md flex flex-col items-center justify-center">
                                <i class="fas fa-book-open text-5xl text-accent mb-4"></i>
                                <p class="dashboard-muted-text text-lg">Total Rituals Documented</p>
                                <p class="text-5xl font-bold text-accent" id="totalRitualsCount">0</p>
                            </div>
                            <div class="dashboard-card p-6 rounded-lg shadow-md flex flex-col items-center justify-center">
                                <i class="fas fa-users text-5xl text-accent mb-4"></i>
                                <p class="dashboard-muted-text text-lg">Active Contributors</p>
                                <p class="text-5xl font-bold text-accent" id="activeContributorsCount">0</p>
                            </div>
                            <div class="dashboard-card p-6 rounded-lg shadow-md flex flex-col items-center justify-center">
                                <i class="fas fa-sd-card text-5xl text-accent mb-4"></i>
                                <p class="dashboard-muted-text text-lg">Storage Used (GB)</p>
                                <p class="text-5xl font-bold text-accent" id="storageUsed">0</p>
                            </div>
                        </div>
                    </section>

                    <!-- Quick Actions & Featured Ritual -->
                    <section class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12">
                        <div class="dashboard-card p-8 rounded-lg shadow-md">
                            <h3 class="text-3xl font-bold mb-6 brand-heading">Quick Actions</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <button class="primary-btn px-6 py-3 rounded-lg text-lg font-semibold flex items-center justify-center space-x-2" onclick="window.showDashboardSectionTab('documentation-progress');">
                                    <i class="fas fa-plus-circle"></i> <span>Document New Ritual</span>
                                </button>
                                <button class="primary-btn px-6 py-3 rounded-lg text-lg font-semibold flex items-center justify-center space-x-2" onclick="window.showDashboardSectionTab('documentation-progress');">
                                    <i class="fas fa-list-alt"></i> <span>View All Rituals</span>
                                </button>
                                <button class="primary-btn px-6 py-3 rounded-lg text-lg font-semibold flex items-center justify-center space-x-2" onclick="window.showDashboardSectionTab('scrollloop');">
                                    <i class="fas fa-users-cog"></i> <span>Manage Community</span>
                                </button>
                                <button class="primary-btn px-6 py-3 rounded-lg text-lg font-semibold flex items-center justify-center space-x-2" onclick="window.showDashboardSectionTab('glyphtag');">
                                    <i class="fas fa-check-double"></i> <span>Verify Rituals</span>
                                </button>
                            </div>
                        </div>

                        <div class="dashboard-card p-8 rounded-lg shadow-md">
                            <h3 class="text-3xl font-bold mb-6 brand-heading">Ritual Spotlight: The Rain Dance of the Ancestors</h3>
                            <img src="https://placehold.co/600x300/065f46/d1fae5?text=Featured+Ritual+Image" alt="Featured Ritual" class="w-full h-48 object-cover rounded-lg mb-4 shadow-inner">
                            <p class="dashboard-muted-text mb-4">
                                A powerful ceremonial practice from the Xhosa people, performed to invoke rain and ensure bountiful harvests. Documented with intricate details, elder interviews, and historical context.
                            </p>
                            <button class="primary-btn px-6 py-3 rounded-lg text-lg font-semibold" onclick="window.showMessage('Simulating: Viewing full details of the Rain Dance ritual.')">
                                View Full Ritual Details
                            </button>
                        </div>
                    </section>

                    <!-- Data Visualizations -->
                    <section class="mb-12">
                        <h3 class="text-3xl font-bold text-center mb-8 brand-heading">Ritual Data Insights</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <div class="dashboard-card p-6 rounded-lg shadow-md flex flex-col items-center">
                                <h4 class="text-xl font-bold dashboard-dark-text mb-4">Ritual Type Distribution</h4>
                                <div class="w-full h-64 relative">
                                    <canvas id="ritualTypeChart"></canvas>
                                </div>
                            </div>
                            <div class="dashboard-card p-6 rounded-lg shadow-md flex flex-col items-center">
                                <h4 class="text-xl font-bold dashboard-dark-text mb-4">Documentation Progress</h4>
                                <div class="w-full h-64 relative">
                                    <canvas id="documentationProgressChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Developer's Note for Overview -->
                    <section class="text-center bg-gray-100 p-8 rounded-lg shadow-md">
                        <h3 class="text-3xl font-bold mb-4 dashboard-dark-text">Developer's Note: Overview</h3>
                        <p class="dashboard-muted-text">
                            This "Overview" section provides a high-level summary of RiteNest™.
                            Ensure metrics and charts reflect real-time data from your Firestore collections.
                        </p>
                        <ul class="list-disc list-inside text-left inline-block mt-4 dashboard-muted-text">
                            <li><strong>Metrics:</strong> Connect `totalRitualsCount`, `activeContributorsCount`, and `storageUsed` to actual data sources.</li>
                            <li><strong>Charts:</strong> Ensure `ritualTypeChart` and `documentationProgressChart` accurately visualize data from your ritual records.</li>
                            <li><strong>Quick Actions:</strong> Implement the `onclick` functions to smoothly transition to the relevant sections within this dashboard.</li>
                        </ul>
                    </section>
                </section>

                <!-- 2. Documentation Progress Section -->
                <section id="documentation-progress" class="tab-content">
                    <section class="text-center mb-12">
                        <h2 class="text-5xl font-extrabold mb-6 brand-heading">
                            Documentation Progress Overview
                        </h2>
                        <p class="text-xl dashboard-muted-text max-w-2xl mx-auto">
                            Monitor the status of all rituals being documented, from initial entry to final verification.
                        </p>
                    </section>

                    <!-- Progress Metrics -->
                    <section class="mb-12 grid grid-cols-1 md:grid-cols-3 gap-8">
                        <div class="dashboard-card p-6 rounded-lg shadow-md flex flex-col items-center justify-center">
                            <i class="fas fa-tasks text-5xl text-accent mb-4"></i>
                            <p class="text-gray-600 text-lg">Total Entries</p>
                            <p class="text-5xl font-bold text-accent" id="docProgressTotalEntries">0</p>
                        </div>
                        <div class="dashboard-card p-6 rounded-lg shadow-md flex flex-col items-center justify-center">
                            <i class="fas fa-hourglass-half text-5xl text-accent mb-4"></i>
                            <p class="text-gray-600 text-lg">In Progress</p>
                            <p class="text-5xl font-bold text-accent" id="docProgressInProgress">0</p>
                        </div>
                        <div class="dashboard-card p-6 rounded-lg shadow-md flex flex-col items-center justify-center">
                            <i class="fas fa-check-circle text-5xl text-accent mb-4"></i>
                            <p class="text-gray-600 text-lg">Completed & Verified</p>
                            <p class="text-5xl font-bold text-accent" id="docProgressCompletedVerified">0</p>
                        </div>
                    </section>

                    <!-- Detailed Progress Table (Placeholder) -->
                    <section class="mb-12 card-bg p-8 rounded-lg shadow-md">
                        <h3 class="text-3xl font-bold mb-6 brand-heading">Detailed Ritual Progress</h3>
                        <div class="overflow-x-auto">
                            <table class="min-w-full bg-white rounded-lg shadow-inner">
                                <thead>
                                    <tr class="bg-gray-200 text-gray-700 uppercase text-sm leading-normal">
                                        <th class="py-3 px-6 text-left">Ritual Name</th>
                                        <th class="py-3 px-6 text-left">Type</th>
                                        <th class="py-3 px-6 text-left">Status</th>
                                        <th class="py-3 px-6 text-left">Last Updated</th>
                                        <th class="py-3 px-6 text-center">Actions</th>
                                    </tr>
                                </thead>
                                <tbody class="text-gray-600 text-sm font-light" id="docProgressTableBody">
                                    <!-- Data will be dynamically loaded here -->
                                    <tr>
                                        <td class="py-3 px-6 text-left whitespace-nowrap">Rain Dance of the Ancestors</td>
                                        <td class="py-3 px-6 text-left">Ceremony</td>
                                        <td class="py-3 px-6 text-left"><span class="bg-green-200 text-green-800 py-1 px-3 rounded-full text-xs">Verified</span></td>
                                        <td class="py-3 px-6 text-left">2024-06-15</td>
                                        <td class="py-3 px-6 text-center">
                                            <button class="text-blue-500 hover:text-blue-700 text-sm" onclick="window.showMessage('Simulating view details for Rain Dance of the Ancestors')">View</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="py-3 px-6 text-left whitespace-nowrap">Oral History: Elder Thabo</td>
                                        <td class="py-3 px-6 text-left">Oral History</td>
                                        <td class="py-3 px-6 text-left"><span class="bg-yellow-200 text-yellow-800 py-1 px-3 rounded-full text-xs">In Progress</span></td>
                                        <td class="py-3 px-6 text-left">2024-07-01</td>
                                        <td class="py-3 px-6 text-center">
                                            <button class="text-blue-500 hover:text-blue-700 text-sm" onclick="window.showMessage('Simulating edit for Oral History: Elder Thabo')">Edit</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="py-3 px-6 text-left whitespace-nowrap">Artifact: Ancient Drum</td>
                                        <td class="py-3 px-6 text-left">Artifact Description</td>
                                        <td class="py-3 px-6 text-left"><span class="bg-red-200 text-red-800 py-1 px-3 rounded-full text-xs">Pending Review</span></td>
                                        <td class="py-3 px-6 text-left">2024-06-28</td>
                                        <td class="py-3 px-6 text-center">
                                            <button class="text-blue-500 hover:text-blue-700 text-sm" onclick="window.showMessage('Simulating review for Artifact: Ancient Drum')">Review</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </section>

                    <!-- Progress Charts -->
                    <section class="mb-12">
                        <h3 class="text-3xl font-bold text-center mb-8 brand-heading">Visual Progress</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <div class="card-bg p-6 rounded-lg shadow-md flex flex-col items-center">
                                <h4 class="text-xl font-bold text-gray-800 mb-4">Overall Documentation Status</h4>
                                <div class="w-full h-64 relative">
                                    <canvas id="overallStatusChart"></canvas>
                                </div>
                            </div>
                            <div class="card-bg p-6 rounded-lg shadow-md flex flex-col items-center">
                                <h4 class="text-xl font-bold text-gray-800 mb-4">Monthly Documentation Rate</h4>
                                <div class="w-full h-64 relative">
                                    <canvas id="monthlyRateChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </section>

                    <section class="text-center bg-gray-100 p-8 rounded-lg shadow-md">
                        <h3 class="text-3xl font-bold mb-4 text-gray-800">Developer's Note</h3>
                        <p class="text-gray-600">
                            This page is dedicated to tracking the documentation progress within RiteNest™.
                            Your task is to integrate real data from Firestore to populate the metrics, table, and charts.
                        </p>
                        <ul class="list-disc list-inside text-left inline-block mt-4 text-gray-600">
                            <li><strong>Metrics:</strong> Fetch counts of rituals by their status (e.g., 'total', 'in progress', 'completed', 'verified').</li>
                            <li><strong>Table:</strong> Populate the "Detailed Ritual Progress" table with actual ritual data, including dynamic action buttons (View, Edit, Review) that link to individual ritual detail pages.</li>
                            <li><strong>Charts:</strong> Ensure `overallStatusChart` and `monthlyRateChart` accurately reflect the fetched data, updating dynamically as new rituals are added or their statuses change.</li>
                            <li>Consider adding filtering and sorting options to the table.</li>
                        </ul>
                    </section>
                </section>

                <!-- 3. TotemTrack Section -->
                <section id="totemtrack" class="tab-content">
                    <section class="text-center mb-12">
                        <h2 class="text-5xl font-extrabold mb-6 brand-heading">
                            TotemTrack: Safeguarding Your Heritage
                        </h2>
                        <p class="text-xl dashboard-muted-text max-w-2xl mx-auto">
                            TotemTrack provides a secure platform for documenting, tracking, and verifying the lineage and significance of ancestral totems and sacred objects.
                        </p>
                    </section>

                    <!-- Totem Management Features -->
                    <section class="mb-12 grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div class="dashboard-card p-8 rounded-lg shadow-md">
                            <h3 class="text-3xl font-bold mb-6 brand-heading">Add New Totem Record</h3>
                            <form id="addTotemForm" class="space-y-4">
                                <div>
                                    <label for="totemName" class="block text-gray-700 font-semibold mb-2">Totem Name/Identifier</label>
                                    <input type="text" id="totemName" class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-accent" placeholder="e.g., Lion Clan Totem, Sacred Calabash" required>
                                </div>
                                <div>
                                    <label for="totemDescription" class="block text-gray-700 font-semibold mb-2">Description & Significance</label>
                                    <textarea id="totemDescription" class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-accent h-32" placeholder="Describe its history, cultural significance, and any associated rituals."></textarea>
                                </div>
                                <div>
                                    <label for="totemOrigin" class="block text-gray-700 font-semibold mb-2">Origin/Associated Clan</label>
                                    <input type="text" id="totemOrigin" class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-accent" placeholder="e.g., Zulu, Xhosa, specific family lineage">
                                </div>
                                <div>
                                    <label for="totemImage" class="block text-gray-700 font-semibold mb-2">Upload Image (Simulated)</label>
                                    <input type="file" id="totemImage" accept="image/*" class="w-full p-3 rounded-lg border border-gray-300">
                                </div>
                                <button type="submit" class="primary-btn px-6 py-3 rounded-lg text-lg font-semibold w-full" onclick="window.showMessage('Simulating: Totem record added. In a real app, this would save to Firestore.')">
                                    <i class="fas fa-plus-circle mr-2"></i> Add Totem Record
                                </button>
                            </form>
                        </div>

                        <div class="dashboard-card p-8 rounded-lg shadow-md">
                            <h3 class="text-3xl font-bold mb-6 brand-heading">Your Documented Totems</h3>
                            <div id="totemList" class="space-y-4 max-h-96 overflow-y-auto">
                                <!-- Sample Totem Cards -->
                                <div class="subnode-card p-4 rounded-lg flex items-center justify-between">
                                    <div>
                                        <p class="font-semibold text-gray-800">Elephant Clan Totem</p>
                                        <p class="text-gray-600 text-sm">Associated with strength and wisdom.</p>
                                    </div>
                                    <button class="primary-btn px-4 py-2 rounded-md text-sm" onclick="window.showMessage('Simulating: Viewing details for Elephant Clan Totem.')">View Details</button>
                                </div>
                                <div class="subnode-card p-4 rounded-lg flex items-center justify-between">
                                    <div>
                                        <p class="font-semibold text-gray-800">Sacred Healing Staff</p>
                                        <p class="text-gray-600 text-sm">Passed down through generations of healers.</p>
                                    </div>
                                    <button class="primary-btn px-4 py-2 rounded-md text-sm" onclick="window.showMessage('Simulating: Viewing details for Sacred Healing Staff.')">View Details</button>
                                </div>
                                <div class="subnode-card p-4 rounded-lg flex items-center justify-between">
                                    <div>
                                        <p class="font-semibold text-gray-800">Ancestral Mask of Protection</p>
                                        <p class="text-gray-600 text-sm">Used in ceremonial dances.</p>
                                    </div>
                                    <button class="primary-btn px-4 py-2 rounded-md text-sm" onclick="window.showMessage('Simulating: Viewing details for Ancestral Mask of Protection.')">View Details</button>
                                </div>
                                <!-- End Sample Totem Cards -->
                            </div>
                            <button class="primary-btn px-6 py-3 rounded-lg text-lg font-semibold w-full mt-6" onclick="window.showMessage('Simulating: Searching all totem records.')">
                                <i class="fas fa-search mr-2"></i> Search All Totems
                            </button>
                        </div>
                    </section>

                    <section class="text-center bg-gray-100 p-8 rounded-lg shadow-md">
                        <h3 class="text-3xl font-bold mb-4 text-gray-800">Developer's Note</h3>
                        <p class="text-gray-600">
                            This `totemtrack.html` page is for managing ancestral totem records.
                            Your primary task here is to implement the backend integration and dynamic rendering.
                        </p>
                        <ul class="list-disc list-inside text-left inline-block mt-4 text-gray-600">
                            <li><strong>Form Submission:</strong> Implement the logic to capture form data and save it to a Firestore collection (e.g., `artifacts/{appId}/users/{userId}/totems`).</li>
                            <li><strong>Dynamic List:</strong> Fetch and display actual totem records from Firestore in the "Your Documented Totems" section. Ensure real-time updates using `onSnapshot`.</li>
                            <li><strong>Image Upload:</strong> For real image uploads, you'd need Firebase Storage or a similar service. The current `input type="file"` is a placeholder.</li>
                            <li><strong>Search Functionality:</strong> Implement client-side or Firestore-based searching for totem records.</li>
                            <li>Consider adding edit/delete functionality for each totem record.</li>
                        </ul>
                    </section>
                </section>

                <!-- 4. VaultSpirit Section -->
                <section id="vaultspirit" class="tab-content">
                    <section class="text-center mb-12">
                        <h2 class="text-5xl font-extrabold mb-6 brand-heading">
                            VaultSpirit: Preserving the Immaterial
                        </h2>
                        <p class="text-xl dashboard-muted-text max-w-2xl mx-auto">
                            VaultSpirit offers secure, high-fidelity storage solutions for audio recordings of oral histories, ceremonial music, ritual videos, and sacred imagery, ensuring their longevity and authenticity.
                        </p>
                    </section>

                    <!-- Upload & Manage Features -->
                    <section class="mb-12 grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div class="card-bg p-8 rounded-lg shadow-md">
                            <h3 class="text-3xl font-bold mb-6 brand-heading">Upload New Media</h3>
                            <form id="uploadMediaForm" class="space-y-4">
                                <div>
                                    <label for="mediaTitle" class="block text-gray-700 font-semibold mb-2">Media Title</label>
                                    <input type="text" id="mediaTitle" class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-accent" placeholder="e.g., Ancestral Chant, Rain Dance Video" required>
                                </div>
                                <div>
                                    <label for="mediaType" class="block text-gray-700 font-semibold mb-2">Media Type</label>
                                    <select id="mediaType" class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-accent" required>
                                        <option value="">Select Type</option>
                                        <option value="Audio">Audio (Oral History, Music)</option>
                                        <option value="Video">Video (Ceremony, Performance)</option>
                                        <option value="Image">Image (Artifact, Sacred Site)</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="mediaDescription" class="block text-gray-700 font-semibold mb-2">Description</label>
                                    <textarea id="mediaDescription" class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-accent h-24" placeholder="Briefly describe the content and its context."></textarea>
                                </div>
                                <div>
                                    <label for="mediaFile" class="block text-gray-700 font-semibold mb-2">Select File (Simulated Upload)</label>
                                    <input type="file" id="mediaFile" class="w-full p-3 rounded-lg border border-gray-300" required>
                                </div>
                                <button type="submit" class="primary-btn px-6 py-3 rounded-lg text-lg font-semibold w-full" onclick="window.showMessage('Simulating: Media uploaded. In a real app, this would use Firebase Storage.')">
                                    <i class="fas fa-upload mr-2"></i> Upload to Vault
                                </button>
                            </form>
                        </div>

                        <div class="dashboard-card p-8 rounded-lg shadow-md">
                            <h3 class="text-3xl font-bold mb-6 brand-heading">Your Vaulted Media</h3>
                            <div id="mediaList" class="space-y-4 max-h-96 overflow-y-auto">
                                <!-- Sample Media Cards -->
                                <div class="subnode-card p-4 rounded-lg flex items-center justify-between">
                                    <div>
                                        <p class="font-semibold text-gray-800">Zulu Wedding Ceremony (Video)</p>
                                        <p class="text-gray-600 text-sm">Recorded 2023-09-10.</p>
                                    </div>
                                    <button class="primary-btn px-4 py-2 rounded-md text-sm" onclick="window.showMessage('Simulating: Playing Zulu Wedding Ceremony video.')">Play/View</button>
                                </div>
                                <div class="subnode-card p-4 rounded-lg flex items-center justify-between">
                                    <div>
                                        <p class="font-semibold text-gray-800">San Bushman Storytelling (Audio)</p>
                                        <p class="text-gray-600 text-sm">Oral history from 1980s.</p>
                                    </div>
                                    <button class="primary-btn px-4 py-2 rounded-md text-sm" onclick="window.showMessage('Simulating: Playing San Bushman Storytelling audio.')">Play/View</button>
                                </div>
                                <div class="subnode-card p-4 rounded-lg flex items-center justify-between">
                                    <div>
                                        <p class="font-semibold text-gray-800">Sacred Ndebele Patterns (Image)</p>
                                        <p class="text-gray-600 text-sm">Detailed imagery of traditional art.</p>
                                    </div>
                                    <button class="primary-btn px-4 py-2 rounded-md text-sm" onclick="window.showMessage('Simulating: Viewing Ndebele Patterns image.')">Play/View</button>
                                </div>
                                <!-- End Sample Media Cards -->
                            </div>
                            <button class="primary-btn px-6 py-3 rounded-lg text-lg font-semibold w-full mt-6" onclick="window.showMessage('Simulating: Searching all vaulted media.')">
                                <i class="fas fa-search mr-2"></i> Search Vault
                            </button>
                        </div>
                    </section>

                    <section class="text-center bg-gray-100 p-8 rounded-lg shadow-md">
                        <h3 class="text-3xl font-bold mb-4 text-gray-800">Developer's Note</h3>
                        <p class="text-gray-600">
                            This `vaultspirit.html` page is for managing multimedia and oral history records.
                            The core functionality here involves secure file storage and retrieval.
                        </p>
                        <ul class="list-disc list-inside text-left inline-block mt-4 text-gray-600">
                            <li><strong>File Upload:</strong> Implement actual file upload to Firebase Storage, ensuring proper MIME types and security rules.</li>
                            <li><strong>Metadata Storage:</strong> Save media metadata (title, type, description, storage URL) to Firestore.</li>
                            <li><strong>Dynamic List:</strong> Fetch and display media records from Firestore, allowing users to view/play content.</li>
                            <li>Consider adding features like media categorization, tagging, and sharing options.</li>
                            <li>For large files, implement progress indicators during upload.</li>
                        </ul>
                    </section>
                </section>

                <!-- 5. GlyphTag Section -->
                <section id="glyphtag" class="tab-content">
                    <section class="text-center mb-12">
                        <h2 class="text-5xl font-extrabold mb-6 brand-heading">
                            GlyphTag: Immutability & Trust
                        </h2>
                        <p class="text-xl dashboard-muted-text max-w-2xl mx-auto">
                            GlyphTag creates an unalterable digital fingerprint for every piece of ritual content, ensuring its authenticity, origin, and history are transparent and verifiable.
                        </p>
                    </section>

                    <!-- Provenance Verification & Tagging -->
                    <section class="mb-12 grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <div class="card-bg p-8 rounded-lg shadow-md">
                            <h3 class="text-3xl font-bold mb-6 brand-heading">Verify Provenance</h3>
                            <form id="verifyProvenanceForm" class="space-y-4">
                                <div>
                                    <label for="provenanceHash" class="block text-gray-700 font-semibold mb-2">Provenance Hash</label>
                                    <input type="text" id="provenanceHash" class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-accent" placeholder="e.g., 0xabcdef1234567890abcdef1234567890" required>
                                </div>
                                <button type="submit" class="primary-btn px-6 py-3 rounded-lg text-lg font-semibold w-full" onclick="window.showMessage('Simulating: Verifying hash on the blockchain.')">
                                    <i class="fas fa-search mr-2"></i> Verify Hash
                                </button>
                            </form>
                            <div class="mt-8 p-6 bg-gray-100 rounded-lg text-gray-700">
                                <h4 class="text-xl font-bold mb-3">Verification Result:</h4>
                                <p id="verificationResult" class="italic">Enter a hash and click "Verify" to see its provenance chain.</p>
                            </div>
                        </div>

                        <div class="card-bg p-8 rounded-lg shadow-md">
                            <h3 class="text-3xl font-bold mb-6 brand-heading">Generate New GlyphTag</h3>
                            <form id="generateGlyphTagForm" class="space-y-4">
                                <div>
                                    <label for="contentIdToTag" class="block text-gray-700 font-semibold mb-2">Content ID to Tag</label>
                                    <input type="text" id="contentIdToTag" class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-accent" placeholder="e.g., ritual-ID-001, media-ID-005" required>
                                </div>
                                <div>
                                    <label for="taggingDescription" class="block text-gray-700 font-semibold mb-2">Tagging Event Description</label>
                                    <textarea id="taggingDescription" class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-accent h-24" placeholder="e.g., Initial documentation, Elder verification, Multimedia attachment."></textarea>
                                </div>
                                <button type="submit" class="primary-btn px-6 py-3 rounded-lg text-lg font-semibold w-full" onclick="window.showMessage('Simulating: Generating new provenance hash for content.')">
                                    <i class="fas fa-tags mr-2"></i> Generate GlyphTag
                                </button>
                            </form>
                            <div class="mt-8 p-6 bg-gray-100 rounded-lg text-gray-700">
                                <h4 class="text-xl font-bold mb-3">Generated Hash:</h4>
                                <p id="generatedHash" class="break-all italic">New GlyphTag will appear here.</p>
                            </div>
                        </div>
                    </section>

                    <!-- Provenance Chain Visualization (Conceptual) -->
                    <section class="mb-12 card-bg p-8 rounded-lg shadow-md">
                        <h3 class="text-3xl font-bold mb-6 brand-heading">Example Provenance Chain</h3>
                        <div id="provenanceChainDisplay" class="space-y-6">
                            <div class="provenance-step">
                                <p class="font-semibold text-gray-800">Step 1: Original Oral History Recorded</p>
                                <p class="text-gray-600 text-sm">Timestamp: 2023-01-15 10:30 SAST</p>
                                <p class="text-gray-600 text-xs mt-1">Hash: <code>0xabc123...</code></p>
                            </div>
                            <div class="provenance-step">
                                <p class="font-semibold text-gray-800">Step 2: Transcription & Initial Tagging</p>
                                <p class="text-gray-600 text-sm">Timestamp: 2023-01-20 14:00 SAST</p>
                                <p class="text-gray-600 text-xs mt-1">Hash: <code>0xdef456...</code></p>
                            </div>
                            <div class="provenance-step">
                                <p class="font-semibold text-gray-800">Step 3: Elder Verification & Approval</p>
                                <p class="text-gray-600 text-sm">Timestamp: 2023-02-01 09:00 SAST</p>
                                <p class="text-gray-600 text-xs mt-1">Hash: <code>0xghi789...</code></p>
                            </div>
                            <div class="provenance-step">
                                <p class="font-semibold text-gray-800">Step 4: Linked to RiteNest™ VaultMesh</p>
                                <p class="text-gray-600 text-sm">Timestamp: 2023-02-05 11:45 SAST</p>
                                <p class="text-gray-600 text-xs mt-1">Hash: <code>0xjkl012...</code></p>
                            </div>
                        </div>
                    </section>

                    <section class="text-center bg-gray-100 p-8 rounded-lg shadow-md">
                        <h3 class="text-3xl font-bold mb-4 text-gray-800">Developer's Note</h3>
                        <p class="text-gray-600">
                            This `glyphtag.html` page is critical for ensuring the authenticity and immutability of ritual data.
                            The core functionality here involves cryptographic hashing and potentially blockchain interaction.
                        </p>
                        <ul class="list-disc list-inside text-left inline-block mt-4 text-gray-600">
                            <li><strong>Hash Verification:</strong> Implement a function to take a hash and simulate its verification against a ledger (e.g., by checking if it exists in a Firestore collection of "verified hashes").</li>
                            <li><strong>Hash Generation:</strong> Create a function that, given content data (e.g., a ritual's text, or a media file's metadata), generates a unique cryptographic hash (e.g., SHA-256).</li>
                            <li><strong>Blockchain Simulation:</strong> For a real "VaultMesh" integration, this would involve interacting with a blockchain API to record hashes as transactions. For a demo, you can simulate this by storing hashes in Firestore.</li>
                            <li>Consider adding a visual representation of the provenance chain for a given content ID.</li>
                        </ul>
                    </section>
                </section>

                <!-- 6. ScrollLoop Section -->
                <section id="scrollloop" class="tab-content">
                    <section class="text-center mb-12">
                        <h2 class="text-5xl font-extrabold mb-6 brand-heading">
                            ScrollLoop: The Living Tradition
                        </h2>
                        <p class="text-xl dashboard-muted-text max-w-2xl mx-auto">
                            ScrollLoop fosters a vibrant community where users can discuss, share insights, and contribute to the ongoing evolution and understanding of ritual practices.
                        </p>
                    </section>

                    <!-- Community Forum / Discussion Board -->
                    <section class="mb-12 card-bg p-8 rounded-lg shadow-md">
                        <h3 class="text-3xl font-bold mb-6 brand-heading">Community Discussions</h3>
                        
                        <!-- New Post Form -->
                        <div class="mb-8 p-6 bg-gray-100 rounded-lg shadow-inner">
                            <h4 class="text-2xl font-bold text-gray-800 mb-4">Start a New Discussion</h4>
                            <form id="newDiscussionForm" class="space-y-4">
                                <div>
                                    <label for="postTitle" class="block text-gray-700 font-semibold mb-2">Discussion Title</label>
                                    <input type="text" id="postTitle" class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-accent" placeholder="e.g., Interpreting the Symbolism of the Sun Dance" required>
                                </div>
                                <div>
                                    <label for="postContent" class="block text-gray-700 font-semibold mb-2">Your Post</label>
                                    <textarea id="postContent" class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-accent h-32" placeholder="Share your thoughts, questions, or insights here..."></textarea>
                                </div>
                                <button type="submit" class="primary-btn px-6 py-3 rounded-lg text-lg font-semibold w-full" onclick="window.showMessage('Simulating: New discussion post created.')">
                                    <i class="fas fa-comments mr-2"></i> Post Discussion
                                </button>
                            </form>
                        </div>

                        <!-- Existing Posts -->
                        <div id="discussionPosts" class="space-y-6">
                            <!-- Sample Discussion Posts -->
                            <div class="discussion-post">
                                <h4 class="text-xl font-bold text-gray-800 mb-2">The Role of Water in Cleansing Rituals</h4>
                                <p class="text-gray-700 text-sm mb-3">By: CommunityMember123 - 2 hours ago</p>
                                <p class="text-gray-600">
                                    "I've been researching the use of water in various African cleansing ceremonies. It seems to symbolize purity and renewal across many cultures. Does anyone have insights into specific regional variations or historical contexts?"
                                </p>
                                <div class="mt-4 text-right">
                                    <button class="primary-btn px-4 py-2 rounded-md text-sm mr-4" onclick="window.showMessage('Simulating: Viewing comments.')">View Comments (5)</button>
                                    <button class="primary-btn px-4 py-2 rounded-md text-sm" onclick="window.showMessage('Simulating: Liking post.')"><i class="fas fa-thumbs-up"></i> 15</button>
                                </div>
                            </div>
                            <div class="discussion-post">
                                <h4 class="text-xl font-bold text-gray-800 mb-2">Challenges in Documenting Oral Traditions</h4>
                                <p class="text-gray-700 text-sm mb-3">By: HeritagePreserver - yesterday</p>
                                <p class="text-gray-600">
                                    "What are the best practices for accurately capturing and transcribing oral histories, especially when dealing with multiple dialects or nuanced storytelling? Any tools or methodologies recommended?"
                                </p>
                                <div class="mt-4 text-right">
                                    <button class="primary-btn px-4 py-2 rounded-md text-sm mr-4" onclick="window.showMessage('Simulating: Viewing comments.')">View Comments (8)</button>
                                    <button class="primary-btn px-4 py-2 rounded-md text-sm" onclick="window.showMessage('Simulating: Liking post.')"><i class="fas fa-thumbs-up"></i> 22</button>
                                </div>
                            </div>
                            <!-- End Sample Discussion Posts -->
                        </div>
                    </section>

                    <!-- Educational Resources & Workshops -->
                    <section class="mb-12 card-bg p-8 rounded-lg shadow-md">
                        <h3 class="text-3xl font-bold mb-6 brand-heading">Learning Resources & Workshops</h3>
                        <div id="learningResources" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="subnode-card p-4 rounded-lg">
                                <h4 class="text-xl font-bold text-gray-800 mb-2">Webinar: Digital Ethics in Heritage Preservation</h4>
                                <p class="text-gray-600 text-sm mb-3">Date: 2024-07-20 | Speaker: Dr. Naledi Mokoena</p>
                                <p class="text-gray-600">Explore the ethical considerations of digitizing indigenous knowledge.</p>
                                <button class="primary-btn px-4 py-2 rounded-md text-sm mt-4" onclick="window.showMessage('Simulating: Registering for webinar.')">Register Now</button>
                            </div>
                            <div class="subnode-card p-4 rounded-lg">
                                <h4 class="text-xl font-bold text-gray-800 mb-2">Guide: Understanding Ancestral Lineage</h4>
                                <p class="text-gray-600 text-sm mb-3">Format: PDF | Author: RiteNest Team</p>
                                <p class="text-gray-600">A comprehensive guide to researching and tracing your family\'s heritage.</p>
                                <button class="primary-btn px-4 py-2 rounded-md text-sm mt-4" onclick="window.showMessage('Simulating: Downloading guide.')">Download Guide</button>
                            </div>
                        </div>
                    </section>

                    <section class="text-center bg-gray-100 p-8 rounded-lg shadow-md">
                        <h3 class="text-3xl font-bold mb-4 text-gray-800">Developer's Note</h3>
                        <p class="text-gray-600">
                            This `scrollloop.html` page is for fostering community engagement and providing educational resources.
                            Key functionalities include forum management and content delivery.
                        </p>
                        <ul class="list-disc list-inside text-left inline-block mt-4 text-gray-600">
                            <li><strong>Discussion Board:</strong> Implement functionality to post new discussions and display existing ones from Firestore (e.g., `artifacts/{appId}/users/{userId}/discussions`).</li>
                            <li><strong>User Interaction:</strong> Add features for comments, likes, and replies to discussion posts.</li>
                            <li><strong>Resource Management:</strong> Integrate a system to manage and link to educational resources (e.g., PDFs, external webinars).</li>
                            <li>Consider using Gemini AI for content moderation or to summarize long discussion threads.</li>
                        </ul>
                    </section>
                </section>

                <!-- 7. Analytics Section (Dashboard) -->
                <section id="analytics" class="tab-content">
                    <section class="text-center mb-12">
                        <h2 class="text-5xl font-extrabold mb-6 brand-heading">
                            RiteNest™ Analytics
                        </h2>
                        <p class="text-xl dashboard-muted-text max-w-2xl mx-auto">
                            Gain insights into ritual documentation, content popularity, and community engagement within RiteNest™.
                        </p>
                    </section>

                    <!-- Analytics Charts -->
                    <section class="mb-12 grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div class="dashboard-card p-6 rounded-lg shadow-md flex flex-col items-center">
                            <h4 class="text-xl font-bold dashboard-dark-text mb-4">Ritual Type Popularity</h4>
                            <div class="w-full h-64 relative">
                                <canvas id="analyticsRitualTypeChart"></canvas>
                            </div>
                        </div>
                        <div class="dashboard-card p-6 rounded-lg shadow-md flex flex-col items-center">
                            <h4 class="text-xl font-bold dashboard-dark-text mb-4">Contributor Activity Trends</h4>
                            <div class="w-full h-64 relative">
                                <canvas id="contributorActivityChart"></canvas>
                            </div>
                        </div>
                    </section>

                    <section class="text-center bg-gray-100 p-8 rounded-lg shadow-md">
                        <h3 class="text-3xl font-bold mb-4 dashboard-dark-text">Developer's Note: Analytics</h3>
                        <p class="dashboard-muted-text">
                            This section is for displaying analytical insights related to RiteNest™ usage.
                            Your task is to populate these charts with real data from your Firestore collections.
                        </p>
                        <ul class="list-disc list-inside text-left inline-block mt-4 dashboard-muted-text">
                            <li><strong>Charts:</strong> Fetch data from relevant Firestore collections (e.g., ritual views, documentation status changes, community interactions) to populate `analyticsRitualTypeChart` and `contributorActivityChart`.</li>
                            <li>Implement data aggregation and filtering as needed for the charts.</li>
                        </ul>
                    </section>
                </section>

                <!-- 8. Admin Panel Section (Dashboard) -->
                <section id="admin-panel" class="tab-content">
                    <h2 class="text-3xl font-bold dashboard-primary-text mb-6">Admin Panel</h2>
                    <p class="dashboard-muted-text mb-4">Manage users, review content, and configure system settings.</p>

                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
                        <div class="dashboard-card p-5 rounded-lg shadow-md">
                            <h3 class="text-xl font-semibold dashboard-dark-text mb-2">Total Active Admins</h3>
                            <p class="text-4xl font-bold dashboard-secondary-text">7</p>
                        </div>
                        <div class="dashboard-card p-5 rounded-lg shadow-md">
                            <h3 class="text-xl font-semibold dashboard-dark-text mb-2">Pending Approvals</h3>
                            <p class="text-4xl font-bold text-yellow-400">12</p>
                        </div>
                        <div class="dashboard-card p-5 rounded-lg shadow-md">
                            <h3 class="text-xl font-semibold dashboard-dark-text mb-2">System Health</h3>
                            <p class="text-4xl font-bold text-green-400">Optimal</p>
                        </div>
                    </div>

                    <h3 class="text-2xl font-semibold dashboard-dark-text mb-4">User Management</h3>
                    <div class="flex flex-col md:flex-row gap-4 mb-6">
                        <input
                            type="text"
                            placeholder="Search users..."
                            class="flex-grow px-4 py-2 rounded-lg bg-gray-700 border dashboard-border-dark dashboard-text-light placeholder-dashboard-muted-text focus:outline-none focus:ring-2 focus:ring-primary-color"
                        >
                        <select class="px-4 py-2 rounded-lg bg-gray-700 border dashboard-border-dark dashboard-text-light focus:outline-none focus:ring-2 focus:ring-primary-color">
                            <option value="">Filter by Role</option>
                            <option value="admin">Admin</option>
                            <option value="user">User</option>
                            <option value="moderator">Moderator</option>
                        </select>
                        <button class="px-4 py-2 bg-primary-color text-white font-semibold rounded-lg hover:bg-green-600 transition duration-200">Apply Filters</button>
                    </div>
                    <div class="overflow-x-auto mb-8">
                        <table class="min-w-full bg-gray-700 rounded-lg shadow-md">
                            <thead>
                                <tr>
                                    <th class="py-3 px-4 text-left text-sm font-semibold dashboard-muted-text uppercase tracking-wider border-b dashboard-border-dark">User ID</th>
                                    <th class="py-3 px-4 text-left text-sm font-semibold dashboard-muted-text uppercase tracking-wider border-b dashboard-border-dark">Name</th>
                                    <th class="py-3 px-4 text-left text-sm font-semibold dashboard-muted-text uppercase tracking-wider border-b dashboard-border-dark">Email</th>
                                    <th class="py-3 px-4 text-left text-sm font-semibold dashboard-muted-text uppercase tracking-wider border-b dashboard-border-dark">Role</th>
                                    <th class="py-3 px-4 text-left text-sm font-semibold dashboard-muted-text uppercase tracking-wider border-b dashboard-border-dark">Status</th>
                                    <th class="py-3 px-4 border-b dashboard-border-dark text-left text-sm font-semibold uppercase tracking-wider">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="hover:bg-gray-600 transition duration-200">
                                    <td class="py-3 px-4 border-b dashboard-border-dark">RITENEST-001</td>
                                    <td class="py-3 px-4 border-b dashboard-border-dark">Alice Smith</td>
                                    <td class="py-3 px-4 border-b dashboard-border-dark">alice@ritenest.com</td>
                                    <td class="py-3 px-4 border-b dashboard-border-dark">Admin</td>
                                    <td class="py-3 px-4 border-b dashboard-border-dark"><span class="bg-green-500 text-white text-xs font-semibold px-2.5 py-0.5 rounded-full">Active</span></td>
                                    <td class="py-3 px-4 border-b dashboard-border-dark">
                                        <button class="text-blue-400 hover:text-blue-300 mr-2">Edit</button>
                                        <button class="text-red-400 hover:text-red-300">Delete</button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-600 transition duration-200">
                                    <td class="py-3 px-4 border-b dashboard-border-dark">RITENEST-002</td>
                                    <td class="py-3 px-4 border-b dashboard-border-dark">Bob Johnson</td>
                                    <td class="py-3 px-4 border-b dashboard-border-dark">bob@ritenest.com</td>
                                    <td class="py-3 px-4 border-b dashboard-border-dark">User</td>
                                    <td class="py-3 px-4 border-b dashboard-border-dark"><span class="bg-yellow-500 text-white text-xs font-semibold px-2.5 py-0.5 rounded-full">Pending</span></td>
                                    <td class="py-3 px-4 border-b dashboard-border-dark">
                                        <button class="text-blue-400 hover:text-blue-300 mr-2">Edit</button>
                                        <button class="text-red-400 hover:text-red-300">Delete</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <h3 class="text-2xl font-semibold dashboard-dark-text mb-4">Admin Assistant (AI Powered)</h3>
                    <p class="dashboard-muted-text mb-3">Ask Gemini AI for insights on administrative tasks, user trends, or content moderation advice.</p>
                    <textarea id="adminAIPrompt" rows="4" class="w-full p-3 rounded-lg bg-gray-700 border dashboard-border-dark dashboard-text-light placeholder-dashboard-muted-text focus:outline-none focus:ring-2 focus:ring-purple-400" placeholder="e.g., 'Summarize recent user activity trends for the past week.', 'Suggest a policy for handling spam content.'"></textarea>
                    <button id="sendAdminAIPrompt" class="px-6 py-3 bg-purple-500 text-white font-semibold rounded-lg hover:bg-purple-600 transition duration-200 mt-4 self-end">
                        Ask Admin Assistant
                    </button>
                    <div class="mt-4 p-4 bg-gray-700 rounded-lg border dashboard-border-dark">
                        <h4 class="text-lg font-semibold dashboard-dark-text mb-2">Admin Assistant Response:</h4>
                        <div id="adminAIResponse" class="dashboard-text-light whitespace-pre-wrap">
                            Your AI-powered admin assistant response will appear here.
                        </div>
                        <div id="adminAIError" class="text-red-400 mt-2 hidden"></div>
                    </div>
                </section>

                <!-- 9. AI Gemini Section (Dashboard) -->
                <section id="ai-gemini" class="tab-content">
                    <h2 class="text-3xl font-bold dashboard-primary-text mb-6">AI Gemini Integration</h2>
                    <p class="dashboard-muted-text mb-4">Interact with the Gemini AI model directly from your dashboard.</p>

                    <div class="api-key-warning mb-4">
                        <strong>Security Alert!</strong> For production, never expose your API key directly in client-side code. Use a backend server to proxy your AI requests.
                    </div>

                    <!-- General Gemini Prompt -->
                    <div class="mb-8">
                        <h3 class="text-xl font-semibold dashboard-dark-text mb-3">General Query ✨</h3>
                        <textarea id="geminiPrompt" rows="4" class="w-full p-3 rounded-lg bg-gray-700 border dashboard-border-dark dashboard-text-light placeholder-dashboard-muted-text focus:outline-none focus:ring-2 focus:ring-primary-color" placeholder="Enter your prompt for Gemini AI here... (e.g., 'Explain how AI works in a few words', 'Write a short poem about fruit.')"></textarea>
                        <button id="sendGeminiPrompt" class="px-6 py-3 bg-primary-color text-white font-semibold rounded-lg hover:bg-green-600 transition duration-200 mt-4 self-end">
                            Send to Gemini
                        </button>
                        <div class="mt-4 p-4 bg-gray-700 rounded-lg border dashboard-border-dark">
                            <h4 class="text-lg font-semibold dashboard-dark-text mb-2">Gemini AI Response:</h4>
                            <div id="geminiResponse" class="dashboard-text-light whitespace-pre-wrap">
                                Type a general prompt and click "Send to Gemini" to get a response.
                            </div>
                            <div id="geminiError" class="text-red-400 mt-2 hidden"></div>
                        </div>
                    </div>

                    <!-- Coding Partner Feature -->
                    <div class="mb-8">
                        <h3 class="text-xl font-semibold dashboard-dark-text mb-3">Coding Partner ✨</h3>
                        <p class="dashboard-muted-text mb-3">Get explanations for code, generate snippets, or debug issues.</p>
                        <textarea id="codingPrompt" rows="6" class="w-full p-3 rounded-lg bg-gray-700 border dashboard-border-dark dashboard-text-light placeholder-dashboard-muted-text focus:outline-none focus:ring-2 focus:ring-secondary-color" placeholder="e.g., 'Explain this Python code: def factorial(n): ...', or 'Write a JavaScript function to sort an array.'"></textarea>
                        <button id="sendCodingPrompt" class="px-6 py-3 bg-secondary-color text-white font-semibold rounded-lg hover:bg-blue-600 transition duration-200 mt-4 self-end">
                            Ask Coding Partner
                        </button>
                        <div class="mt-4 p-4 bg-gray-700 rounded-lg border dashboard-border-dark">
                            <h4 class="text-lg font-semibold dashboard-dark-text mb-2">Coding Partner Response:</h4>
                            <div id="codingResponse" class="dashboard-text-light whitespace-pre-wrap">
                                Ask your coding question here.
                            </div>
                            <div id="codingError" class="text-red-400 mt-2 hidden"></div>
                        </div>
                    </div>

                    <!-- Career Guide Feature -->
                    <div>
                        <h3 class="text-xl font-semibold dashboard-dark-text mb-3">Career Guide ✨</h3>
                        <p class="dashboard-muted-text mb-3">Receive advice on career paths, resume building, or interview preparation.</p>
                        <textarea id="careerPrompt" rows="4" class="w-full p-3 rounded-lg bg-gray-700 border dashboard-border-dark dashboard-text-light placeholder-dashboard-muted-text focus:outline-none focus:ring-2 focus:ring-teal-400" placeholder="e.g., 'What are key skills for a data scientist?', or 'Give me tips for a software engineering interview.'"></textarea>
                        <button id="sendCareerPrompt" class="px-6 py-3 bg-teal-500 text-white font-semibold rounded-lg hover:bg-teal-600 transition duration-200 mt-4 self-end">
                            Get Career Advice
                        </button>
                        <div class="mt-4 p-4 bg-gray-700 rounded-lg border dashboard-border-dark">
                            <h4 class="text-lg font-semibold dashboard-dark-text mb-2">Career Guide Response:</h4>
                            <div id="careerResponse" class="dashboard-text-light whitespace-pre-wrap">
                                Ask your career question here.
                            </div>
                            <div id="careerError" class="text-red-400 mt-2 hidden"></div>
                        </div>
                    </div>
                </section>

                <!-- 10. Settings Section (Dashboard) -->
                <section id="settings" class="tab-content">
                    <h2 class="text-3xl font-bold brand-heading mb-6">Global Settings</h2>
                    <p class="dashboard-muted-text mb-4">Manage your profile, application preferences, and system configurations.</p>

                    <!-- Settings Tab Navigation -->
                    <div class="flex flex-wrap gap-2 mb-6 border-b border-ritenest-border">
                        <button class="settings-tab-btn active" data-settings-tab="profile" onclick="window.showSettingsTab('profile')">
                            <i class="fas fa-user-circle mr-2"></i> Profile
                        </button>
                        <button class="settings-tab-btn" data-settings-tab="domains" onclick="window.showSettingsTab('domains')">
                            <i class="fas fa-globe mr-2"></i> Domains & DNS
                        </button>
                        <button class="settings-tab-btn" data-settings-tab="email" onclick="window.showSettingsTab('email')">
                            <i class="fas fa-envelope mr-2"></i> Email Accounts
                        </button>
                        <button class="settings-tab-btn" data-settings-tab="company" onclick="window.showSettingsTab('company')">
                            <i class="fas fa-building mr-2"></i> Company Management
                        </button>
                        <button class="settings-tab-btn" data-settings-tab="advanced" onclick="window.showSettingsTab('advanced')">
                            <i class="fas fa-cogs mr-2"></i> Advanced
                        </button>
                    </div>

                    <!-- Settings Sub-Views -->
                    <div id="settings-profile" class="settings-sub-view panel p-6 rounded-lg shadow-md active">
                        <h3 class="text-2xl font-semibold mb-4">User Profile Settings</h3>
                        <form class="space-y-4">
                            <div class="form-control">
                                <label for="displayName" class="block text-sm font-medium mb-1">Display Name</label>
                                <input type="text" id="displayName" class="w-full p-2 border rounded-md" placeholder="Your display name">
                            </div>
                            <div class="form-control">
                                <label for="email" class="block text-sm font-medium mb-1">Email Address</label>
                                <input type="email" id="email" class="w-full p-2 border rounded-md" placeholder="your@email.com" readonly>
                            </div>
                            <div class="form-control">
                                <label for="defaultRegion" class="block text-sm font-medium mb-1">Default Region</label>
                                <select id="defaultRegion" class="w-full p-2 border rounded-md">
                                    <option value="global">Global</option>
                                    <option value="africa">Africa</option>
                                    <option value="europe">Europe</option>
                                    <option value="asia">Asia</option>
                                </select>
                            </div>
                            <div class="form-control">
                                <label for="autoClaimSetting" class="block text-sm font-medium mb-1">Auto-Claim Scrolls</label>
                                <select id="autoClaimSetting" class="w-full p-2 border rounded-md">
                                    <option value="yes">Yes</option>
                                    <option value="no">No</option>
                                    <option value="prompt">Prompt Me</option>
                                </select>
                            </div>
                            <button type="submit" class="form-action-button px-4 py-2 rounded-md">Save Profile Settings</button>
                        </form>
                    </div>

                    <div id="settings-domains" class="settings-sub-view panel p-6 rounded-lg shadow-md hidden">
                        <h3 class="text-2xl font-semibold mb-4">Domain & DNS Management</h3>

                        <div class="mb-6">
                            <h4 class="text-xl font-semibold mb-3">Your Domains</h4>
                            <ul id="domainList" class="list-disc pl-5 space-y-2">
                                <!-- Domains will be rendered here by JS -->
                            </ul>
                            <div class="mt-4 flex flex-col md:flex-row gap-4">
                                <input type="text" id="newDomainName" class="flex-grow p-2 border rounded-md" placeholder="Add new domain (e.g., mynewheritage.com)">
                                <button class="form-action-button px-4 py-2 rounded-md" onclick="window.showMessage('Domain Add', 'Adding new domain functionality coming soon!')">Add Domain</button>
                            </div>
                        </div>

                        <div class="mb-6">
                            <h4 class="text-xl font-semibold mb-3">Add-on Domains</h4>
                            <p class="text-sm text-ritenest-muted-text mb-3">Link additional domains to existing primary domains.</p>
                            <div class="flex flex-col md:flex-row gap-4">
                                <input type="text" id="addonDomainName" class="flex-grow p-2 border rounded-md" placeholder="Add-on domain (e.g., blog.myheritage.com)">
                                <select id="addonDomainTarget" class="p-2 border rounded-md">
                                    <!-- Options populated by JS -->
                                </select>
                                <button class="form-action-button px-4 py-2 rounded-md" onclick="window.showMessage('Add-on Domain', 'Add-on domain functionality coming soon!')">Link Domain</button>
                            </div>
                        </div>

                        <div>
                            <h4 class="text-xl font-semibold mb-3">DNS Records</h4>
                            <div class="overflow-x-auto mb-4">
                                <table class="min-w-full api-key-table bg-white rounded-lg shadow-inner">
                                    <thead>
                                        <tr class="bg-ritenest-light-bg text-ritenest-dark-text uppercase text-sm leading-normal">
                                            <th class="py-3 px-4 text-left">Type</th>
                                            <th class="py-3 px-4 text-left">Name</th>
                                            <th class="py-3 px-4 text-left">Value</th>
                                            <th class="py-3 px-4 text-left">TTL</th>
                                            <th class="py-3 px-4 text-right">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="dnsRecordsTableBody" class="text-ritenest-muted-text text-sm font-light">
                                        <!-- DNS records will be rendered here by JS -->
                                    </tbody>
                                </table>
                            </div>
                            <div class="flex flex-col md:flex-row gap-4 mt-4">
                                <input type="text" id="dnsRecordTypeInput" class="flex-grow p-2 border rounded-md" placeholder="DNS Record Type (e.g., A, CNAME, MX)">
                                <button id="explainDnsBtn" class="form-action-button px-4 py-2 rounded-md">
                                    ✨ Explain DNS Type
                                </button>
                            </div>
                            <p id="dnsExplainStatus" class="text-xs text-ritenest-muted-text mt-1 hidden"></p>
                            <div id="dnsExplanationOutput" class="mt-4 p-3 bg-ritenest-light-bg rounded-md border border-ritenest-border text-ritenest-dark-text hidden">
                                <!-- DNS explanation will appear here -->
                            </div>
                        </div>
                    </div>

                    <div id="settings-email" class="settings-sub-view panel p-6 rounded-lg shadow-md hidden">
                        <h3 class="text-2xl font-semibold mb-4">Email Accounts</h3>
                        <p class="text-ritenest-muted-text mb-4">Manage your RiteNest™ email addresses.</p>

                        <div class="mb-6">
                            <h4 class="text-xl font-semibold mb-3">Create New Email Account</h4>
                            <div class="flex flex-col md:flex-row items-center gap-2">
                                <input type="text" id="newEmailPrefix" class="p-2 border rounded-md flex-grow" placeholder="username">
                                <span class="text-ritenest-dark-text">@</span>
                                <select id="newEmailDomain" class="p-2 border rounded-md">
                                    <!-- Domains will be populated here from appData.domains -->
                                </select>
                                <button id="createEmailBtn" class="form-action-button px-4 py-2 rounded-md">
                                    Create Email
                                </button>
                            </div>
                        </div>

                        <div>
                            <h4 class="text-xl font-semibold mb-3">Existing Email Accounts</h4>
                            <div class="overflow-x-auto">
                                <table class="min-w-full api-key-table bg-white rounded-lg shadow-inner">
                                    <thead>
                                        <tr class="bg-ritenest-light-bg text-ritenest-dark-text uppercase text-sm leading-normal">
                                            <th class="py-3 px-4 text-left">Email Address</th>
                                            <th class="py-3 px-4 text-left">Status</th>
                                            <th class="py-3 px-4 text-right">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="emailAccountsTableBody" class="text-ritenest-muted-text text-sm font-light">
                                        <!-- Email accounts will be rendered here by JS -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div id="settings-company" class="settings-sub-view panel p-6 rounded-lg shadow-md hidden">
                        <h3 class="text-2xl font-semibold mb-4">Company & Infrastructure</h3>
                        <p class="text-ritenest-muted-text mb-4">Select a company to view and manage its associated infrastructure and protocols.</p>

                        <div id="settingsCompanySelectionGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-8">
                            <!-- Company cards will be rendered here by JS -->
                        </div>

                        <div id="settingsCompanyDetailsOutput" class="company-details-section p-6 rounded-lg shadow-md hidden">
                            <!-- Company details will be rendered here by JS -->
                        </div>
                    </div>

                    <div id="settings-advanced" class="settings-sub-view panel p-6 rounded-lg shadow-md hidden">
                        <h3 class="text-2xl font-semibold mb-4">Advanced Settings</h3>
                        <p class="text-ritenest-muted-text mb-4">Caution: These settings are for experienced users only.</p>

                        <div class="space-y-6">
                            <div class="form-control">
                                <label for="apiLogLevel" class="block text-sm font-medium mb-1">API Log Level</label>
                                <select id="apiLogLevel" class="w-full p-2 border rounded-md">
                                    <option value="info">Info</option>
                                    <option value="warn">Warn</option>
                                    <option value="error">Error</option>
                                    <option value="debug">Debug</option>
                                </select>
                                <button class="form-action-button px-4 py-2 rounded-md mt-2" onclick="window.showMessage('Log Level', 'API Log Level updated (simulated).')">Update Log Level</button>
                            </div>

                            <div class="form-control">
                                <label for="dataRetentionPeriod" class="block text-sm font-medium mb-1">Data Retention Period (Days)</label>
                                <input type="number" id="dataRetentionPeriod" class="w-full p-2 border rounded-md" value="365">
                                <button class="form-action-button px-4 py-2 rounded-md mt-2" onclick="window.showMessage('Data Retention', 'Data Retention Period updated (simulated).')">Set Retention</button>
                            </div>

                            <div class="form-control">
                                <h4 class="text-xl font-semibold mb-2">Danger Zone</h4>
                                <p class="text-red-500 text-sm mb-3">Proceed with extreme caution. These actions are irreversible.</p>
                                <button class="bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 transition duration-200" onclick="window.showMessage('Reset App', 'Resetting application data (simulated). This would delete all your data!')">
                                    <i class="fas fa-exclamation-triangle mr-2"></i> Reset Application Data
                                </button>
                            </div>
                        </div>
                    </div>
                </section>
            </main>
        </div>
    </div>

    <!-- Banimal Landing Page Content -->
    <section id="banimal-landing-page" class="hidden content-section">
        <canvas id="banimal-canvas"></canvas>
        <div class="banimal-hero-content">
            <h1>Banimal™: <br> <span>🐑Kind Creatures. Global Impact.</span></h1>
            <p>
                Discover Banimal's world of thoughtful baby essentials & innovative lighting. For every purchase, we deliver the same item to a child in need, identified by the Baobab Security Network's data-driven insights.
            </p>
            <div class="button-container flex flex-wrap justify-center gap-4 mt-6">
                <a href="javascript:void(0)" class="cta-button" onclick="window.showMessage('Simulating: Exploring Banimal World.')">
                    Explore Banimal's World <i class="fas fa-arrow-right"></i>
                </a>
                <a href="https://www.banimal.co.za/" target="_blank" class="cta-button shop-now-button">
                    Shop Now <i class="fas fa-external-link-alt"></i>
                </a>
            </div>
        </div>
    </section>

    <footer class="py-8 px-6 md:px-12 text-center">
        © 2025 RiteNest™ Protocol. All Rights Reserved. Powered by 🌿 glyphs + Vault API. Synced with Seedwave™.
    </footer>

    <!-- Custom Message Modal -->
    <div id="messageModal" class="modal hidden">
        <div class="modal-content">
            <span class="close-button" onclick="window.closeMessageModal()">&times;</span>
            <p id="modalMessage" class="text-lg font-semibold text-ritenest-dark-text"></p>
            <button class="primary-btn mt-4 px-6 py-2 rounded-lg" onclick="window.closeMessageModal()">OK</button>
        </div>
    </div>

    <div id="emailDraftModal" class="custom-modal-overlay hidden">
        <div class="custom-modal-content max-w-xl w-full h-auto">
            <div class="template-preview-header">
                <h3 id="emailDraftTitle">Draft Email</h3>
                <button class="close-preview-btn" onclick="hideEmailDraftModal()"><i class="fas fa-times"></i></button>
            </div>
            <div class="template-preview-body text-left">
                <p class="text-ritenest-muted-text text-sm mb-2">To: <span id="emailDraftTo"></span></p>
                <div class="form-control">
                    <label for="emailPurposeInput" class="text-ritenest-dark-text text-sm mb-1">Purpose of Email</label>
                    <input type="text" id="emailPurposeInput" placeholder="e.g., Welcome new user, Support query, Marketing announcement" class="w-full p-2 rounded-md bg-ritenest-light-bg border border-ritenest-border text-ritenest-dark-text text-sm">
                </div>
                <button type="button" id="generateEmailDraftBtn" class="form-action-button text-xs px-3 py-2">
                    ✨ Generate Draft
                </button>
                <p id="emailDraftStatus" class="text-xs text-ritenest-muted-text mt-1 hidden"></p>
                <textarea id="generatedEmailDraftOutput" rows="10" class="w-full p-2 border border-ritenest-border rounded-md bg-ritenest-light-bg text-ritenest-dark-text mt-2" placeholder="Your AI-generated email draft will appear here..." readonly></textarea>
                <div class="template-preview-actions">
                    <button class="btn-primary" onclick="document.execCommand('copy'); window.showMessage('Email Copied', 'Email draft copied to clipboard!', true);">Copy to Clipboard</button>
                    <button class="btn-secondary" onclick="hideEmailDraftModal()">Close</button>
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Firebase Configuration (provided by Canvas environment)
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');

        // Initialize Firebase
        let app;
        let db;
        let auth;
        let userId = 'anonymous'; // Default to anonymous

        // --- Global Variables and Initial Setup ---
        let googleMapScriptLoaded = false;
        let leafletMapInstance = null; // Store Leaflet map instance
        let activeMainSection = 'hero-section'; // Default active main section
        let activeDashboardSectionTab = 'overview'; // Default active dashboard sub-section
        let activeMusicSubSection = 'allMusic'; // Default active music sub-section
        let banimalAnimationFrameId; // Store Banimal canvas animation frame ID

        // Banimal Canvas Variables
        let banimalCanvas;
        let banimalCtx;
        let banimalParticles = [];
        const numBanimalParticles = 100;

        // Particle class for Banimal canvas
        class BanimalParticle {
            constructor() {
                this.x = Math.random() * banimalCanvas.width;
                this.y = Math.random() * banimalCanvas.height;
                this.size = Math.random() * 5 + 1;
                this.speedX = Math.random() * 3 - 1.5;
                this.speedY = Math.random() * 3 - 1.5;
                this.color = `hsl(${Math.random() * 360}, 50%, 70%)`; // Soft pastel colors
            }

            update() {
                this.x += this.speedX;
                this.y += this.speedY;

                if (this.size > 0.2) this.size -= 0.01;

                if (this.x < 0 || this.x > banimalCanvas.width) this.speedX *= -1;
                if (this.y < 0 || this.y > banimalCanvas.height) this.speedY *= -1;
            }

            draw() {
                banimalCtx.fillStyle = this.color;
                banimalCtx.beginPath();
                banimalCtx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                banimalCtx.fill();
            }
        }

        // --- Simulated Data (for offline demo and initial rendering) ---
        let simulatedRitualData = [
            { id: 'r1', name: 'Rain Dance of the Ancestors', type: 'Ceremony', status: 'Verified', lastUpdated: '2024-06-15' },
            { id: 'r2', name: 'Oral History: Elder Thabo', type: 'Oral History', status: 'In Progress', lastUpdated: '2024-07-01' },
            { id: 'r3', name: 'Artifact: Ancient Drum', type: 'Artifact Description', status: 'Pending Review', lastUpdated: '2024-06-28' },
            { id: 'r4', name: 'Harvest Blessing Ritual', type: 'Ceremony', status: 'Documented', lastUpdated: '2024-06-20' },
            { id: 'r5', name: 'Ancestral Chant Compilation', type: 'Oral History', status: 'In Progress', lastUpdated: '2024-07-02' },
            { id: 'r6', name: 'Initiation Ceremony Guide', type: 'Ritual Practice', status: 'Documented', lastUpdated: '2024-06-25' },
        ];

        let simulatedTotems = [
            { id: 't1', name: 'Elephant Clan Totem', description: 'Associated with strength and wisdom.', origin: 'Zulu' },
            { id: 't2', name: 'Sacred Healing Staff', description: 'Passed down through generations of healers.', origin: 'Xhosa' },
            { id: 't3', name: 'Ancestral Mask of Protection', description: 'Used in ceremonial dances.', origin: 'Ndebele' },
        ];

        let simulatedMedia = [
            { id: 'm1', title: 'Zulu Wedding Ceremony', type: 'Video', description: 'Recorded 2023-09-10.', url: 'https://placehold.co/200x150/065f46/d1fae5?text=Video' },
            { id: 'm2', title: 'San Bushman Storytelling', type: 'Audio', description: 'Oral history from 1980s.', url: 'https://placehold.co/200x150/065f46/d1fae5?text=Audio' },
            { id: 'm3', title: 'Sacred Ndebele Patterns', type: 'Image', description: 'Detailed imagery of traditional art.', url: 'https://placehold.co/200x150/065f46/d1fae5?text=Image' },
        ];

        let simulatedProvenanceRecords = [
            { id: 'p1', contentId: 'r1', event: 'Original Oral History Recorded', timestamp: '2023-01-15 10:30 SAST', hash: '0xabc1234567890def' },
            { id: 'p2', contentId: 'r1', event: 'Transcription & Initial Tagging', timestamp: '2023-01-20 14:00 SAST', hash: '0xdef4567890abc1' },
            { id: 'p3', contentId: 'r2', event: 'Elder Verification & Approval', timestamp: '2023-02-01 09:00 SAST', hash: '0xghi7890123456def' },
            { id: 'p4', contentId: 'r2', event: 'Linked to RiteNest™ VaultMesh', timestamp: '2023-02-05 11:45 SAST', hash: '0xjkl01234567890' },
        ];

        let simulatedDiscussionPosts = [
            { id: 'd1', title: 'The Role of Water in Cleansing Rituals', author: 'CommunityMember123', timestamp: '2 hours ago', content: "I've been researching the use of water in various African cleansing ceremonies. It seems to symbolize purity and renewal across many cultures. Does anyone have insights into specific regional variations or historical contexts?", likes: 15, comments: 3 },
            { id: 'd2', title: 'Challenges in Documenting Oral Traditions', author: 'HeritagePreserver', timestamp: 'yesterday', content: "What are the best practices for accurately capturing and transcribing oral histories, especially when dealing with multiple dialects or nuanced storytelling? Any tools or methodologies recommended?", likes: 22, comments: 8 },
        ];

        let simulatedLearningResources = [
            { id: 'lr1', title: 'Webinar: Digital Ethics in Heritage Preservation', type: 'Webinar', date: '2024-07-20', speaker: 'Dr. Naledi Mokoena', description: 'Explore the ethical considerations of digitizing indigenous knowledge.', action: 'Register Now' },
            { id: 'lr2', title: 'Guide: Understanding Ancestral Lineage', type: 'Guide', format: 'PDF', author: 'RiteNest Team', description: 'A comprehensive guide to researching and tracing your family\'s heritage.', action: 'Download Guide' },
        ];


        // --- Chart Instances ---
        let ritualTypeChartInstance;
        let documentationProgressChartInstance;
        let overallStatusChartInstance; // For Documentation Progress section
        let monthlyRateChartInstance; // For Documentation Progress section
        let analyticsRitualTypeChartInstance; // For Analytics section
        let contributorActivityChartInstance; // For Analytics section

        // --- Custom Message Modal Functions ---
        window.showMessage = function(message) {
            const modal = document.getElementById('messageModal');
            const modalMessage = document.getElementById('modalMessage');
            modalMessage.textContent = message;
            modal.classList.remove('hidden');
        }

        window.closeMessageModal = function() {
            const modal = document.getElementById('messageModal');
            modal.classList.add('hidden');
        }

        // --- Main Landing Page Functions ---

        // Function to toggle main landing page sections and the dashboard
        window.showMainSection = function(sectionIdToShow) {
            // Stop any active canvas animations
            if (banimalAnimationFrameId) {
                cancelAnimationFrame(banimalAnimationFrameId);
                banimalAnimationFrameId = null;
            }

            // Hide all landing page sections
            document.querySelectorAll('.landing-section').forEach(section => {
                section.classList.add('hidden');
            });
            // Hide the dashboard wrapper
            document.getElementById('ritenest-dashboard-wrapper').classList.add('hidden');
            document.getElementById('ritenest-dashboard-wrapper').classList.remove('flex'); // Ensure flex is removed when hidden

            // Show the selected section
            const sectionToShow = document.getElementById(sectionIdToShow);
            if (sectionToShow) {
                sectionToShow.classList.remove('hidden');
            }

            // Update active state for main header navigation links
            document.querySelectorAll('.header-nav-item').forEach(link => {
                link.classList.remove('header-nav-active');
            });
            const clickedLink = document.querySelector(`.header-nav-item[onclick*="${sectionIdToShow}"]`);
            if (clickedLink) {
                clickedLink.classList.add('header-nav-active');
            }

            // Special handling for dashboard display
            if (sectionIdToShow === 'ritenest-dashboard-wrapper') {
                sectionToShow.classList.add('flex'); // Ensure dashboard wrapper uses flex for layout
                // Defer the call to showDashboardSectionTab to the next animation frame
                // This ensures the dashboard content is in the DOM and visible before we try to manipulate its tabs
                requestAnimationFrame(() => {
                    window.showDashboardSectionTab(activeDashboardSectionTab);
                });
            } else {
                // Ensure main dashboard sections are hidden when not viewing dashboard
                document.querySelectorAll('#ritenest-dashboard-wrapper main section').forEach(section => {
                    section.classList.add('hidden');
                });
                // Hide music sub-sidebar if moving away from dashboard (not directly applicable here but good practice)
                const musicSubSidebar = document.getElementById('musicSubSidebar');
                if (musicSubSidebar) {
                    musicSubSidebar.classList.add('hidden');
                    musicSubSidebar.classList.remove('flex');
                }
            }

            // Special handling for Banimal page to start canvas animation
            if (sectionIdToShow === 'banimal-landing-page') {
                window.initBanimalParticles(); // Re-initialize particles to avoid artifacts
                window.animateBanimalCanvas();
            }

            window.scrollTo({ top: 0, behavior: 'smooth' }); // Scroll to top of the new section
        }

        // Function to load terminal content into the iframe (from landing page)
        window.loadTerminal = function(url) {
            document.getElementById('vault-frame').src = url;
            // Remove ring from all buttons and add to the clicked one
            document.querySelectorAll('.terminal-btn').forEach(btn => btn.classList.remove('ring', 'ring-ritenest-accent'));
            // Use event.currentTarget to ensure the clicked button is targeted
            if (event && event.currentTarget) {
                event.currentTarget.classList.add('ring', 'ring-ritenest-accent');
            }
            console.log("🧬 Terminal loaded:", url);
        }

        // Script for Share Signal (mock price update from landing page)
        window.updateSharePrice = function() {
            const mockPrice = (80 + Math.random() * 10).toFixed(2);
            document.getElementById('price').innerText = `$${mockPrice}`;
            document.getElementById('timestamp').innerText = new Date().toLocaleTimeString();
        }

        // Chart.js for RiteNest Growth & Impact (from landing page)
        window.initializeBrandChart = function() {
            const ctx = document.getElementById('brandChart')?.getContext('2d');
            if (ctx) {
                new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: ['Q1', 'Q2', 'Q3', 'Q4'],
                        datasets: [{
                            label: 'Rituals Documented',
                            data: [30, 70, 130, 210], /* Adjusted data for RiteNest context */
                            borderWidth: 2,
                            borderColor: 'var(--ritenest-accent)', /* Teal green */
                            tension: 0.4,
                            fill: true,
                            backgroundColor: 'rgba(16, 185, 129, 0.15)', /* Teal with transparency */
                            pointRadius: 4,
                            pointBackgroundColor: 'var(--ritenest-accent)',
                            pointBorderColor: 'var(--ritenest-card-bg)',
                            pointHoverRadius: 6
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                grid: {
                                    color: 'rgba(4, 120, 87, 0.1)', /* Light green grid lines */
                                    drawBorder: false
                                },
                                ticks: {
                                    color: 'var(--ritenest-muted-text)'
                                }
                            },
                            x: {
                                grid: {
                                    color: 'rgba(4, 120, 87, 0.1)',
                                    drawBorder: false
                                },
                                ticks: {
                                    color: 'var(--ritenest-muted-text)'
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                display: false,
                                labels: {
                                    color: 'var(--ritenest-dark-text)'
                                }
                            }
                        }
                    }
                });
            }
        }

        // --- RiteNest Master Dashboard Functions ---

        // Function to switch between tabs/sections within the RiteNest Dashboard
        window.showDashboardSectionTab = function(tabId) {
            // Deactivate all sidebar tab buttons
            document.querySelectorAll('#ritenest-dashboard-wrapper .dashboard-sidebar-nav-item').forEach(button => {
                button.classList.remove('active');
            });
            // Hide all tab content sections
            document.querySelectorAll('#ritenest-dashboard-wrapper .tab-content').forEach(content => {
                content.classList.remove('active');
            });

            // Activate the clicked sidebar tab button
            const clickedSidebarButton = document.querySelector(`#ritenest-dashboard-wrapper .dashboard-sidebar-nav-item[data-tab="${tabId}"]`);
            if (clickedSidebarButton) {
                clickedSidebarButton.classList.add('active');
            } else {
                console.error(`Dashboard sidebar button with data-tab="${tabId}" not found.`);
                return; // Exit if button not found to prevent further errors
            }

            // Show its corresponding content section
            const contentSection = document.getElementById(tabId);
            if (contentSection) {
                contentSection.classList.add('active');
            } else {
                console.error(`Dashboard content section with id="${tabId}" not found.`);
                return; // Exit if content section not found
            }

            // Update global activeDashboardSectionTab
            activeDashboardSectionTab = tabId;

            // Re-render charts when their section becomes active to ensure they draw correctly
            // Using requestAnimationFrame to ensure canvas is rendered before chart initialization
            requestAnimationFrame(() => {
                if (tabId === 'overview') {
                    window.updateOverviewMetrics();
                    window.updateRitualTypeChart();
                    window.updateDocumentationProgressChart();
                } else if (tabId === 'documentation-progress') {
                    window.updateProgressMetrics();
                    window.populateProgressTable();
                    window.updateOverallStatusChart();
                    window.updateMonthlyRateChart();
                } else if (tabId === 'totemtrack') {
                    window.renderTotemList();
                } else if (tabId === 'vaultspirit') {
                    window.renderMediaList();
                } else if (tabId === 'glyphtag') {
                    window.renderProvenanceChainDisplay();
                } else if (tabId === 'scrollloop') {
                    window.renderDiscussionPosts();
                    window.renderLearningResources();
                } else if (tabId === 'analytics') {
                    window.updateAnalyticsRitualTypeChart();
                    window.updateContributorActivityChart();
                } else if (tabId === 'settings') { // Added for settings tab
                    loadSettings();
                    showSettingsTab('profile'); // Default to profile tab when settings is opened
                }
            });
        }

        // --- Overview Section Functions (Dashboard) ---
        window.updateOverviewMetrics = function() {
            document.getElementById('totalRitualsCount').textContent = simulatedRitualData.length;
            document.getElementById('activeContributorsCount').textContent = 15; // Simulated
            document.getElementById('storageUsed').textContent = (simulatedRitualData.length * 0.05 + Math.random() * 2).toFixed(2); // Simulated storage
        }

        window.updateRitualTypeChart = function() {
            const ctx = document.getElementById('ritualTypeChart')?.getContext('2d');
            if (!ctx) return;

            const counts = {};
            simulatedRitualData.forEach(ritual => {
                counts[ritual.type] = (counts[ritual.type] || 0) + 1;
            });

            const labels = Object.keys(counts);
            const data = Object.values(counts);
            const colors = ['#065f46', '#34d399', '#a7f3d0', '#6ee7b7']; // Greens for RiteNest theme

            if (ritualTypeChartInstance) {
                ritualTypeChartInstance.destroy();
            }

            ritualTypeChartInstance = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: labels,
                    datasets: [{
                        data: data,
                        backgroundColor: labels.map((_, i) => colors[i % colors.length]),
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                color: 'var(--ritenest-dark-text)'
                            }
                        },
                        title: {
                            display: false
                        }
                    }
                }
            });
        }

        window.updateDocumentationProgressChart = function() {
            const ctx = document.getElementById('documentationProgressChart')?.getContext('2d');
            if (!ctx) return;

            const statusCounts = {};
            simulatedRitualData.forEach(ritual => {
                statusCounts[ritual.status] = (statusCounts[ritual.status] || 0) + 1;
            });

            const labels = ['Documented', 'In Progress', 'Verified', 'Pending Review'];
            const data = [
                statusCounts['Documented'] || 0,
                statusCounts['In Progress'] || 0,
                statusCounts['Verified'] || 0,
                statusCounts['Pending Review'] || 0
            ];
            const colors = ['#059669', '#facc15', '#10b981', '#ef4444']; // Green, Yellow, Teal, Red

            if (documentationProgressChartInstance) {
                documentationProgressChartInstance.destroy();
            }

            documentationProgressChartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Number of Rituals',
                        data: data,
                        backgroundColor: colors,
                        borderColor: colors,
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        title: {
                            display: false
                        }
                    },
                    scales: {
                        x: {
                            ticks: {
                                color: 'var(--ritenest-dark-text)'
                            },
                            grid: {
                                color: 'rgba(0,0,0,0.1)'
                            }
                        },
                        y: {
                            beginAtZero: true,
                            ticks: {
                                color: 'var(--ritenest-dark-text)'
                            },
                            grid: {
                                color: 'rgba(0,0,0,0.1)'
                            }
                        }
                    }
                }
            });
        }

        // --- Documentation Progress Section Functions (Dashboard) ---
        window.updateProgressMetrics = function() {
            const total = simulatedRitualData.length;
            const inProgress = simulatedRitualData.filter(r => r.status === 'In Progress' || r.status === 'Pending Review').length;
            const completed = simulatedRitualData.filter(r => r.status === 'Documented' || r.status === 'Verified').length;

            document.getElementById('docProgressTotalEntries').textContent = total;
            document.getElementById('docProgressInProgress').textContent = inProgress;
            document.getElementById('docProgressCompletedVerified').textContent = completed;
        }

        window.populateProgressTable = function() {
            const tableBody = document.getElementById('docProgressTableBody');
            if (!tableBody) return;

            tableBody.innerHTML = ''; // Clear existing rows

            simulatedRitualData.forEach(ritual => {
                const row = document.createElement('tr');
                row.className = 'border-b border-gray-200 hover:bg-gray-100';

                let statusClass = '';
                if (ritual.status === 'Verified') {
                    statusClass = 'bg-green-200 text-green-800';
                } else if (ritual.status === 'In Progress') {
                    statusClass = 'bg-yellow-200 text-yellow-800';
                } else if (ritual.status === 'Pending Review') {
                    statusClass = 'bg-red-200 text-red-800';
                } else if (ritual.status === 'Documented') {
                    statusClass = 'bg-blue-200 text-blue-800';
                }

                row.innerHTML = `
                    <td class="py-3 px-6 text-left whitespace-nowrap">${ritual.name}</td>
                    <td class="py-3 px-6 text-left">${ritual.type}</td>
                    <td class="py-3 px-6 text-left"><span class="py-1 px-3 rounded-full text-xs ${statusClass}">${ritual.status}</span></td>
                    <td class="py-3 px-6 text-left">${ritual.lastUpdated}</td>
                    <td class="py-3 px-6 text-center">
                        <button class="text-blue-500 hover:text-blue-700 text-sm" onclick="window.showMessage('Simulating view details for ${ritual.name}')">View</button>
                    </td>
                `;
                tableBody.appendChild(row);
            });
        }

        window.updateOverallStatusChart = function() {
            const ctx = document.getElementById('overallStatusChart')?.getContext('2d');
            if (!ctx) return;

            const documentedCount = simulatedRitualData.filter(r => r.status === 'Documented').length;
            const inProgressCount = simulatedRitualData.filter(r => r.status === 'In Progress').length;
            const verifiedCount = simulatedRitualData.filter(r => r.status === 'Verified').length;
            const pendingReviewCount = simulatedRitualData.filter(r => r.status === 'Pending Review').length;

            const labels = ['Documented', 'In Progress', 'Verified', 'Pending Review'];
            const data = [documentedCount, inProgressCount, verifiedCount, pendingReviewCount];
            const colors = ['#059669', '#facc15', '#10b981', '#ef4444']; // Green, Yellow, Teal, Red

            if (overallStatusChartInstance) {
                overallStatusChartInstance.destroy();
            }

            overallStatusChartInstance = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: labels,
                    datasets: [{
                        data: data,
                        backgroundColor: colors,
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                color: 'var(--ritenest-dark-text)'
                            }
                        },
                        title: {
                            display: false
                        }
                    }
                }
            });
        }

        window.updateMonthlyRateChart = function() {
            const ctx = document.getElementById('monthlyRateChart')?.getContext('2d');
            if (!ctx) return;

            // Simulated monthly data for the last 6 months
            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'];
            const newRitualsAdded = [5, 8, 12, 10, 7, 15]; // Example data

            if (monthlyRateChartInstance) {
                monthlyRateChartInstance.destroy();
            }

            monthlyRateChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: months,
                    datasets: [{
                        label: 'New Rituals Documented',
                        data: newRitualsAdded,
                        borderColor: 'var(--ritenest-primary)',
                        backgroundColor: 'rgba(4, 120, 87, 0.2)',
                        tension: 0.3,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        title: {
                            display: false
                        }
                    },
                    scales: {
                        x: {
                            ticks: {
                                color: 'var(--ritenest-dark-text)'
                            },
                            grid: {
                                color: 'rgba(0,0,0,0.1)'
                            }
                        },
                        y: {
                            beginAtZero: true,
                            ticks: {
                                color: 'var(--ritenest-dark-text)'
                            },
                            grid: {
                                color: 'rgba(0,0,0,0.1)'
                            }
                        }
                    }
                }
            });
        }

        // --- TotemTrack Section Functions (Dashboard) ---
        window.handleAddTotemForm = function(event) {
            event.preventDefault();
            const totemName = document.getElementById('totemName').value.trim();
            const totemDescription = document.getElementById('totemDescription').value.trim();
            const totemOrigin = document.getElementById('totemOrigin').value.trim();
            // const totemImageFile = document.getElementById('totemImage').files[0]; // For real upload

            if (!totemName) {
                window.showMessage('Totem Name is required!');
                return;
            }

            const newTotem = {
                id: `t${Date.now()}`,
                name: totemName,
                description: totemDescription,
                origin: totemOrigin,
                // imageUrl: totemImageFile ? 'simulated-url-for-uploaded-image.jpg' : '' // For real upload
            };
            simulatedTotems.push(newTotem);
            window.renderTotemList();
            window.showMessage('Simulating: Totem record added. In a real app, this would save to Firestore.');
            document.getElementById('addTotemForm').reset();
        }

        window.renderTotemList = function() {
            const totemListContainer = document.getElementById('totemList');
            if (!totemListContainer) return;

            totemListContainer.innerHTML = '';
            if (simulatedTotems.length === 0) {
                totemListContainer.innerHTML = '<p class="dashboard-muted-text text-center">No totems documented yet. Add one above!</p>';
                return;
            }

            simulatedTotems.forEach(totem => {
                const card = document.createElement('div');
                card.className = 'subnode-card p-4 rounded-lg flex items-center justify-between';
                card.innerHTML = `
                    <div>
                        <p class="font-semibold dashboard-dark-text">${totem.name}</p>
                        <p class="dashboard-muted-text text-sm">${totem.description}</p>
                    </div>
                    <button class="primary-btn px-4 py-2 rounded-md text-sm" onclick="window.showMessage('Simulating: Viewing details for ${totem.name}.')">View Details</button>
                `;
                totemListContainer.appendChild(card);
            });
        }

        // --- VaultSpirit Section Functions (Dashboard) ---
        window.handleUploadMediaForm = function(event) {
            event.preventDefault();
            const mediaTitle = document.getElementById('mediaTitle').value.trim();
            const mediaType = document.getElementById('mediaType').value;
            const mediaDescription = document.getElementById('mediaDescription').value.trim();
            // const mediaFile = document.getElementById('mediaFile').files[0]; // For real upload

            if (!mediaTitle || !mediaType) {
                window.showMessage('Media Title and Type are required!');
                return;
            }

            const newMedia = {
                id: `m${Date.now()}`,
                title: mediaTitle,
                type: mediaType,
                description: mediaDescription,
                url: `https://placehold.co/200x150/065f46/d1fae5?text=${mediaType}` // Simulated URL
            };
            simulatedMedia.push(newMedia);
            window.renderMediaList();
            window.showMessage('Simulating: Media uploaded. In a real app, this would use Firebase Storage.');
            document.getElementById('uploadMediaForm').reset();
        }

        window.renderMediaList = function() {
            const mediaListContainer = document.getElementById('mediaList');
            if (!mediaListContainer) return;

            mediaListContainer.innerHTML = '';
            if (simulatedMedia.length === 0) {
                mediaListContainer.innerHTML = '<p class="dashboard-muted-text text-center">No media vaulted yet. Upload some above!</p>';
                return;
            }

            simulatedMedia.forEach(media => {
                const card = document.createElement('div');
                card.className = 'subnode-card p-4 rounded-lg flex items-center justify-between';
                card.innerHTML = `
                    <div>
                        <p class="font-semibold dashboard-dark-text">${media.title} (${media.type})</p>
                        <p class="dashboard-muted-text text-sm">${media.description}</p>
                    </div>
                    <button class="primary-btn px-4 py-2 rounded-md text-sm" onclick="window.showMessage('Simulating: Playing/Viewing ${media.title}.')">Play/View</button>
                `;
                mediaListContainer.appendChild(card);
            });
        }

        // --- GlyphTag Section Functions (Dashboard) ---
        window.handleVerifyProvenanceForm = function(event) {
            event.preventDefault();
            const hashInput = document.getElementById('provenanceHash').value.trim(); // Corrected ID
            const resultDisplay = document.getElementById('verificationResult');

            if (!hashInput) {
                resultDisplay.textContent = 'Please enter a hash to verify.';
                return;
            }

            const found = simulatedProvenanceRecords.find(record => record.hash === hashInput);
            if (found) {
                resultDisplay.innerHTML = `
                    <p class="text-green-600 font-bold">Hash Verified! <i class="fas fa-check-circle"></i></p>
                    <p class="text-sm mt-2">Content ID: ${found.contentId}</p>
                    <p class="text-sm">Event: ${found.event}</p>
                    <p class="text-sm">Timestamp: ${found.timestamp}</p>
                `;
            } else {
                resultDisplay.innerHTML = `
                    <p class="text-red-600 font-bold">Hash Not Found or Invalid. <i class="fas fa-times-circle"></i></p>
                    <p class="text-sm mt-2">This hash does not match any known provenance record.</p>
                `;
            }
        }

        window.handleGenerateGlyphTagForm = function(event) {
            event.preventDefault();
            const contentId = document.getElementById('contentIdToTag').value.trim();
            const description = document.getElementById('taggingDescription').value.trim();
            const generatedHashDisplay = document.getElementById('generatedHash');

            if (!contentId) {
                window.showMessage('Content ID is required to generate a GlyphTag!');
                return;
            }

            const newHash = `0x${Math.random().toString(16).substring(2, 10)}${Math.random().toString(16).substring(2, 10)}${Math.random().toString(16).substring(2, 10)}${Math.random().toString(16).substring(2, 10)}`;
            const newRecord = {
                id: `p${Date.now()}`,
                contentId: contentId,
                event: description || 'New GlyphTag generated',
                timestamp: new Date().toLocaleString(),
                hash: newHash
            };
            simulatedProvenanceRecords.push(newRecord);
            generatedHashDisplay.innerHTML = `
                <p class="text-green-600 font-bold">GlyphTag Generated! <i class="fas fa-check-circle"></i></p>
                <code class="block text-accent break-all text-sm mt-1">${newHash}</code>
                <p class="text-xs dashboard-muted-text mt-2">Record saved (simulated).</p>
            `;
            document.getElementById('generateGlyphTagForm').reset();
            window.renderProvenanceChainDisplay(); // Re-render to show new record
        }

        window.renderProvenanceChainDisplay = function() {
            const chainDisplay = document.getElementById('provenanceChainDisplay');
            if (!chainDisplay) return;

            chainDisplay.innerHTML = '';
            if (simulatedProvenanceRecords.length === 0) {
                chainDisplay.innerHTML = '<p class="dashboard-muted-text text-center">No provenance records to display. Generate a GlyphTag!</p>';
                return;
            }

            simulatedProvenanceRecords.forEach(record => {
                const step = document.createElement('div');
                step.className = 'provenance-step';
                step.innerHTML = `
                    <p class="font-semibold dashboard-dark-text">Content ID: ${record.contentId}</p>
                    <p class="dashboard-muted-text text-sm">Event: ${record.event}</p>
                    <p class="dashboard-muted-text text-sm">Timestamp: ${record.timestamp}</p>
                    <p class="dashboard-muted-text text-xs mt-1">Hash: <code>${record.hash}</code></p>
                `;
                chainDisplay.appendChild(step);
            });
        }


        // --- ScrollLoop Section Functions (Dashboard) ---
        window.handleNewDiscussionForm = function(event) {
            event.preventDefault();
            const postTitle = document.getElementById('postTitle').value.trim();
            const postContent = document.getElementById('postContent').value.trim();

            if (!postTitle || !postContent) {
                window.showMessage('Discussion Title and Content are required!');
                return;
            }

            const newPost = {
                id: `d${Date.now()}`,
                title: postTitle,
                author: 'Current User (Simulated)', // In real app, use actual user name
                timestamp: 'Just now',
                content: postContent,
                likes: 0,
                comments: 0
            };
            simulatedDiscussionPosts.unshift(newPost); // Add to the beginning
            window.renderDiscussionPosts();
            window.showMessage('Simulating: New discussion post created.');
            document.getElementById('newDiscussionForm').reset();
        }

        window.renderDiscussionPosts = function() {
            const postsContainer = document.getElementById('discussionPosts');
            if (!postsContainer) return;

            postsContainer.innerHTML = '';
            if (simulatedDiscussionPosts.length === 0) {
                postsContainer.innerHTML = '<p class="dashboard-muted-text text-center">No discussions yet. Start one above!</p>';
                return;
            }

            simulatedDiscussionPosts.forEach(post => {
                const postElement = document.createElement('div');
                postElement.className = 'discussion-post';
                postElement.innerHTML = `
                    <h4 class="text-xl font-bold text-gray-800 mb-2">${post.title}</h4>
                    <p class="text-gray-700 text-sm mb-3">By: ${post.author} - ${post.timestamp}</p>
                    <p class="text-gray-600">
                        "${post.content}"
                    </p>
                    <div class="mt-4 text-right">
                        <button class="primary-btn px-4 py-2 rounded-md text-sm mr-4" onclick="window.showMessage('Simulating: Viewing comments.')">View Comments (${post.comments})</button>
                        <button class="primary-btn px-4 py-2 rounded-md text-sm" onclick="window.showMessage('Simulating: Liking post.')"><i class="fas fa-thumbs-up"></i> ${post.likes}</button>
                    </div>
                `;
                postsContainer.appendChild(postElement);
            });
        }

        window.renderLearningResources = function() {
            const resourcesContainer = document.getElementById('learningResources');
            if (!resourcesContainer) return;

            resourcesContainer.innerHTML = '';
            if (simulatedLearningResources.length === 0) {
                resourcesContainer.innerHTML = '<p class="dashboard-muted-text text-center">No learning resources available yet.</p>';
                return;
            }

            simulatedLearningResources.forEach(resource => {
                const card = document.createElement('div');
                card.className = 'subnode-card p-4 rounded-lg';
                card.innerHTML = `
                    <h4 class="text-xl font-bold text-gray-800 mb-2">${resource.title}</h4>
                    <p class="text-gray-600 text-sm mb-3">
                        ${resource.type}: ${resource.date || resource.format} | ${resource.speaker ? `Speaker: ${resource.speaker}` : `Author: ${resource.author}`}
                    </p>
                    <p class="text-gray-600">${resource.description}</p>
                    <button class="primary-btn px-4 py-2 rounded-md text-sm mt-4" onclick="window.showMessage('Simulating: ${resource.action} for ${resource.title}.')">
                        ${resource.action}
                    </button>
                `;
                resourcesContainer.appendChild(card);
            });
        }

        // --- Analytics Section Functions (Dashboard Charts) ---
        window.updateAnalyticsRitualTypeChart = function() {
            const ctx = document.getElementById('analyticsRitualTypeChart')?.getContext('2d');
            if (!ctx) return;

            const counts = {};
            simulatedRitualData.forEach(ritual => {
                counts[ritual.type] = (counts[ritual.type] || 0) + 1;
            });

            const labels = Object.keys(counts);
            const data = Object.values(counts);
            const colors = ['#065f46', '#34d399', '#a7f3d0', '#6ee7b7']; // Greens for RiteNest theme

            if (analyticsRitualTypeChartInstance) {
                analyticsRitualTypeChartInstance.destroy();
            }

            analyticsRitualTypeChartInstance = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: labels,
                    datasets: [{
                        data: data,
                        backgroundColor: labels.map((_, i) => colors[i % colors.length]),
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                color: 'var(--ritenest-dark-text)'
                            }
                        },
                        title: {
                            display: false
                        }
                    }
                }
            });
        }

        window.updateContributorActivityChart = function() {
            const ctx = document.getElementById('contributorActivityChart')?.getContext('2d');
            if (!ctx) return;

            // Simulated monthly data for contributor activity
            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'];
            const activeContributorsData = [10, 12, 15, 13, 18, 20];
            const newRitualsSubmitted = [3, 5, 8, 7, 6, 10];

            if (contributorActivityChartInstance) {
                contributorActivityChartInstance.destroy();
            }

            contributorActivityChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: months,
                    datasets: [
                        {
                            label: 'Active Contributors',
                            data: activeContributorsData,
                            borderColor: 'var(--ritenest-primary)',
                            backgroundColor: 'rgba(4, 120, 87, 0.2)',
                            tension: 0.3,
                            fill: true,
                            yAxisID: 'y'
                        },
                        {
                            label: 'New Rituals Submitted',
                            data: newRitualsSubmitted,
                            borderColor: 'var(--ritenest-accent)',
                            backgroundColor: 'rgba(16, 185, 129, 0.2)',
                            tension: 0.3,
                            fill: true,
                            yAxisID: 'y1'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                color: 'var(--ritenest-dark-text)'
                            }
                        },
                        title: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            ticks: {
                                color: 'var(--ritenest-dark-text)'
                            },
                            grid: {
                                color: 'rgba(0,0,0,0.1)'
                            }
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            grid: {
                                drawOnChartArea: false, // Only draw grid lines for the first Y axis
                                color: 'rgba(0,0,0,0.1)'
                            },
                            ticks: {
                                color: 'var(--ritenest-dark-text)'
                            }
                        },
                        x: {
                            ticks: {
                                color: 'var(--ritenest-dark-text)'
                            },
                            grid: {
                                color: 'rgba(0,0,0,0.1)'
                            }
                        }
                    }
                }
            });
        }


        // --- Banimal Canvas Animation Functions (kept for completeness, but not RiteNest specific) ---
        window.initBanimalParticles = function() {
            banimalCanvas = document.getElementById('banimal-canvas');
            if (!banimalCanvas) return; // Exit if canvas is not available

            banimalCtx = banimalCanvas.getContext('2d');
            window.resizeBanimalCanvas();
            window.removeEventListener('resize', window.resizeBanimalCanvas); // Prevent duplicate listeners
            window.addEventListener('resize', window.resizeBanimalCanvas);

            banimalParticles = []; // Clear existing particles
            for (let i = 0; i < numBanimalParticles; i++) {
                banimalParticles.push(new BanimalParticle());
            }
        }

        window.animateBanimalCanvas = function() {
            if (!banimalCtx) return; // Exit if context is not available

            banimalCtx.fillStyle = 'rgba(255, 255, 255, 0.02)';
            banimalCtx.fillRect(0, 0, banimalCanvas.width, banimalCanvas.height);

            for (let i = 0; i < banimalParticles.length; i++) {
                banimalParticles[i].update();
                banimalParticles[i].draw();
            }
            banimalAnimationFrameId = requestAnimationFrame(window.animateBanimalCanvas);
        }

        window.resizeBanimalCanvas = function() {
            if (banimalCanvas) {
                banimalCanvas.width = window.innerWidth;
                banimalCanvas.height = window.innerHeight;
            }
        }


        // --- Data Definitions for Settings (from provided template) ---
        const sectorList = {
            "mining": { name: "⛏️ Mining & Resources" },
            "admin-panel": { name: "⚙️ CodeNest™ Central Hub" },
            "ritual-culture": { name: "☯ Ritual & Culture" } // Added for RiteNest
        };

        const companyData = {
            "ritenest-corp": { // This would ideally be dynamically loaded or passed in a real app
                name: "RiteNest Corporation",
                sector_key: "ritual-culture", // Changed to ritual-culture
                details: {
                    "Location": "Global",
                    "CEO": "Global Lead",
                    "Primary Contact": "operations@ritenest.faa.zone",
                    "Deployment Servers": "Global (Managed by Fruitful Global)",
                    "Active Licenses": "All Sector Protocols",
                    "Compliance Standards": "Global Standards",
                    "Security Audit": "Bi-annual",
                    "System Uptime (YTD)": "99.99%",
                    "VaultMesh Integration": "Full",
                    "ClaimRoot Integration": "Full"
                }
            },
            "culturemesh-ltd": { // Example of another company, could be dynamic
                name: "CultureMesh Ltd.",
                sector_key: "ritual-culture",
                details: {
                    "Location": "Global",
                    "CEO": "Culture Lead",
                    "Primary Contact": "support@culturemesh.com",
                    "Deployment Servers": "Global (Cloud-based)",
                    "Active Licenses": "Specific Protocols",
                    "Compliance Standards": "Regional Standards",
                    "Security Audit": "Annual",
                    "System Uptime (YTD)": "99.8%",
                    "VaultMesh Integration": "Partial",
                    "ClaimRoot Integration": "Enabled"
                }
            }
        };

        const appData = {
            user: {
                displayName: "RiteNest Admin", // Changed to RiteNest
                email: "admin@ritenest.faa.zone", // Changed to RiteNest
                defaultRegion: "global",
                autoClaim: "yes"
            },
            dnsRecords: [
                { type: 'A', name: '@', value: '203.0.113.45', ttl: 'Auto' },
                { type: 'CNAME', name: 'www', value: '@', ttl: 'Auto' },
                { type: 'MX', name: '@', value: 'mail.ritenest.faa.zone (Priority 10)', ttl: 'Auto' }, // Changed to RiteNest
                { type: 'TXT', name: '@', value: 'v=spf1 include:ritenest.faa.zone ~all', ttl: 'Auto' }, // Changed to RiteNest
            ],
            emailAccounts: [
                { email: 'operations@ritenest.faa.zone', status: 'Active' }, // Changed to RiteNest
                { email: 'support@ritenest.faa.zone', status: 'Active' }, // Changed to RiteNest
                { email: 'billing@ritenest.faa.zone', status: 'Suspended' }, // Changed to RiteNest
            ],
            domains: [
                { name: 'ritenest.faa.zone', type: 'Primary' }, // Changed to RiteNest
                { name: 'app.ritenest.faa.zone', type: 'Subdomain' }, // Changed to RiteNest
                { name: 'data.ritenest.faa.zone', type: 'Subdomain' }, // Changed to RiteNest
            ],
        };

        // --- Utility Functions for Settings ---

        // Settings View Logic
        function loadSettings() {
            // Ensure elements exist before trying to set their values
            const displayNameInput = document.getElementById('displayName');
            const emailInput = document.getElementById('email');
            const defaultRegionSelect = document.getElementById('defaultRegion');
            const autoClaimSettingSelect = document.getElementById('autoClaimSetting');

            if (displayNameInput) displayNameInput.value = appData.user.displayName;
            if (emailInput) emailInput.value = appData.user.email;
            if (defaultRegionSelect) defaultRegionSelect.value = appData.user.defaultRegion;
            if (autoClaimSettingSelect) autoClaimSettingSelect.value = appData.user.autoClaim;

            // Render DNS records and email accounts
            renderDnsRecords();
            renderEmailAccounts();
            renderDomains();
            renderSettingsCompanySelection(); // Render company selection for settings
        }

        // Settings Tab Navigation Logic
        function showSettingsTab(tabId) {
            // Hide all sub-views
            document.querySelectorAll('#settings .settings-sub-view').forEach(view => {
                view.classList.add('hidden');
            });
            // Show the selected sub-view
            document.getElementById(`settings-${tabId}`).classList.remove('hidden');

            // Update active button state
            document.querySelectorAll('#settings .settings-tab-btn').forEach(btn => {
                if (btn.getAttribute('data-settings-tab') === tabId) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });

            // Re-render domain/email/dns data if switching to that tab
            if (tabId === 'domains') {
                renderDnsRecords();
                renderEmailAccounts();
                renderDomains();
                renderSettingsCompanySelection(); // Ensure selection is rendered on tab switch
            }
        }
        window.showSettingsTab = showSettingsTab; // Make global for direct calls from HTML

        // Render DNS Records
        function renderDnsRecords() {
            const dnsTableBody = document.getElementById('dnsRecordsTableBody');
            if (!dnsTableBody) return;
            dnsTableBody.innerHTML = '';
            appData.dnsRecords.forEach(record => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="font-semibold">${record.type}</td>
                    <td>${record.name}</td>
                    <td>${record.value}</td>
                    <td>${record.ttl}</td>
                    <td class="text-right">
                        <button class="text-blue-500 hover:text-blue-700 text-sm mr-2" onclick="window.showMessage('Edit DNS', 'Edit functionality for ${record.name} coming soon!')">Edit</button>
                        <button class="text-red-500 hover:text-red-700 text-sm" onclick="window.showMessage('Delete DNS', 'Delete functionality for ${record.name} coming soon!')">Delete</button>
                    </td>
                `;
                dnsTableBody.appendChild(row);
            });
        }

        // Render Domains
        function renderDomains() {
            const domainList = document.getElementById('domainList');
            const addonDomainTargetSelect = document.getElementById('addonDomainTarget');
            // Populate newEmailDomain select with available domains
            const newEmailDomainSelect = document.getElementById('newEmailDomain');

            if (!domainList || !addonDomainTargetSelect || !newEmailDomainSelect) return;
            
            domainList.innerHTML = ''; // Clear existing
            addonDomainTargetSelect.innerHTML = '<option value="">Select Primary Domain</option>';
            newEmailDomainSelect.innerHTML = ''; // Clear existing options

            appData.domains.forEach(domain => {
                const listItem = document.createElement('li');
                const statusIcon = domain.type.includes('Pending') ? 'fas fa-hourglass-half text-yellow-500' : 'fas fa-check-circle text-green-500';
                listItem.innerHTML = `<i class="${statusIcon} mr-2"></i> ${domain.name} (${domain.type})`;
                domainList.appendChild(listItem);

                // Populate add-on domain select only with primary/active domains
                if (domain.type.includes('Primary') || domain.type.includes('Subdomain')) {
                    const option = document.createElement('option');
                    option.value = domain.name;
                    option.textContent = domain.name;
                    addonDomainTargetSelect.appendChild(option);

                    // Also add to newEmailDomainSelect
                    const emailDomainOption = document.createElement('option');
                    emailDomainOption.value = domain.name;
                    emailDomainOption.textContent = domain.name;
                    newEmailDomainSelect.appendChild(emailDomainOption);
                }
            });
        }


        // Render Email Accounts
        function renderEmailAccounts() {
            const emailAccountsTableBody = document.getElementById('emailAccountsTableBody');
            if (!emailAccountsTableBody) return;
            emailAccountsTableBody.innerHTML = '';
            appData.emailAccounts.forEach(account => {
                const row = document.createElement('tr');
                const statusClass = account.status === 'Active' ? 'text-green-500' : 'text-yellow-500';
                row.innerHTML = `
                    <td class="font-semibold">${account.email}</td>
                    <td><span class="${statusClass}">${account.status}</span></td>
                    <td class="text-right">
                        <button class="text-blue-500 hover:text-blue-700 text-sm mr-2" onclick="window.showMessage('Edit Email', 'Edit email ${account.email} functionality coming soon!')">Edit</button>
                        <button class="text-red-500 hover:text-red-700 text-sm" onclick="window.showMessage('Delete Email', 'Delete email ${account.email} functionality coming soon!')">Delete</button>
                        <button class="form-action-button text-xs px-3 py-2 mt-2 ml-2" onclick="window.openEmailDraftModal('${account.email}')">
                            ✨ Draft Email
                        </button>
                    </td>
                `;
                emailAccountsTableBody.appendChild(row);
            });
        }

        // Render company selection cards for settings panel
        function renderSettingsCompanySelection() {
            const settingsCompanySelectionGrid = document.getElementById('settingsCompanySelectionGrid');
            if (settingsCompanySelectionGrid) {
                settingsCompanySelectionGrid.innerHTML = ''; // Clear previous selections
                // Filter companyData to only show companies in the "ritual-culture" sector
                const filteredCompanies = Object.entries(companyData).filter(([key, company]) => company.sector_key === "ritual-culture");

                filteredCompanies.forEach(([key, company]) => {
                    const card = document.createElement('div');
                    card.className = 'company-select-card p-4 rounded-lg text-center shadow-md cursor-pointer'; // Using RiteNest theme classes
                    card.innerHTML = `
                        <h3 class="text-lg font-bold">${company.name}</h3>
                        <p class="text-xs">Sector: ${sectorList[company.sector_key] ? sectorList[company.sector_key].name : 'N/A'}</p>
                    `;
                    card.onclick = () => window.renderSettingsCompanyDetails(key);
                    settingsCompanySelectionGrid.appendChild(card);
                });
            }
        }

        // Render detailed company information in settings
        window.renderSettingsCompanyDetails = function(companyKey) {
            const company = companyData[companyKey];
            const detailsOutput = document.getElementById('settingsCompanyDetailsOutput');
            if (!company || !detailsOutput) return;

            detailsOutput.innerHTML = `
                <h4 class="text-xl font-bold mb-4">${company.name} Infrastructure Details</h4>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    ${Object.entries(company.details).map(([key, value]) => `
                        <div class="bg-ritenest-light-bg p-4 rounded-md border border-ritenest-border">
                            <strong class="text-ritenest-accent">${key}:</strong> ${value}
                        </div>
                    `).join('')}
                </div>
                <button class="primary-btn mt-4 bg-red-600 hover:bg-red-700" onclick="window.showMessage('Simulation', 'Advanced company management tools coming soon!', true)">
                    <i class="fas fa-cogs mr-1"></i> Manage Company Infrastructure
                </button>
            `;
            detailsOutput.classList.remove('hidden');
        };

        // --- Email Draft Modal (NEW) ---
        let currentEmailForDraft = ''; // Store the email being drafted for

        window.openEmailDraftModal = function(emailAddress) {
            currentEmailForDraft = emailAddress;
            const modal = document.getElementById('emailDraftModal');
            const modalTitle = document.getElementById('emailDraftTitle');
            const emailDraftTo = document.getElementById('emailDraftTo');
            const emailPurposeInput = document.getElementById('emailPurposeInput');
            const generatedEmailDraftOutput = document.getElementById('generatedEmailDraftOutput');
            const emailDraftStatus = document.getElementById('emailDraftStatus');

            if (modal && modalTitle && emailDraftTo && emailPurposeInput && generatedEmailDraftOutput && emailDraftStatus) {
                modalTitle.textContent = `Draft Email for ${emailAddress}`;
                emailDraftTo.textContent = emailAddress;
                emailPurposeInput.value = '';
                generatedEmailDraftOutput.value = '';
                emailDraftStatus.classList.add('hidden');
                modal.classList.add('active');
            }
        };

        window.hideEmailDraftModal = function() {
            document.getElementById('emailDraftModal')?.classList.remove('active');
            currentEmailForDraft = '';
        };

        // --- Gemini API Call Function (Simplified for Template) ---
        window.callGeminiAPI = async function(prompt, targetElementId, statusElementId, buttonElement, type) {
            const targetElement = document.getElementById(targetElementId);
            const statusElement = document.getElementById(statusElementId);
            
            if (!targetElement || !statusElement || !buttonElement) {
                console.error("Missing target, status element, or button element for Gemini API call.");
                return null;
            }

            statusElement.textContent = "Generating...";
            statusElement.classList.remove('hidden');
            targetElement.classList.add('hidden'); // Hide output until ready
            buttonElement.disabled = true;
            buttonElement.innerHTML = `<span class="inline-block border-4 border-t-ritenest-primary border-ritenest-border rounded-full w-5 h-5 animate-spin"></span>`; // RiteNest spinner colors

            try {
                // Simulate API call for this template
                let simulatedResponse = "";
                if (type === 'Explain DNS Type') {
                    const dnsType = document.getElementById('dnsRecordTypeInput').value.trim(); // Get dnsType from input
                    simulatedResponse = `A ${dnsType} record is used for... (Simulated Explanation)`; 
                } else if (type === 'Draft Email') {
                    const emailPurpose = document.getElementById('emailPurposeInput').value.trim(); // Get emailPurpose from input
                    simulatedResponse = `Subject: Regarding your ${emailPurpose}
Dear User,

This is a simulated email draft based on your request.
Purpose: ${emailPurpose}

Best regards,
Your RiteNest Team`; // Updated team name
                }

                targetElement.innerHTML = simulatedResponse;
                targetElement.classList.remove('hidden');
                statusElement.textContent = "Generation complete!";
                return simulatedResponse;

            } catch (error) {
                statusElement.textContent = "Error: API call failed.";
                console.error("Error calling Gemini API:", error);
                return null;
            } finally {
                buttonElement.disabled = false;
                let originalButtonText = '';
                if (type === 'Explain DNS Type') {
                    originalButtonText = 'Explain DNS Type';
                } else if (type === 'Draft Email') {
                    originalButtonText = 'Generate Draft';
                }
                buttonElement.innerHTML = `✨ ${originalButtonText}`;
                setTimeout(() => statusElement.classList.add('hidden'), 3000);
            }
        };


        // --- Initial Load Functions ---
        document.addEventListener('DOMContentLoaded', () => {
            // Firebase Initialization (existing from previous dashboard)
            if (Object.keys(firebaseConfig).length > 0) {
                app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);

                onAuthStateChanged(auth, async (user) => {
                    if (user) {
                        userId = user.uid;
                        console.log("Firebase Auth: Signed in as", userId);
                        // Here you would set up Firestore listeners for RiteNest specific collections
                        // e.g., onSnapshot(collection(db, `artifacts/${appId}/users/${userId}/ritenest/rituals`), (snapshot) => { /* update simulatedRitualData */ });
                        // For this demo, we'll continue using local simulated data.
                    } else {
                        // Attempt custom token or anonymous sign-in if no user
                        if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                            try { await signInWithCustomToken(auth, __initial_auth_token); } catch (error) { console.warn("Firebase Auth: Custom token sign-in failed.", error); await signInAnonymously(auth); }
                        } else {
                            await signInAnonymously(auth);
                        }
                    }
                });
            } else {
                console.warn("Firebase config not found. Running in demo mode without persistence.");
            }

            // Initialize landing page features
            window.updateSharePrice();
            setInterval(window.updateSharePrice, 9000); // Update share price every 9 seconds
            window.initializeBrandChart();

            // Set up main navigation listeners
            document.querySelectorAll('.header-nav-item').forEach(link => {
                link.addEventListener('click', (event) => {
                    // Prevent default anchor behavior if it's a JS-handled navigation
                    if (link.getAttribute('href') === 'javascript:void(0)') {
                        event.preventDefault();
                    }
                    // The showMainSection is called directly from the onclick attribute in HTML
                });
            });


            // Set up dashboard tab navigation listeners
            document.querySelectorAll('#ritenest-dashboard-wrapper .dashboard-sidebar-nav-item').forEach(button => {
                button.addEventListener('click', () => {
                    window.showDashboardSectionTab(button.dataset.tab);
                });
            });

            // Set up form submission listeners for dashboard sections
            document.getElementById('addTotemForm')?.addEventListener('submit', window.handleAddTotemForm);
            document.getElementById('uploadMediaForm')?.addEventListener('submit', window.handleUploadMediaForm);
            document.getElementById('verifyProvenanceForm')?.addEventListener('submit', window.handleVerifyProvenanceForm);
            document.getElementById('generateGlyphTagForm')?.addEventListener('submit', window.handleGenerateGlyphTagForm);
            document.getElementById('newDiscussionForm')?.addEventListener('submit', window.handleNewDiscussionForm);


            // Initial rendering of all sections' dynamic content for the dashboard
            // These will be called when their respective tabs are activated.
            // Calling them here ensures initial data is ready.
            window.updateOverviewMetrics();
            window.updateRitualTypeChart();
            window.updateDocumentationProgressChart();
            window.updateProgressMetrics();
            window.populateProgressTable();
            window.updateOverallStatusChart();
            window.updateMonthlyRateChart();
            window.renderTotemList();
            window.renderMediaList();
            window.renderProvenanceChainDisplay();
            window.renderDiscussionPosts();
            window.renderLearningResources();
            window.updateAnalyticsRitualTypeChart();
            window.updateContributorActivityChart();

            // Show the default main section (Dashboard)
            window.showMainSection('ritenest-dashboard-wrapper');
            const dashboardLink = document.querySelector(`.header-nav-item[onclick*="ritenest-dashboard-wrapper"]`);
            if (dashboardLink) {
                dashboardLink.classList.add('header-nav-active');
            }

            // Setup DNS Explain button listener (moved here for correct scope)
            document.getElementById('explainDnsBtn')?.addEventListener('click', async (event) => {
                const dnsType = document.getElementById('dnsRecordTypeInput').value.trim();
                const button = event.currentTarget;
                if (!dnsType) {
                    window.showMessage('Input Required', 'Please enter a DNS record type (e.g., A, CNAME, MX) to explain.');
                    return;
                }
                const prompt = `Explain what a "${dnsType}" DNS record is, its primary purpose, and a typical use case. Keep the explanation concise and easy to understand for a non-expert.`;
                await window.callGeminiAPI(prompt, 'dnsExplanationOutput', 'dnsExplainStatus', button, 'Explain DNS Type');
            });

            // Event listener for Create Email Button (moved here for correct scope)
            document.getElementById('createEmailBtn')?.addEventListener('click', async (event) => {
                const emailPrefix = String(document.getElementById('newEmailPrefix').value).trim();
                const emailDomain = String(document.getElementById('newEmailDomain').value).trim();
                const fullEmail = `${emailPrefix}@${emailDomain}`;

                if (!emailPrefix || !emailDomain) {
                    window.showMessage('Input Required', 'Please enter both an email prefix and domain to create a new email account.');
                    return;
                }

                window.showMessage('Email Account Creation', `Creating email account: ${fullEmail} (Simulated).`);
                appData.emailAccounts.push({ email: fullEmail, status: 'Active' });
                renderEmailAccounts(); // Re-render table
                document.getElementById('newEmailPrefix').value = ''; // Clear prefix

                // Open the email draft modal automatically after simulated creation
                window.openEmailDraftModal(fullEmail);
            });

            document.getElementById('generateEmailDraftBtn')?.addEventListener('click', async (event) => {
                const emailPurpose = document.getElementById('emailPurposeInput').value.trim();
                const button = event.currentTarget;
                if (!emailPurpose) {
                    window.showMessage('Input Required', 'Please enter a purpose for the email.');
                    return;
                }
                const prompt = `Draft a professional email (max 200 words) for the purpose of "${emailPurpose}" from the email address "${currentEmailForDraft}". Focus on a clear and polite tone. Provide only the email body.`;
                await window.callGeminiAPI(prompt, 'generatedEmailDraftOutput', 'emailDraftStatus', button, 'Draft Email');
            });
        });
    </script>
</body>
</html>
