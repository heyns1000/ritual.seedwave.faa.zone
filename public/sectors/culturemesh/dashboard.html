<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>☯ FAA.ZONE™ CultureMesh Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        /* CultureMesh Specific Color Palette */
        :root {
            --culturemesh-primary: #6A0572; /* Deep Purple */
            --culturemesh-secondary: #A820A3; /* Medium Purple */
            --culturemesh-accent: #F4D03F; /* Vibrant Yellow */
            --culturemesh-light-bg: #F8F0FA; /* Very light purple/pink */
            --culturemesh-card-bg: #E6D0E8; /* Lighter purple */
            --culturemesh-dark-text: #2C003E; /* Dark Purple text */
            --culturemesh-muted-text: #5B3A6E; /* Muted Purple text */
            --culturemesh-border: #C2A4C5; /* Light purple border */
            --culturemesh-button-hover: #4D0355; /* Darker purple on hover */
            /* Traditional palette for shared sections */
            --traditional-bg: #fcf8f0;
            --traditional-border: #d4b499;
            --traditional-text-heading: #5c4033;
            --traditional-text-body: #7a614e;
            --traditional-highlight: #e0a35e;

            /* Dashboard specific colors mirroring RiteNest, but with CultureMesh palette */
            --primary-color: var(--culturemesh-primary);
            --secondary-color: var(--culturemesh-secondary);
            --hover-bg-light: var(--culturemesh-card-bg); /* Lighter background for hover */
            --dashboard-main-content-bg: var(--culturemesh-light-bg);
            --dashboard-sidebar-bg: var(--culturemesh-card-bg);
            --dashboard-primary-text: var(--culturemesh-primary);
            --dashboard-dark-text: var(--culturemesh-dark-text);
            --dashboard-muted-text: var(--culturemesh-muted-text);
            --dashboard-border-dark: var(--culturemesh-border); /* Border for dark elements like inputs */
        }

        /* Base Styles */
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--culturemesh-light-bg);
            color: var(--culturemesh-dark-text);
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* Custom Scrollbar Styling for Light Theme */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: var(--culturemesh-light-bg); /* Light purple track */
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: var(--culturemesh-border); /* Light purple thumb */
            border-radius: 10px;
            transition: background 0.3s ease;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: var(--culturemesh-card-bg); /* Lighter on hover */
        }
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* Header - Sleek and modern, CultureMesh themed */
        header {
            background-color: var(--culturemesh-primary);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            padding-top: 1.2rem;
            padding-bottom: 1.2rem;
            box-shadow: 0 2px 15px rgba(0,0,0,0.2);
            position: sticky;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 50;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: white;
        }
        header h1 {
            color: white;
            font-weight: 800;
            font-size: 1.6rem;
            letter-spacing: -0.03em;
        }
        header nav a {
            color: var(--culturemesh-card-bg); /* Lighter purple for nav links */
            font-size: 0.95rem;
            font-weight: 500;
            padding: 0.6rem 1rem;
            border-radius: 8px;
            transition: all 0.2s ease-in-out;
            position: relative;
        }
        header nav a:hover {
            color: white;
            background-color: var(--culturemesh-button-hover);
            transform: translateY(-2px);
        }
        header nav a::after {
            content: '';
            position: absolute;
            left: 50%;
            bottom: -2px;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--culturemesh-secondary), var(--culturemesh-accent)); /* Purple-Yellow gradient underline */
            transition: all 0.3s ease-out;
            transform: translateX(-50%);
            border-radius: 1px;
        }
        header nav a:hover::after {
            width: 80%;
        }
        header nav a.primary-btn { /* Dashboard button style */
            background: linear-gradient(90deg, var(--culturemesh-secondary), var(--culturemesh-accent));
            color: white;
            padding: 0.7rem 1.4rem;
            border-radius: 25px;
            font-weight: 700;
            font-size: 0.95rem;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        }
        header nav a.primary-btn:hover {
            filter: brightness(1.15);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3), 0 0 15px rgba(168, 32, 163, 0.5); /* Purple glow */
        }
        .header-nav-active {
            color: white !important;
            font-weight: 700 !important;
        }
        .header-nav-active::after {
            width: 100% !important;
            background: linear-gradient(90deg, var(--culturemesh-secondary), var(--culturemesh-accent)) !important; /* Active purple-yellow underline */
        }

        /* Hero Section - Dynamic and impactful, CultureMesh themed */
        .hero-section {
            background: linear-gradient(135deg, var(--culturemesh-primary), var(--culturemesh-secondary), var(--culturemesh-accent)); /* Purple-Yellow gradient */
            min-height: 80vh;
            padding: 8rem 2rem;
            border-bottom-left-radius: 60px;
            border-bottom-right-radius: 60px;
            box-shadow: 0 15px 50px rgba(0,0,0,0.3);
            color: white;
            position: relative;
            overflow: hidden;
            animation: fadeInScale 1s ease-out;
        }
        .hero-section::before {
            content: '';
            position: absolute;
            top: -20%;
            left: -20%;
            width: 140%;
            height: 140%;
            background: radial-gradient(circle at 50% 50%, rgba(168, 32, 163, 0.1), transparent 70%),
                        radial-gradient(circle at 20% 80%, rgba(244, 208, 63, 0.1), transparent 70%);
            animation: rotateAndZoom 40s linear infinite;
            opacity: 0.6;
            z-index: 1;
        }
        @keyframes fadeInScale {
            from { opacity: 0; transform: scale(0.98); }
            to { opacity: 1; transform: scale(1); }
        }
        @keyframes rotateAndZoom {
            0% { transform: rotate(0deg) scale(1); }
            50% { transform: rotate(180deg) scale(1.05); }
            100% { transform: rotate(360deg) scale(1); }
        }
        .hero-content {
            z-index: 10;
            position: relative;
        }
        .hero-section h2 {
            font-size: 4.5rem;
            font-weight: 900;
            letter-spacing: -0.04em;
            line-height: 1.05;
            text-shadow: 0 4px 15px rgba(0,0,0,0.5);
        }
        .hero-section h2 span {
            background: linear-gradient(90deg, var(--culturemesh-accent), #FF8C00); /* Yellow-Orange gradient for "Flourish" */
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .hero-section p {
            font-size: 1.3rem;
            font-weight: 300;
            color: var(--culturemesh-card-bg); /* Lighter purple for body text */
            margin-top: 2rem;
            margin-bottom: 3rem;
            max-width: 900px;
        }
        .cta-button {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: linear-gradient(90deg, var(--culturemesh-secondary), var(--culturemesh-accent)); /* Purple-Yellow gradient */
            color: white;
            padding: 1rem 2.5rem;
            border-radius: 30px;
            font-weight: 700;
            font-size: 1.15rem;
            transition: all 0.3s cubic-bezier(0.2, 0.8, 0.2, 1);
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            letter-spacing: 0.05em;
            text-transform: uppercase;
        }
        .cta-button:hover {
            filter: brightness(1.2);
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3), 0 0 25px rgba(168, 32, 163, 0.8); /* Purple glow */
        }
        .cta-button span {
            display: inline-block;
            margin-left: 0.5rem;
            animation: bounceEmoji 1s infinite alternate;
        }
        @keyframes bounceEmoji {
            from { transform: translateY(0); }
            to { transform: translateY(-3px); }
        }


        /* Sections - Layered and defined, CultureMesh themed */
        .landing-section {
            padding: 8rem 2rem;
            background-color: var(--culturemesh-light-bg);
            box-shadow: inset 0 5px 20px rgba(0,0,0,0.05);
            border-bottom: 1px solid var(--culturemesh-border);
            color: var(--culturemesh-dark-text);
        }
        .landing-section:nth-of-type(odd) {
            background-color: var(--culturemesh-card-bg); /* Slightly different light purple for odd sections */
        }
        .landing-section:last-of-type {
            border-bottom: none;
        }
        .landing-section h2, .landing-section h3 {
            color: var(--culturemesh-dark-text);
            font-weight: 800;
            letter-spacing: -0.03em;
            margin-bottom: 2.5rem;
            font-size: 2.8rem;
            text-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .landing-section p {
            color: var(--culturemesh-muted-text);
            font-size: 1.15rem;
            line-height: 1.6;
        }

        /* Feature Cards - Glowing and interactive, CultureMesh themed */
        .feature-card {
            background-color: var(--culturemesh-light-bg); /* Use light purple for features */
            border-radius: 16px;
            padding: 2.5rem;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transition: transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1), box-shadow 0.3s ease-in-out, border-color 0.3s ease;
            border: 1px solid var(--culturemesh-border);
        }
        .feature-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2), 0 0 25px rgba(244, 208, 63, 0.5); /* Yellow glow on hover */
            border-color: var(--culturemesh-accent); /* Vibrant yellow border on hover */
        }
        .feature-card div:first-child { /* Icon */
            font-size: 3rem;
            margin-bottom: 1.5rem;
            color: var(--culturemesh-accent); /* Vibrant yellow for icons */
            text-shadow: 0 0 15px rgba(244, 208, 63, 0.6); /* Icon glow */
        }
        .feature-card h4 {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--culturemesh-dark-text);
            margin-bottom: 0.75rem;
        }
        .feature-card p {
            font-size: 1rem;
            color: var(--culturemesh-muted-text);
        }

        /* Share Signal Section - Digital display feel, CultureMesh themed */
        #shareprice {
            background-color: var(--culturemesh-card-bg);
            color: var(--culturemesh-dark-text);
            padding: 5rem 2rem;
            border-bottom: 1px solid var(--culturemesh-border);
            box-shadow: inset 0 5px 20px rgba(0,0,0,0.05);
        }
        #shareprice h2 {
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--culturemesh-dark-text);
        }
        #price {
            font-size: 4rem;
            font-weight: 800;
            color: var(--culturemesh-primary); /* Deep purple for price */
            letter-spacing: -0.03em;
            text-shadow: 0 0 20px rgba(106, 5, 114, 0.6); /* Strong glow */
            animation: pricePulse 2s infinite alternate;
        }
        @keyframes pricePulse {
            from { text-shadow: 0 0 10px rgba(106, 5, 114, 0.4); }
            to { text-shadow: 0 0 25px rgba(106, 5, 114, 0.8); }
        }
        #timestamp {
            color: var(--culturemesh-muted-text);
            font-size: 0.9rem;
        }

        /* Seedwave Growth - Dynamic chart, CultureMesh themed */
        #seedwave {
            background-color: var(--culturemesh-light-bg);
            padding: 6rem 2rem;
            border-bottom: 1px solid var(--culturemesh-border);
            box-shadow: inset 0 5px 20px rgba(0,0,0,0.05);
        }
        #seedwave h2 {
            font-size: 2.8rem;
            font-weight: 800;
            margin-bottom: 3rem;
            color: var(--culturemesh-dark-text);
        }
        #seedwave .w-full {
            background-color: var(--culturemesh-card-bg);
            border: 1px solid var(--culturemesh-border);
            padding: 2rem;
            border-radius: 16px;
            box-shadow: 0 5px 25px rgba(0,0,0,0.1);
        }
        /* Chart specific colors for CultureMesh */
        #brandChart {
            border-color: var(--culturemesh-accent) !important;
            background-color: rgba(244, 208, 63, 0.15) !important; /* Yellow with transparency */
            point-background-color: var(--culturemesh-accent) !important;
            point-border-color: var(--culturemesh-card-bg) !important;
        }

        /* Founder's Note - Evocative text block, CultureMesh themed */
        .landing-section.bg-gray-700 { /* This class name is from original RiteNest template */
            background-color: var(--culturemesh-card-bg); /* Lighter purple */
            color: var(--culturemesh-dark-text);
            padding: 6rem 2rem;
            border-bottom: 1px solid var(--culturemesh-border);
            box-shadow: inset 0 5px 20px rgba(0,0,0,0.05);
        }
        .landing-section.bg-gray-700 h2 {
            font-size: 3rem;
            font-weight: 800;
            color: var(--culturemesh-dark-text);
            text-shadow: 0 2px 10px rgba(0,0,0,0.1);
            animation: textGlow 3s infinite alternate;
        }
        @keyframes textGlow {
            from { text-shadow: 0 0 5px rgba(106, 5, 114, 0.2); }
            to { text-shadow: 0 0 15px rgba(106, 5, 114, 0.5); }
        }
        .landing-section.bg-gray-700 p {
            font-size: 1.2rem;
            color: var(--culturemesh-muted-text);
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }
        .landing-section.bg-gray-700 p.italic {
            color: var(--culturemesh-muted-text); /* Muted text */
            font-style: italic;
        }
        .landing-section.bg-gray-700 p.font-semibold {
            color: var(--culturemesh-accent); /* Vibrant yellow signature */
            font-weight: 600;
            margin-top: 2.5rem;
            text-shadow: 0 0 8px rgba(244, 208, 63, 0.4);
        }

        /* Vault Terminal Access - Futuristic interface, CultureMesh themed */
        #vault-access {
            background-color: var(--culturemesh-light-bg);
            padding: 6rem 2rem;
            border-bottom: 1px solid var(--culturemesh-border);
            box-shadow: inset 0 5px 20px rgba(0,0,0,0.05);
        }
        #vault-access h3 {
            font-size: 2.8rem;
            font-weight: 800;
            color: var(--culturemesh-dark-text);
            margin-bottom: 3rem;
            text-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        #vault-access .w-full.h-\[800px\] { /* Iframe container */
            background-color: #1a1b20; /* Dark background for iframe */
            border: 3px solid var(--culturemesh-primary); /* Deep purple border */
            border-radius: 12px;
            box-shadow: 0 0 30px rgba(106, 5, 114, 0.5); /* Purple glow */
            overflow: hidden;
        }
        .terminal-btn {
            background-color: var(--culturemesh-card-bg);
            color: var(--culturemesh-primary); /* Deep purple text */
            padding: 1.2rem 1.8rem;
            border-radius: 10px;
            font-weight: 600;
            transition: all 0.2s ease-in-out;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border: 1px solid var(--culturemesh-border);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        .terminal-btn:hover {
            background-color: var(--culturemesh-border); /* Lighter purple on hover */
            color: var(--culturemesh-dark-text);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2), 0 0 20px rgba(244, 208, 63, 0.6); /* Yellow glow */
            border-color: var(--culturemesh-accent);
        }
        .terminal-btn.ring { /* Active state */
            border-color: var(--culturemesh-accent); /* Vibrant yellow active ring */
            box-shadow: 0 0 0 3px rgba(244, 208, 63, 0.5);
        }

        /* Sector Scrolls - Grid of glowing links, CultureMesh themed */
        .landing-section.bg-gray-800.text-center { /* This class name is from original RiteNest template */
            background-color: var(--culturemesh-card-bg); /* Lighter purple */
            padding: 6rem 2rem;
            border-bottom: 1px solid var(--culturemesh-border);
            box-shadow: inset 0 5px 20px rgba(0,0,0,0.05);
        }
        .landing-section.bg-gray-800.text-center h2 {
            font-size: 2.8rem;
            font-weight: 800;
            color: var(--culturemesh-dark-text);
            margin-bottom: 3rem;
            text-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .glyph {
            background-color: var(--culturemesh-light-bg); /* Light purple for glyphs */
            color: var(--culturemesh-primary); /* Deep purple text */
            padding: 1rem 1.5rem;
            border-radius: 10px;
            font-weight: 600;
            transition: all 0.2s ease-in-out;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border: 1px solid var(--culturemesh-border);
        }
        .glyph:hover {
            background-color: var(--culturemesh-card-bg); /* Lighter purple on hover */
            color: var(--culturemesh-dark-text);
            transform: translateY(-3px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2), 0 0 15px rgba(244, 208, 63, 0.5); /* Yellow glow */
            border-color: var(--culturemesh-accent);
        }

        /* Treaty Section - Powerful statement, CultureMesh themed */
        #treaty {
            background-color: var(--culturemesh-light-bg);
            padding: 6rem 2rem;
            border-bottom: 1px solid var(--culturemesh-border);
            box-shadow: inset 0 5px 20px rgba(0,0,0,0.05);
        }
        #treaty h2 {
            font-size: 2.8rem;
            font-weight: 800;
            color: var(--culturemesh-dark-text);
            margin-bottom: 2rem;
            text-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        #treaty p {
            font-size: 1.2rem;
            color: var(--culturemesh-muted-text);
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            margin-bottom: 2.5rem;
        }
        #treaty blockquote {
            font-size: 1.8rem;
            color: var(--culturemesh-primary); /* Deep purple for quote */
            font-weight: 700;
            line-height: 1.4;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            text-shadow: 0 0 15px rgba(106, 5, 114, 0.5);
        }
        #treaty blockquote::before, #treaty blockquote::after {
            content: '“';
            font-size: 3em;
            line-height: 0.1;
            vertical-align: -0.4em;
            color: var(--culturemesh-card-bg); /* Lighter purple for quote marks */
            margin-right: 0.1em;
        }
        #treaty blockquote::after {
            content: '”';
            margin-left: 0.05em;
        }

        /* Signal Packet - Hacker console feel, CultureMesh themed */
        .landing-section.py-10.text-xs.text-center { /* This class name is from original RiteNest template */
            background-color: var(--culturemesh-card-bg);
            color: var(--culturemesh-primary);
            padding: 4rem 2rem;
            border-bottom: 1px solid var(--culturemesh-border);
            box-shadow: inset 0 5px 20px rgba(0,0,0,0.05);
        }
        .landing-section.py-10.text-xs.text-center pre {
            background-color: #1a1b20; /* Dark background for code */
            border: 1px solid var(--culturemesh-primary); /* Deep purple border */
            border-radius: 10px;
            padding: 2rem;
            box-shadow: 0 0 20px rgba(106, 5, 114, 0.4); /* Purple glow */
            white-space: pre-wrap;
            word-break: break-all;
            font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;
            font-size: 0.9rem;
            color: var(--culturemesh-secondary); /* Medium purple for code text */
        }

        /* VaultMesh Executive Summary - Structured and powerful, CultureMesh themed */
        #vaultmesh {
            background-color: var(--culturemesh-light-bg);
            color: var(--culturemesh-dark-text);
            padding: 6rem 2rem;
            border-bottom: 1px solid var(--culturemesh-border);
            box-shadow: inset 0 5px 20px rgba(0,0,0,0.05);
        }
        #vaultmesh h2 {
            font-size: 2.8rem;
            font-weight: 800;
            color: var(--culturemesh-dark-text);
            margin-bottom: 2rem;
            text-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        #vaultmesh h2.text-purple-400 { /* This was a purple gradient, now CultureMesh primary-accent gradient */
            background: linear-gradient(90deg, var(--culturemesh-primary), var(--culturemesh-accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        #vaultmesh h3 {
            font-size: 1.6rem;
            font-weight: 700;
            color: var(--culturemesh-dark-text);
            margin-top: 3rem;
            margin-bottom: 1.2rem;
        }
        #vaultmesh p {
            font-size: 1.1rem;
            color: var(--culturemesh-muted-text);
            line-height: 1.6;
        }
        #vaultmesh ul {
            list-style-type: none; /* Remove default bullets */
            padding-left: 0;
            margin-left: 0;
            color: var(--culturemesh-muted-text);
        }
        #vaultmesh ul li {
            font-size: 1.1rem;
            margin-bottom: 0.75rem;
            position: relative;
            padding-left: 1.5rem;
        }
        #vaultmesh ul li::before { /* Custom bullet point */
            content: '•';
            position: absolute;
            left: 0;
            color: var(--culturemesh-accent); /* Vibrant yellow bullet */
            font-size: 1.2em;
            line-height: 1;
            top: 0.1em;
        }
        #vaultmesh ul.list-decimal li::before { /* Ensure decimal still works if applied */
            content: counter(list-item) ".";
            color: var(--culturemesh-primary); /* Deep purple for numbered lists */
        }
        #vaultmesh code {
            background-color: var(--culturemesh-card-bg);
            padding: 0.3em 0.6em;
            border-radius: 6px;
            font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;
            color: var(--culturemesh-primary);
            border: 1px solid var(--culturemesh-border);
        }

        /* About Section - Clean and impactful, CultureMesh themed */
        #about {
            background-color: var(--culturemesh-card-bg); /* Lighter purple */
            color: var(--culturemesh-dark-text);
            padding: 6rem 2rem;
            border-bottom: 1px solid var(--culturemesh-border);
            box-shadow: inset 0 5px 20px rgba(0,0,0,0.05);
        }
        #about h3 {
            font-size: 2.8rem;
            font-weight: 800;
            color: var(--culturemesh-dark-text);
            margin-bottom: 2rem;
            text-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        #about p {
            font-size: 1.2rem;
            color: var(--culturemesh-muted-text);
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Call to Action Section - Bold and inviting, CultureMesh themed */
        #cta-landing {
            background: linear-gradient(135deg, var(--culturemesh-primary), var(--culturemesh-secondary), var(--culturemesh-accent)); /* Purple-Yellow gradient */
            padding: 8rem 2rem;
            color: white;
            text-align: center;
            border-top-left-radius: 60px;
            border-top-right-radius: 60px;
            box-shadow: 0 -15px 50px rgba(0,0,0,0.3);
        }
        #cta-landing h3 {
            font-size: 3.5rem;
            font-weight: 900;
            color: white;
            margin-bottom: 2rem;
            line-height: 1.1;
            text-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        #cta-landing p {
            font-size: 1.3rem;
            color: var(--culturemesh-card-bg);
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            margin-bottom: 3rem;
        }
        #cta-landing .cta-button {
            background: #FFD166; /* Yellow button for contrast */
            color: var(--culturemesh-dark-text);
            padding: 1.2rem 3rem;
            border-radius: 30px;
            font-weight: 800;
            font-size: 1.25rem;
            transition: all 0.3s cubic-bezier(0.2, 0.8, 0.2, 1);
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            letter-spacing: 0.08em;
            text-transform: uppercase;
        }
        #cta-landing .cta-button:hover {
            filter: brightness(1.1);
            transform: translateY(-5px) scale(1.03);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3), 0 0 30px rgba(244, 208, 63, 0.8);
        }

        /* Footer - Subtly integrated, CultureMesh themed */
        footer {
            background-color: var(--culturemesh-primary);
            color: var(--culturemesh-card-bg);
            padding: 2.5rem;
            font-size: 0.9rem;
            border-top: 1px solid rgba(255,255,255,0.2);
            box-shadow: inset 0 5px 15px rgba(0,0,0,0.2);
            text-align: center;
        }
        footer a {
            color: var(--culturemesh-card-bg);
            text-decoration: none;
            transition: color 0.2s ease;
        }
        footer a:hover {
            color: white;
        }

        /* Dashboard Wrapper - Hidden by default, shown by JS */
        #culturemesh-dashboard-wrapper { /* Changed ID */
            background-color: var(--dashboard-main-content-bg);
            min-height: 100vh; /* Ensure it takes full height when active */
        }
        .dashboard-container {
            display: flex;
            flex-grow: 1;
        }
        .dashboard-sidebar {
            width: 256px; /* w-64 */
            padding: 24px; /* p-6 */
            background-color: var(--dashboard-sidebar-bg);
            border-right: 1px solid var(--culturemesh-border);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 16px; /* space-y-4 */
        }
        .dashboard-sidebar-nav-item {
            display: flex;
            align-items: center;
            gap: 12px; /* gap-3 */
            width: 100%;
            padding: 12px; /* p-3 */
            border-radius: 8px; /* rounded-lg */
            font-size: 18px; /* text-lg */
            font-weight: 500; /* font-medium */
            transition: all 0.2s;
            color: var(--dashboard-dark-text);
        }
        .dashboard-sidebar-nav-item:hover {
            background-color: var(--hover-bg-light);
        }
        .dashboard-sidebar-nav-item.active {
            background-color: var(--primary-color);
            color: white;
        }
        .dashboard-main-content {
            flex-grow: 1;
            padding: 32px; /* p-8 */
            background-color: var(--dashboard-main-content-bg);
            overflow-y: auto;
        }
        .dashboard-card {
            padding: 24px; /* p-6 */
            background-color: var(--culturemesh-card-bg); /* Use CultureMesh card bg */
            border-radius: 8px; /* rounded-lg */
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
            border: 1px solid var(--culturemesh-border); /* Use CultureMesh border */
        }
        .dashboard-sub-card {
            padding: 20px; /* p-5 */
            background-color: var(--culturemesh-light-bg); /* a bit lighter purple for internal cards */
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .dashboard-text-light { color: var(--culturemesh-dark-text); }
        .dashboard-muted-text { color: var(--culturemesh-muted-text); }
        .text-accent { color: var(--culturemesh-accent); } /* Used for icons/numbers in dashboard */
        .brand-heading { color: var(--culturemesh-primary); } /* Used for section titles in dashboard */

        /* Tab navigation styles for dashboard internal sections */
        #culturemesh-dashboard-wrapper .tab-nav-item { /* Changed ID */
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            white-space: nowrap;
            background-color: var(--culturemesh-card-bg); /* Default background */
            color: var(--culturemesh-dark-text); /* Default text color */
            border: 1px solid var(--culturemesh-border); /* Default border */
            transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease;
        }
        #culturemesh-dashboard-wrapper .tab-nav-item:hover { /* Changed ID */
            background-color: var(--culturemesh-border); /* Lighter purple on hover */
            color: var(--culturemesh-primary); /* Darker text on hover */
        }
        #culturemesh-dashboard-wrapper .tab-nav-item.active { /* Changed ID */
            background-color: var(--culturemesh-primary); /* Deep purple for active tab */
            color: white; /* Active text color */
            border-color: var(--culturemesh-primary); /* Active border */
            font-weight: 600;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        #culturemesh-dashboard-wrapper .tab-content { /* Changed ID */
            display: none;
        }
        #culturemesh-dashboard-wrapper .tab-content.active { /* Changed ID */
            display: block;
        }

        /* Specific styles for elements within the dashboard sections */
        .api-key-warning {
            color: #ef4444; /* red-500 */
            background-color: #fecaca; /* red-200 */
            border-left: 4px solid #ef4444;
            padding: 1rem;
            margin-top: 1rem;
            font-weight: 600;
        }
        .provenance-step {
            background-color: var(--culturemesh-light-bg); /* Light purple */
            border-left: 4px solid var(--culturemesh-primary); /* Deep purple */
            padding: 1rem;
            border-radius: 0.5rem;
            position: relative;
        }
        .provenance-step::before {
            content: '';
            position: absolute;
            left: -10px;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            background-color: var(--culturemesh-primary); /* Deep purple */
            border-radius: 50%;
            border: 3px solid var(--culturemesh-card-bg); /* Lighter purple border */
        }
        .discussion-post {
            background-color: var(--culturemesh-light-bg); /* Light purple */
            border: 1px solid var(--culturemesh-border);
            border-radius: 0.5rem;
            padding: 1rem;
        }

        /* Responsive adjustments for Dashboard elements */
        @media (max-width: 768px) {
            .dashboard-container {
                flex-direction: column;
            }
            .dashboard-sidebar {
                width: 100%;
                height: auto;
                border-right: none;
                border-bottom: 1px solid var(--culturemesh-border);
                padding-bottom: 1rem;
            }
            .dashboard-sidebar-nav-item {
                justify-content: center;
            }
            .dashboard-main-content {
                width: 100%;
            }
            .grid-cols-2-md {
                grid-template-columns: 1fr;
            }
        }

        /* Banimal Section Styles - Re-themed to fit CultureMesh light theme */
        #banimal-landing-page {
            background: linear-gradient(135deg, var(--culturemesh-light-bg) 0%, var(--culturemesh-card-bg) 100%); /* Light purple gradient */
            color: var(--culturemesh-dark-text);
            border-bottom: 1px solid var(--culturemesh-border);
            box-shadow: inset 0 5px 20px rgba(0,0,0,0.05);
            position: relative; /* Needed for canvas positioning */
            overflow: hidden; /* Hide overflowing canvas particles */
            height: 100vh; /* Take full viewport height */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 2rem;
        }
        #banimal-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.5; /* More subtle */
            z-index: 0;
        }
        .banimal-hero-content {
            position: relative;
            z-index: 1; /* Ensure content is above canvas */
            max-width: 800px;
            margin: 0 auto;
        }
        .banimal-hero-content h1 {
            color: var(--culturemesh-primary); /* Deep purple for Banimal™ */
            text-shadow: 0 4px 10px rgba(106, 5, 114, 0.1);
            font-size: 3.5rem;
            font-weight: 900;
            line-height: 1.2;
            margin-bottom: 1rem;
        }
        .banimal-hero-content h1 span {
            color: var(--culturemesh-secondary); /* Medium purple for slogan */
            display: block;
            font-size: 0.7em;
            font-weight: 700;
        }
        .banimal-hero-content p {
            color: var(--culturemesh-muted-text);
            font-size: 1.15rem;
            line-height: 1.6;
            margin-bottom: 2rem;
        }
        .shop-now-button {
            background: linear-gradient(45deg, var(--culturemesh-accent), #FF8C00); /* Yellow/Orange for contrast */
            box-shadow: 0 8px 25px rgba(244, 208, 63, 0.4);
            border: 1px solid rgba(244, 208, 63, 0.5);
            color: var(--culturemesh-dark-text); /* Dark text on light button */
        }
        .shop-now-button:hover {
            background: linear-gradient(45deg, #FF8C00, var(--culturemesh-accent));
            box-shadow: 0 10px 30px rgba(244, 208, 63, 0.6);
            border-color: rgba(244, 208, 63, 0.8);
        }

        /* Modal Styles */
        .modal {
            position: fixed;
            z-index: 100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.6);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .modal-content {
            background-color: var(--culturemesh-card-bg); /* CultureMesh card bg */
            margin: auto;
            padding: 20px;
            border: 1px solid var(--culturemesh-border);
            border-radius: 10px;
            width: 80%;
            max-width: 500px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            text-align: center;
            position: relative;
        }
        .close-button {
            color: var(--culturemesh-dark-text);
            position: absolute;
            top: 10px;
            right: 20px;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        .close-button:hover,
        .close-button:focus {
            color: var(--culturemesh-primary);
            text-decoration: none;
            cursor: pointer;
        }

        /* Settings Tab Navigation - CultureMesh Themed */
        #settings .settings-tab-btn {
            padding: 0.75rem 1.25rem;
            background-color: var(--culturemesh-light-bg); /* Light purple for default tab */
            border: 1px solid var(--culturemesh-border);
            color: var(--culturemesh-dark-text);
            font-weight: 500;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.2s ease;
            border-radius: 8px 8px 0 0;
        }
        #settings .settings-tab-btn:hover {
            color: var(--culturemesh-primary);
            background-color: var(--culturemesh-card-bg); /* Even lighter purple on hover */
            border-color: var(--culturemesh-primary);
        }
        #settings .settings-tab-btn.active {
            color: white;
            background-color: var(--culturemesh-primary); /* Deep purple for active tab */
            border-color: var(--culturemesh-primary);
            font-weight: 600;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        /* Settings Panel Styling - CultureMesh Themed */
        #settings .panel {
            background-color: var(--culturemesh-card-bg); /* Lighter purple for panels */
            border: 1px solid var(--culturemesh-border);
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            color: var(--culturemesh-dark-text);
        }
        #settings .panel h3, #settings .panel h4 {
            color: var(--culturemesh-primary); /* Deep purple for headings */
        }
        #settings .panel p {
            color: var(--culturemesh-muted-text);
        }

        /* Form Controls - CultureMesh Themed */
        #settings .form-control label {
            color: var(--culturemesh-dark-text);
        }
        #settings .form-control input[type="text"],
        #settings .form-control input[type="email"],
        #settings .form-control input[type="password"],
        #settings .form-control select,
        #settings .form-control textarea,
        #settings .form-control input[type="number"] {
            background-color: var(--culturemesh-light-bg); /* Very light purple for input fields */
            border: 1px solid var(--culturemesh-border);
            color: var(--culturemesh-dark-text);
        }
        #settings .form-control input:focus,
        #settings .form-control select:focus,
        #settings .form-control textarea:focus {
            border-color: var(--culturemesh-accent); /* Vibrant yellow focus */
            box-shadow: 0 0 0 2px rgba(244, 208, 63, 0.3);
        }
        #settings .form-action-button {
            background-color: var(--culturemesh-secondary); /* Medium purple button */
            color: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        #settings .form-action-button:hover {
            background-color: var(--culturemesh-primary); /* Darker purple on hover */
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        /* API Key Table - CultureMesh Themed */
        #settings .api-key-table th {
            background-color: var(--culturemesh-card-bg); /* Lighter purple for table header */
            color: var(--culturemesh-primary); /* Deep purple for header text */
        }
        #settings .api-key-table td {
            color: var(--culturemesh-dark-text);
        }
        #settings .api-key-table tr:hover {
            background-color: var(--culturemesh-light-bg); /* Slightly different light purple on hover */
        }
        #settings .api-key-value {
            color: var(--culturemesh-muted-text);
        }
        #settings .security-note {
            background-color: #fef2f2; /* Light red for warning */
            border-left-color: #dc2626; /* Stronger red border */
            color: #dc2626; /* Stronger red text */
        }

        /* Company Selection Card - CultureMesh Themed */
        #settings .company-select-card {
            background-color: var(--culturemesh-light-bg); /* Very light purple for company cards */
            border: 1px solid var(--culturemesh-border);
            color: var(--culturemesh-dark-text);
        }
        #settings .company-select-card:hover {
            background-color: var(--culturemesh-card-bg); /* Lighter purple on hover */
        }
        #settings .company-select-card h3 {
            color: var(--culturemesh-primary); /* Deep purple for company name */
        }
        #settings .company-select-card p {
            color: var(--culturemesh-muted-text);
        }
        #settings .company-details-section {
            background-color: var(--culturemesh-light-bg); /* Very light purple for details section */
            border: 1px solid var(--culturemesh-border);
            color: var(--culturemesh-dark-text);
        }
        #settings .company-details-section h4 {
            color: var(--culturemesh-primary); /* Deep purple for details heading */
        }
        #settings .company-details-section strong {
            color: var(--culturemesh-accent); /* Vibrant yellow for detail keys */
        }
        #settings .copy-square {
            background-color: var(--culturemesh-light-bg); /* Very light purple for copy squares */
            border: 1px solid var(--culturemesh-border);
        }
        #settings .copy-square pre {
            color: var(--culturemesh-dark-text);
        }
        #settings .copy-square .copy-button {
            background-color: var(--culturemesh-secondary); /* Medium purple copy button */
        }
        #settings .copy-square .copy-button:hover {
            background-color: var(--culturemesh-primary); /* Darker purple on hover */
        }
        #settings .loading-spinner {
            border-top-color: var(--culturemesh-primary); /* Deep purple spinner */
        }
        #settings .text-green-500 {
            color: var(--culturemesh-accent); /* Vibrant yellow for success icons */
        }
        #settings .text-yellow-500 {
            color: #facc15; /* Yellow for pending icons */
        }
        #settings .text-red-500 {
            color: #ef4444; /* Red for error icons */
        }
        #settings .bg-purple-600 {
            background-color: var(--culturemesh-secondary); /* Medium purple for AI buttons */
        }
        #settings .hover:bg-purple-700:hover {
            background-color: var(--culturemesh-primary); /* Darker purple on hover */
        }
        #settings .bg-blue-600 {
            background-color: #2563eb; /* Blue for deploy button */
        }
        #settings .hover:bg-blue-700:hover {
            background-color: #1d4ed8; /* Darker blue on hover */
        }
        #settings .text-blue-500 {
            color: #3b82f6; /* Blue for edit/delete buttons */
        }
        #settings .hover:text-blue-700:hover {
            color: #1d4ed8; /* Darker blue on hover */
        }

        /* Email Draft Modal specific styling */
        .custom-modal-overlay {
            background-color: rgba(0,0,0,0.6); /* Darker overlay */
        }
        .custom-modal-content {
            background-color: var(--culturemesh-card-bg); /* Lighter purple background */
            color: var(--culturemesh-dark-text); /* Dark text */
            border: 1px solid var(--culturemesh-border); /* Purple border */
            box-shadow: 0 8px 25px rgba(0,0,0,0.3); /* Darker shadow */
        }
        .custom-modal-content h3 {
            color: var(--culturemesh-primary); /* Deep purple title */
        }
        .custom-modal-content .close-preview-btn {
            color: var(--culturemesh-dark-text); /* Dark text for close button */
        }
        .custom-modal-content .close-preview-btn:hover {
            color: var(--culturemesh-primary); /* Darker purple on hover */
        }
        .custom-modal-content .template-preview-body p {
            color: var(--culturemesh-muted-text); /* Muted text for body */
        }
        .custom-modal-content .form-control input,
        .custom-modal-content .form-control textarea {
            background-color: var(--culturemesh-light-bg); /* Very light purple for inputs */
            border: 1px solid var(--culturemesh-border);
            color: var(--culturemesh-dark-text);
        }
        .custom-modal-content .form-action-button {
            background-color: var(--culturemesh-secondary); /* Medium purple button */
            color: white;
        }
        .custom-modal-content .form-action-button:hover {
            background-color: var(--culturemesh-primary); /* Darker purple on hover */
        }
        .custom-modal-content .btn-primary {
            background-color: var(--culturemesh-accent); /* Vibrant yellow for primary action */
            color: var(--culturemesh-dark-text); /* Dark text on yellow button */
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            transition: background-color 0.2s ease;
        }
        .custom-modal-content .btn-primary:hover {
            background-color: #DDAA00; /* Darker yellow on hover */
        }
        .custom-modal-content .btn-secondary {
            background-color: #cbd5e1; /* Light gray for secondary action */
            color: var(--culturemesh-dark-text);
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            transition: background-color 0.2s ease;
        }
        .custom-modal-content .btn-secondary:hover {
            background-color: #a0aec0; /* Darker gray on hover */
        }

    </style>
</head>
<body>

    <header class="py-4 px-6 md:px-12 flex justify-between items-center text-white">
        <h1 class="text-2xl font-extrabold tracking-tight">☯ FAA.ZONE™ CultureMesh Dashboard</h1>
        <nav class="flex items-center space-x-4">
            <a href="https://ritual.seedwave.faa.zone/index" class="header-nav-item transition-colors duration-200">Home</a>
            <a href="https://ritual.seedwave.faa.zone/sectors/culturemesh/index.html" class="header-nav-item transition-colors duration-200 header-nav-active">Dashboard</a>
            <a href="https://ritual.seedwave.faa.zone/sectors/culturemesh/subnodes/index.html" class="header-nav-item primary-btn">Sub-Nodes</a>
        </nav>
    </header>

    <!-- CultureMesh Dashboard Content (initially visible) -->
    <div id="culturemesh-dashboard-wrapper" class="flex flex-grow dashboard-main-content-bg">
        <div class="flex flex-grow dashboard-container">
            <nav class="dashboard-sidebar-bg dashboard-sidebar">
                <h2 class="text-xl font-semibold dashboard-primary-text mb-4">CultureMesh Navigation</h2>
                <a href="javascript:void(0)" class="dashboard-sidebar-nav-item active" data-tab="overview" onclick="window.showDashboardSectionTab('overview')">
                    <i class="fas fa-tachometer-alt"></i> Overview
                </a>
                <a href="javascript:void(0)" class="dashboard-sidebar-nav-item" data-tab="documentation-progress" onclick="window.showDashboardSectionTab('documentation-progress')">
                    <i class="fas fa-tasks"></i> Data Ingestion Progress
                </a>
                <a href="javascript:void(0)" class="dashboard-sidebar-nav-item" data-tab="totemtrack" onclick="window.showDashboardSectionTab('totemtrack')">
                    <i class="fas fa-database"></i> Cultural Data Vault
                </a>
                <a href="javascript:void(0)" class="dashboard-sidebar-nav-item" data-tab="vaultspirit" onclick="window.showDashboardSectionTab('vaultspirit')">
                    <i class="fas fa-upload"></i> Media & Artifact Upload
                </a>
                <a href="javascript:void(0)" class="dashboard-sidebar-nav-item" data-tab="glyphtag" onclick="window.showDashboardSectionTab('glyphtag')">
                    <i class="fas fa-fingerprint"></i> Provenance & Verification
                </a>
                <a href="javascript:void(0)" class="dashboard-sidebar-nav-item" data-tab="scrollloop" onclick="window.showDashboardSectionTab('scrollloop')">
                    <i class="fas fa-comments"></i> Community & Insights
                </a>
                <div class="w-full h-px bg-gray-300 my-2"></div>
                <a href="javascript:void(0)" class="dashboard-sidebar-nav-item" data-tab="analytics" onclick="window.showDashboardSectionTab('analytics')">
                    <i class="fas fa-chart-pie"></i> Analytics
                </a>
                <a href="javascript:void(0)" class="dashboard-sidebar-nav-item" data-tab="admin-panel" onclick="window.showDashboardSectionTab('admin-panel')">
                    <i class="fas fa-users-cog"></i> Admin Panel
                </a>
                <a href="javascript:void(0)" class="dashboard-sidebar-nav-item" data-tab="ai-gemini" onclick="window.showDashboardSectionTab('ai-gemini')">
                    <i class="fas fa-robot"></i> AI Gemini
                </a>
                <a href="javascript:void(0)" class="dashboard-sidebar-nav-item" data-tab="settings" onclick="window.showDashboardSectionTab('settings')">
                    <i class="fas fa-cog"></i> Settings
                </a>
            </nav>

            <main class="flex-grow p-8 dashboard-main-content-bg overflow-y-auto dashboard-main-content">
                <!-- Dashboard Sections (Content for each tab) -->

                <!-- 1. Overview Section (Dashboard) -->
                <section id="overview" class="tab-content active">
                    <section class="text-center mb-12">
                        <h2 class="text-5xl font-extrabold mb-6 brand-heading">
                            CultureMesh Dashboard Overview
                        </h2>
                        <p class="text-xl dashboard-muted-text max-w-2xl mx-auto">
                            A quick glance at your CultureMesh activities and key metrics.
                        </p>
                    </section>

                    <!-- Dashboard Overview Metrics -->
                    <section class="mb-12">
                        <h3 class="text-3xl font-bold text-center mb-8 brand-heading">Overview Metrics</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                            <div class="dashboard-card p-6 rounded-lg shadow-md flex flex-col items-center justify-center">
                                <i class="fas fa-database text-5xl text-accent mb-4"></i>
                                <p class="dashboard-muted-text text-lg">Total Data Points</p>
                                <p class="text-5xl font-bold text-accent" id="totalRitualsCount">0</p>
                            </div>
                            <div class="dashboard-card p-6 rounded-lg shadow-md flex flex-col items-center justify-center">
                                <i class="fas fa-users text-5xl text-accent mb-4"></i>
                                <p class="dashboard-muted-text text-lg">Active Communities</p>
                                <p class="text-5xl font-bold text-accent" id="activeContributorsCount">0</p>
                            </div>
                            <div class="dashboard-card p-6 rounded-lg shadow-md flex flex-col items-center justify-center">
                                <i class="fas fa-globe text-5xl text-accent mb-4"></i>
                                <p class="dashboard-muted-text text-lg">Global Coverage</p>
                                <p class="text-5xl font-bold text-accent" id="storageUsed">0</p>
                            </div>
                        </div>
                    </section>

                    <!-- Quick Actions & Featured Cultural Insight -->
                    <section class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12">
                        <div class="dashboard-card p-8 rounded-lg shadow-md">
                            <h3 class="text-3xl font-bold mb-6 brand-heading">Quick Actions</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <button class="primary-btn px-6 py-3 rounded-lg text-lg font-semibold flex items-center justify-center space-x-2" onclick="window.showDashboardSectionTab('documentation-progress');">
                                    <i class="fas fa-plus-circle"></i> <span>Ingest New Data</span>
                                </button>
                                <button class="primary-btn px-6 py-3 rounded-lg text-lg font-semibold flex items-center justify-center space-x-2" onclick="window.showDashboardSectionTab('documentation-progress');">
                                    <i class="fas fa-list-alt"></i> <span>View All Data Streams</span>
                                </button>
                                <button class="primary-btn px-6 py-3 rounded-lg text-lg font-semibold flex items-center justify-center space-x-2" onclick="window.showDashboardSectionTab('scrollloop');">
                                    <i class="fas fa-users-cog"></i> <span>Manage Communities</span>
                                </button>
                                <button class="primary-btn px-6 py-3 rounded-lg text-lg font-semibold flex items-center justify-center space-x-2" onclick="window.showDashboardSectionTab('glyphtag');">
                                    <i class="fas fa-check-double"></i> <span>Verify Data Provenance</span>
                                </button>
                            </div>
                        </div>

                        <div class="dashboard-card p-8 rounded-lg shadow-md">
                            <h3 class="text-3xl font-bold mb-6 brand-heading">Cultural Insight Spotlight: The Art of Ndebele Murals</h3>
                            <img src="https://placehold.co/600x300/6A0572/F4D03F?text=Ndebele+Mural+Art" alt="Featured Cultural Insight" class="w-full h-48 object-cover rounded-lg mb-4 shadow-inner">
                            <p class="dashboard-muted-text mb-4">
                                Explore the vibrant geometric patterns and rich symbolism of Ndebele house painting, a living tradition from Southern Africa. Documented with high-resolution imagery and cultural context.
                            </p>
                            <button class="primary-btn px-6 py-3 rounded-lg text-lg font-semibold" onclick="window.showMessage('Simulating: Viewing full details of Ndebele Murals insight.')">
                                View Full Insight Details
                            </button>
                        </div>
                    </section>

                    <!-- Data Visualizations -->
                    <section class="mb-12">
                        <h3 class="text-3xl font-bold text-center mb-8 brand-heading">Data Insights</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <div class="dashboard-card p-6 rounded-lg shadow-md flex flex-col items-center">
                                <h4 class="text-xl font-bold dashboard-dark-text mb-4">Cultural Domain Distribution</h4>
                                <div class="w-full h-64 relative">
                                    <canvas id="culturalDomainChart"></canvas>
                                </div>
                            </div>
                            <div class="dashboard-card p-6 rounded-lg shadow-md flex flex-col items-center">
                                <h4 class="text-xl font-bold dashboard-dark-text mb-4">Data Ingestion Progress</h4>
                                <div class="w-full h-64 relative">
                                    <canvas id="ingestionProgressChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Developer's Note for Overview -->
                    <section class="text-center bg-gray-100 p-8 rounded-lg shadow-md">
                        <h3 class="text-3xl font-bold mb-4 dashboard-dark-text">Developer's Note: Overview</h3>
                        <p class="dashboard-muted-text">
                            This "Overview" section provides a high-level summary of CultureMesh.
                            Ensure metrics and charts reflect real-time data from your Firestore collections.
                        </p>
                        <ul class="list-disc list-inside text-left inline-block mt-4 dashboard-muted-text">
                            <li><strong>Metrics:</strong> Connect `totalRitualsCount` (now `totalDataPoints`), `activeContributorsCount` (now `activeCommunities`), and `storageUsed` (now `globalCoverage`) to actual data sources.</li>
                            <li><strong>Charts:</strong> Ensure `culturalDomainChart` and `ingestionProgressChart` accurately visualize data from your cultural records.</li>
                            <li><strong>Quick Actions:</strong> Implement the `onclick` functions to smoothly transition to the relevant sections within this dashboard.</li>
                        </ul>
                    </section>
                </section>

                <!-- 2. Data Ingestion Progress Section -->
                <section id="documentation-progress" class="tab-content">
                    <section class="text-center mb-12">
                        <h2 class="text-5xl font-extrabold mb-6 brand-heading">
                            Data Ingestion Progress Overview
                        </h2>
                        <p class="text-xl dashboard-muted-text max-w-2xl mx-auto">
                            Monitor the status of all cultural data being ingested, from initial entry to final verification.
                        </p>
                    </section>

                    <!-- Progress Metrics -->
                    <section class="mb-12 grid grid-cols-1 md:grid-cols-3 gap-8">
                        <div class="dashboard-card p-6 rounded-lg shadow-md flex flex-col items-center justify-center">
                            <i class="fas fa-tasks text-5xl text-accent mb-4"></i>
                            <p class="text-gray-600 text-lg">Total Data Streams</p>
                            <p class="text-5xl font-bold text-accent" id="docProgressTotalEntries">0</p>
                        </div>
                        <div class="dashboard-card p-6 rounded-lg shadow-md flex flex-col items-center justify-center">
                            <i class="fas fa-hourglass-half text-5xl text-accent mb-4"></i>
                            <p class="text-gray-600 text-lg">Processing</p>
                            <p class="text-5xl font-bold text-accent" id="docProgressInProgress">0</p>
                        </div>
                        <div class="dashboard-card p-6 rounded-lg shadow-md flex flex-col items-center justify-center">
                            <i class="fas fa-check-circle text-5xl text-accent mb-4"></i>
                            <p class="text-gray-600 text-lg">Validated & Live</p>
                            <p class="text-5xl font-bold text-accent" id="docProgressCompletedVerified">0</p>
                        </div>
                    </section>

                    <!-- Detailed Progress Table (Placeholder) -->
                    <section class="mb-12 dashboard-card p-8 rounded-lg shadow-md">
                        <h3 class="text-3xl font-bold mb-6 brand-heading">Detailed Ingestion Progress</h3>
                        <div class="overflow-x-auto">
                            <table class="min-w-full bg-white rounded-lg shadow-inner">
                                <thead>
                                    <tr class="bg-culturemesh-light-bg text-culturemesh-dark-text uppercase text-sm leading-normal">
                                        <th class="py-3 px-6 text-left">Data Stream Name</th>
                                        <th class="py-3 px-6 text-left">Type</th>
                                        <th class="py-3 px-6 text-left">Status</th>
                                        <th class="py-3 px-6 text-left">Last Updated</th>
                                        <th class="py-3 px-6 text-center">Actions</th>
                                    </tr>
                                </thead>
                                <tbody class="text-culturemesh-muted-text text-sm font-light" id="docProgressTableBody">
                                    <!-- Data will be dynamically loaded here -->
                                    <tr>
                                        <td class="py-3 px-6 text-left whitespace-nowrap">Ndebele Mural Patterns Archive</td>
                                        <td class="py-3 px-6 text-left">Visual Arts</td>
                                        <td class="py-3 px-6 text-left"><span class="bg-culturemesh-accent text-culturemesh-primary py-1 px-3 rounded-full text-xs">Validated</span></td>
                                        <td class="py-3 px-6 text-left">2024-06-15</td>
                                        <td class="py-3 px-6 text-center">
                                            <button class="text-culturemesh-secondary hover:text-culturemesh-primary text-sm" onclick="window.showMessage('Simulating view details for Ndebele Mural Patterns Archive')">View</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="py-3 px-6 text-left whitespace-nowrap">Khoisan Oral Histories Collection</td>
                                        <td class="py-3 px-6 text-left">Oral History</td>
                                        <td class="py-3 px-6 text-left"><span class="bg-yellow-200 text-yellow-800 py-1 px-3 rounded-full text-xs">Processing</span></td>
                                        <td class="py-3 px-6 text-left">2024-07-01</td>
                                        <td class="py-3 px-6 text-center">
                                            <button class="text-culturemesh-secondary hover:text-culturemesh-primary text-sm" onclick="window.showMessage('Simulating edit for Khoisan Oral Histories Collection')">Edit</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="py-3 px-6 text-left whitespace-nowrap">Basotho Blanket Design Index</td>
                                        <td class="py-3 px-6 text-left">Traditional Craft</td>
                                        <td class="py-3 px-6 text-left"><span class="bg-red-200 text-red-800 py-1 px-3 rounded-full text-xs">Pending Review</span></td>
                                        <td class="py-3 px-6 text-left">2024-06-28</td>
                                        <td class="py-3 px-6 text-center">
                                            <button class="text-culturemesh-secondary hover:text-culturemesh-primary text-sm" onclick="window.showMessage('Simulating review for Basotho Blanket Design Index')">Review</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </section>

                    <!-- Progress Charts -->
                    <section class="mb-12">
                        <h3 class="text-3xl font-bold text-center mb-8 brand-heading">Visual Ingestion Progress</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <div class="dashboard-card p-6 rounded-lg shadow-md flex flex-col items-center">
                                <h4 class="text-xl font-bold dashboard-dark-text mb-4">Overall Data Status</h4>
                                <div class="w-full h-64 relative">
                                    <canvas id="overallStatusChart"></canvas>
                                </div>
                            </div>
                            <div class="dashboard-card p-6 rounded-lg shadow-md flex flex-col items-center">
                                <h4 class="text-xl font-bold dashboard-dark-text mb-4">Monthly Ingestion Rate</h4>
                                <div class="w-full h-64 relative">
                                    <canvas id="monthlyRateChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </section>

                    <section class="text-center bg-gray-100 p-8 rounded-lg shadow-md">
                        <h3 class="text-3xl font-bold mb-4 text-gray-800">Developer's Note</h3>
                        <p class="text-gray-600">
                            This "Data Ingestion Progress" section is designed to track the flow of cultural data into CultureMesh.
                            Your task is to integrate real data from Firestore to populate the metrics, table, and charts.
                        </p>
                        <ul class="list-disc list-inside text-left inline-block mt-4 text-gray-600">
                            <li><strong>Metrics:</strong> Connect `docProgressTotalEntries`, `docProgressInProgress`, and `docProgressCompletedVerified` to actual data sources reflecting ingestion stages.</li>
                            <li><strong>Table:</strong> Populate the "Detailed Ingestion Progress" table with actual data streams, including dynamic action buttons (View, Edit, Review) that link to individual data stream detail pages.</li>
                            <li><strong>Charts:</strong> Ensure `overallStatusChart` and `monthlyRateChart` accurately reflect the fetched data, updating dynamically as new data streams are added or their statuses change.</li>
                            <li>Consider adding filtering and sorting options to the table.</li>
                        </ul>
                    </section>
                </section>

                <!-- 3. Cultural Data Vault Section -->
                <section id="totemtrack" class="tab-content">
                    <section class="text-center mb-12">
                        <h2 class="text-5xl font-extrabold mb-6 brand-heading">
                            Cultural Data Vault: Safeguarding Digital Heritage
                        </h2>
                        <p class="text-xl dashboard-muted-text max-w-2xl mx-auto">
                            The Cultural Data Vault provides a secure platform for documenting, tracking, and verifying the lineage and significance of digital cultural assets and records.
                        </p>
                    </section>

                    <!-- Data Vault Management Features -->
                    <section class="mb-12 grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div class="dashboard-card p-8 rounded-lg shadow-md">
                            <h3 class="text-3xl font-bold mb-6 brand-heading">Add New Data Record</h3>
                            <form id="addTotemForm" class="space-y-4">
                                <div>
                                    <label for="totemName" class="block text-gray-700 font-semibold mb-2">Data Record Name/Identifier</label>
                                    <input type="text" id="totemName" class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-accent" placeholder="e.g., Zulu Ritual Documentation, Ancient Scroll Scan" required>
                                </div>
                                <div>
                                    <label for="totemDescription" class="block text-gray-700 font-semibold mb-2">Description & Significance</label>
                                    <textarea id="totemDescription" class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-accent h-32" placeholder="Describe its history, cultural significance, and any associated context."></textarea>
                                </div>
                                <div>
                                    <label for="totemOrigin" class="block text-gray-700 font-semibold mb-2">Origin/Associated Culture</label>
                                    <input type="text" id="totemOrigin" class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-accent" placeholder="e.g., Xhosa, Basotho, specific community">
                                </div>
                                <div>
                                    <label for="totemImage" class="block text-gray-700 font-semibold mb-2">Upload Associated File (Simulated)</label>
                                    <input type="file" id="totemImage" accept="image/*,video/*,audio/*" class="w-full p-3 rounded-lg border border-gray-300">
                                </div>
                                <button type="submit" class="primary-btn px-6 py-3 rounded-lg text-lg font-semibold w-full" onclick="window.showMessage('Simulating: Data record added. In a real app, this would save to Firestore.')">
                                    <i class="fas fa-plus-circle mr-2"></i> Add Data Record
                                </button>
                            </form>
                        </div>

                        <div class="dashboard-card p-8 rounded-lg shadow-md">
                            <h3 class="text-3xl font-bold mb-6 brand-heading">Your Documented Cultural Data</h3>
                            <div id="totemList" class="space-y-4 max-h-96 overflow-y-auto">
                                <!-- Sample Data Records -->
                                <div class="dashboard-sub-card p-4 rounded-lg flex items-center justify-between">
                                    <div>
                                        <p class="font-semibold dashboard-dark-text">Zulu Ritual Dance Video</p>
                                        <p class="dashboard-muted-text text-sm">Documenting traditional ceremonies.</p>
                                    </div>
                                    <button class="primary-btn px-4 py-2 rounded-md text-sm" onclick="window.showMessage('Simulating: Viewing details for Zulu Ritual Dance Video.')">View Details</button>
                                </div>
                                <div class="dashboard-sub-card p-4 rounded-lg flex items-center justify-between">
                                    <div>
                                        <p class="font-semibold dashboard-dark-text">Ancient San Rock Art Scans</p>
                                        <p class="dashboard-muted-text text-sm">High-resolution scans of historical art.</p>
                                    </div>
                                    <button class="primary-btn px-4 py-2 rounded-md text-sm" onclick="window.showMessage('Simulating: Viewing details for Ancient San Rock Art Scans.')">View Details</button>
                                </div>
                                <div class="dashboard-sub-card p-4 rounded-lg flex items-center justify-between">
                                    <div>
                                        <p class="font-semibold dashboard-dark-text">Oral History: Basotho Creation Myth</p>
                                        <p class="dashboard-muted-text text-sm">Recorded elder narrative.</p>
                                    </div>
                                    <button class="primary-btn px-4 py-2 rounded-md text-sm" onclick="window.showMessage('Simulating: Viewing details for Basotho Creation Myth.')">View Details</button>
                                </div>
                                <!-- End Sample Data Records -->
                            </div>
                            <button class="primary-btn px-6 py-3 rounded-lg text-lg font-semibold w-full mt-6" onclick="window.showMessage('Simulating: Searching all cultural data records.')">
                                <i class="fas fa-search mr-2"></i> Search All Data
                            </button>
                        </div>
                    </section>

                    <section class="text-center bg-gray-100 p-8 rounded-lg shadow-md">
                        <h3 class="text-3xl font-bold mb-4 text-gray-800">Developer's Note</h3>
                        <p class="text-gray-600">
                            This "Cultural Data Vault" section is for managing digital cultural records.
                            Your primary task here is to implement the backend integration and dynamic rendering.
                        </p>
                        <ul class="list-disc list-inside text-left inline-block mt-4 text-gray-600">
                            <li><strong>Form Submission:</strong> Implement the logic to capture form data and save it to a Firestore collection (e.g., `artifacts/{appId}/users/{userId}/culturemesh/cultural_data`).</li>
                            <li><strong>Dynamic List:</strong> Fetch and display actual cultural data records from Firestore in the "Your Documented Cultural Data" section. Ensure real-time updates using `onSnapshot`.</li>
                            <li><strong>File Upload:</strong> For real file uploads, you'd need Firebase Storage or a similar service. The current `input type="file"` is a placeholder.</li>
                            <li><strong>Search Functionality:</strong> Implement client-side or Firestore-based searching for data records.</li>
                            <li>Consider adding edit/delete functionality for each record.</li>
                        </ul>
                    </section>
                </section>

                <!-- 4. Media & Artifact Upload Section -->
                <section id="vaultspirit" class="tab-content">
                    <section class="text-center mb-12">
                        <h2 class="text-5xl font-extrabold mb-6 brand-heading">
                            Media & Artifact Upload: Preserving the Immaterial
                        </h2>
                        <p class="text-xl dashboard-muted-text max-w-2xl mx-auto">
                            This section offers secure, high-fidelity storage solutions for audio recordings of oral histories, ceremonial music, ritual videos, and sacred imagery, ensuring their longevity and authenticity.
                        </p>
                    </section>

                    <!-- Upload & Manage Features -->
                    <section class="mb-12 grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div class="dashboard-card p-8 rounded-lg shadow-md">
                            <h3 class="text-3xl font-bold mb-6 brand-heading">Upload New Cultural Media</h3>
                            <form id="uploadMediaForm" class="space-y-4">
                                <div>
                                    <label for="mediaTitle" class="block text-gray-700 font-semibold mb-2">Media Title</label>
                                    <input type="text" id="mediaTitle" class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-accent" placeholder="e.g., Ancestral Chant, Ritual Dance Video" required>
                                </div>
                                <div>
                                    <label for="mediaType" class="block text-gray-700 font-semibold mb-2">Media Type</label>
                                    <select id="mediaType" class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-accent" required>
                                        <option value="">Select Type</option>
                                        <option value="Audio">Audio (Oral History, Music)</option>
                                        <option value="Video">Video (Ceremony, Performance)</option>
                                        <option value="Image">Image (Artifact, Sacred Site)</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="mediaDescription" class="block text-gray-700 font-semibold mb-2">Description</label>
                                    <textarea id="mediaDescription" class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-accent h-24" placeholder="Briefly describe the content and its cultural context."></textarea>
                                </div>
                                <div>
                                    <label for="mediaFile" class="block text-gray-700 font-semibold mb-2">Select File (Simulated Upload)</label>
                                    <input type="file" id="mediaFile" class="w-full p-3 rounded-lg border border-gray-300" required>
                                </div>
                                <button type="submit" class="primary-btn px-6 py-3 rounded-lg text-lg font-semibold w-full" onclick="window.showMessage('Simulating: Media uploaded. In a real app, this would use Firebase Storage.')">
                                    <i class="fas fa-upload mr-2"></i> Upload to Vault
                                </button>
                            </form>
                        </div>

                        <div class="dashboard-card p-8 rounded-lg shadow-md">
                            <h3 class="text-3xl font-bold mb-6 brand-heading">Your Vaulted Cultural Media</h3>
                            <div id="mediaList" class="space-y-4 max-h-96 overflow-y-auto">
                                <!-- Sample Media Cards -->
                                <div class="dashboard-sub-card p-4 rounded-lg flex items-center justify-between">
                                    <div>
                                        <p class="font-semibold dashboard-dark-text">Zulu Wedding Ceremony (Video)</p>
                                        <p class="dashboard-muted-text text-sm">Recorded 2023-09-10.</p>
                                    </div>
                                    <button class="primary-btn px-4 py-2 rounded-md text-sm" onclick="window.showMessage('Simulating: Playing Zulu Wedding Ceremony video.')">Play/View</button>
                                </div>
                                <div class="dashboard-sub-card p-4 rounded-lg flex items-center justify-between">
                                    <div>
                                        <p class="font-semibold dashboard-dark-text">San Bushman Storytelling (Audio)</p>
                                        <p class="dashboard-muted-text text-sm">Oral history from 1980s.</p>
                                    </div>
                                    <button class="primary-btn px-4 py-2 rounded-md text-sm" onclick="window.showMessage('Simulating: Playing San Bushman Storytelling audio.')">Play/View</button>
                                </div>
                                <div class="dashboard-sub-card p-4 rounded-lg flex items-center justify-between">
                                    <div>
                                        <p class="font-semibold dashboard-dark-text">Sacred Ndebele Patterns (Image)</p>
                                        <p class="dashboard-muted-text text-sm">Detailed imagery of traditional art.</p>
                                    </div>
                                    <button class="primary-btn px-4 py-2 rounded-md text-sm" onclick="window.showMessage('Simulating: Viewing Ndebele Patterns image.')">Play/View</button>
                                </div>
                                <!-- End Sample Media Cards -->
                            </div>
                            <button class="primary-btn px-6 py-3 rounded-lg text-lg font-semibold w-full mt-6" onclick="window.showMessage('Simulating: Searching all vaulted media.')">
                                <i class="fas fa-search mr-2"></i> Search Vault
                            </button>
                        </div>
                    </section>

                    <section class="text-center bg-gray-100 p-8 rounded-lg shadow-md">
                        <h3 class="text-3xl font-bold mb-4 text-gray-800">Developer's Note</h3>
                        <p class="text-gray-600">
                            This "Media & Artifact Upload" section is for managing multimedia and other cultural artifact records.
                            The core functionality here involves secure file storage and retrieval.
                        </p>
                        <ul class="list-disc list-inside text-left inline-block mt-4 text-gray-600">
                            <li><strong>File Upload:</strong> Implement actual file upload to Firebase Storage, ensuring proper MIME types and security rules.</li>
                            <li><strong>Metadata Storage:</strong> Save media metadata (title, type, description, storage URL) to Firestore.</li>
                            <li><strong>Dynamic List:</strong> Fetch and display media records from Firestore, allowing users to view/play content.</li>
                            <li>Consider adding features like media categorization, tagging, and sharing options.</li>
                            <li>For large files, implement progress indicators during upload.</li>
                        </ul>
                    </section>
                </section>

                <!-- 5. Provenance & Verification Section -->
                <section id="glyphtag" class="tab-content">
                    <section class="text-center mb-12">
                        <h2 class="text-5xl font-extrabold mb-6 brand-heading">
                            Provenance & Verification: Immutability & Trust
                        </h2>
                        <p class="text-xl dashboard-muted-text max-w-2xl mx-auto">
                            This section creates an unalterable digital fingerprint for every piece of cultural content, ensuring its authenticity, origin, and history are transparent and verifiable.
                        </p>
                    </section>

                    <!-- Provenance Verification & Tagging -->
                    <section class="mb-12 grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <div class="dashboard-card p-8 rounded-lg shadow-md">
                            <h3 class="text-3xl font-bold mb-6 brand-heading">Verify Data Provenance</h3>
                            <form id="verifyProvenanceForm" class="space-y-4">
                                <div>
                                    <label for="provenanceHash" class="block text-gray-700 font-semibold mb-2">Provenance Hash</label>
                                    <input type="text" id="provenanceHash" class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-accent" placeholder="e.g., 0xabcdef1234567890abcdef1234567890" required>
                                </div>
                                <button type="submit" class="primary-btn px-6 py-3 rounded-lg text-lg font-semibold w-full" onclick="window.showMessage('Simulating: Verifying hash on the blockchain.')">
                                    <i class="fas fa-search mr-2"></i> Verify Hash
                                </button>
                            </form>
                            <div class="mt-8 p-6 bg-gray-100 rounded-lg text-gray-700">
                                <h4 class="text-xl font-bold mb-3">Verification Result:</h4>
                                <p id="verificationResult" class="italic">Enter a hash and click "Verify" to see its provenance chain.</p>
                            </div>
                        </div>

                        <div class="dashboard-card p-8 rounded-lg shadow-md">
                            <h3 class="text-3xl font-bold mb-6 brand-heading">Generate New Provenance Tag</h3>
                            <form id="generateGlyphTagForm" class="space-y-4">
                                <div>
                                    <label for="contentIdToTag" class="block text-gray-700 font-semibold mb-2">Content ID to Tag</label>
                                    <input type="text" id="contentIdToTag" class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-accent" placeholder="e.g., cultural-data-ID-001, media-ID-005" required>
                                </div>
                                <div>
                                    <label for="taggingDescription" class="block text-gray-700 font-semibold mb-2">Tagging Event Description</label>
                                    <textarea id="taggingDescription" class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-accent h-24" placeholder="e.g., Initial ingestion, Community validation, Multimedia attachment."></textarea>
                                </div>
                                <button type="submit" class="primary-btn px-6 py-3 rounded-lg text-lg font-semibold w-full" onclick="window.showMessage('Simulating: Generating new provenance hash for content.')">
                                    <i class="fas fa-tags mr-2"></i> Generate Provenance Tag
                                </button>
                            </form>
                            <div class="mt-8 p-6 bg-gray-100 rounded-lg text-gray-700">
                                <h4 class="text-xl font-bold mb-3">Generated Hash:</h4>
                                <p id="generatedHash" class="break-all italic">New Provenance Tag will appear here.</p>
                            </div>
                        </div>
                    </section>

                    <!-- Provenance Chain Visualization (Conceptual) -->
                    <section class="mb-12 dashboard-card p-8 rounded-lg shadow-md">
                        <h3 class="text-3xl font-bold mb-6 brand-heading">Example Provenance Chain</h3>
                        <div id="provenanceChainDisplay" class="space-y-6">
                            <div class="provenance-step">
                                <p class="font-semibold dashboard-dark-text">Step 1: Original Oral History Recorded</p>
                                <p class="dashboard-muted-text text-sm">Timestamp: 2023-01-15 10:30 SAST</p>
                                <p class="dashboard-muted-text text-xs mt-1">Hash: <code>0xabc123...</code></p>
                            </div>
                            <div class="provenance-step">
                                <p class="font-semibold dashboard-dark-text">Step 2: Transcription & Initial Tagging</p>
                                <p class="dashboard-muted-text text-sm">Timestamp: 2023-01-20 14:00 SAST</p>
                                <p class="dashboard-muted-text text-xs mt-1">Hash: <code>0xdef456...</code></p>
                            </div>
                            <div class="provenance-step">
                                <p class="font-semibold dashboard-dark-text">Step 3: Community Validation & Approval</p>
                                <p class="dashboard-muted-text text-sm">Timestamp: 2023-02-01 09:00 SAST</p>
                                <p class="dashboard-muted-text text-xs mt-1">Hash: <code>0xghi789...</code></p>
                            </div>
                            <div class="provenance-step">
                                <p class="font-semibold dashboard-dark-text">Step 4: Linked to CultureMesh Data Vault</p>
                                <p class="dashboard-muted-text text-sm">Timestamp: 2023-02-05 11:45 SAST</p>
                                <p class="dashboard-muted-text text-xs mt-1">Hash: <code>0xjkl012...</code></p>
                            </div>
                        </div>
                    </section>

                    <section class="text-center bg-gray-100 p-8 rounded-lg shadow-md">
                        <h3 class="text-3xl font-bold mb-4 text-gray-800">Developer's Note</h3>
                        <p class="text-gray-600">
                            This "Provenance & Verification" section is critical for ensuring the authenticity and immutability of cultural data.
                            The core functionality here involves cryptographic hashing and potentially blockchain interaction.
                        </p>
                        <ul class="list-disc list-inside text-left inline-block mt-4 text-gray-600">
                            <li><strong>Hash Verification:</strong> Implement a function to take a hash and simulate its verification against a ledger (e.g., by checking if it exists in a Firestore collection of "verified hashes").</li>
                            <li><strong>Hash Generation:</strong> Create a function that, given content data (e.g., cultural text, or a media file's metadata), generates a unique cryptographic hash (e.g., SHA-256).</li>
                            <li><strong>Blockchain Simulation:</strong> For a real "VaultMesh" integration, this would involve interacting with a blockchain API to record hashes as transactions. For a demo, you can simulate this by storing hashes in Firestore.</li>
                            <li>Consider adding a visual representation of the provenance chain for a given content ID.</li>
                        </ul>
                    </section>
                </section>

                <!-- 6. Community & Insights Section -->
                <section id="scrollloop" class="tab-content">
                    <section class="text-center mb-12">
                        <h2 class="text-5xl font-extrabold mb-6 brand-heading">
                            Community & Insights: The Living Tradition
                        </h2>
                        <p class="text-xl dashboard-muted-text max-w-2xl mx-auto">
                            This section fosters a vibrant community where users can discuss, share insights, and contribute to the ongoing evolution and understanding of cultural practices and data.
                        </p>
                    </section>

                    <!-- Community Forum / Discussion Board -->
                    <section class="mb-12 dashboard-card p-8 rounded-lg shadow-md">
                        <h3 class="text-3xl font-bold mb-6 brand-heading">Community Discussions</h3>
                        
                        <!-- New Post Form -->
                        <div class="mb-8 p-6 bg-gray-100 rounded-lg shadow-inner">
                            <h4 class="text-2xl font-bold text-gray-800 mb-4">Start a New Discussion</h4>
                            <form id="newDiscussionForm" class="space-y-4">
                                <div>
                                    <label for="postTitle" class="block text-gray-700 font-semibold mb-2">Discussion Title</label>
                                    <input type="text" id="postTitle" class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-accent" placeholder="e.g., Interpreting the Symbolism of the Sun Dance" required>
                                </div>
                                <div>
                                    <label for="postContent" class="block text-gray-700 font-semibold mb-2">Your Post</label>
                                    <textarea id="postContent" class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-accent h-32" placeholder="Share your thoughts, questions, or insights here..."></textarea>
                                </div>
                                <button type="submit" class="primary-btn px-6 py-3 rounded-lg text-lg font-semibold w-full" onclick="window.showMessage('Simulating: New discussion post created.')">
                                    <i class="fas fa-comments mr-2"></i> Post Discussion
                                </button>
                            </form>
                        </div>

                        <!-- Existing Posts -->
                        <div id="discussionPosts" class="space-y-6">
                            <!-- Sample Discussion Posts -->
                            <div class="discussion-post">
                                <h4 class="text-xl font-bold text-gray-800 mb-2">The Role of Water in Cleansing Rituals</h4>
                                <p class="text-gray-700 text-sm mb-3">By: CommunityMember123 - 2 hours ago</p>
                                <p class="text-gray-600">
                                    "I've been researching the use of water in various African cleansing ceremonies. It seems to symbolize purity and renewal across many cultures. Does anyone have insights into specific regional variations or historical contexts?"
                                </p>
                                <div class="mt-4 text-right">
                                    <button class="primary-btn px-4 py-2 rounded-md text-sm mr-4" onclick="window.showMessage('Simulating: Viewing comments.')">View Comments (5)</button>
                                    <button class="primary-btn px-4 py-2 rounded-md text-sm" onclick="window.showMessage('Simulating: Liking post.')"><i class="fas fa-thumbs-up"></i> 15</button>
                                </div>
                            </div>
                            <div class="discussion-post">
                                <h4 class="text-xl font-bold text-gray-800 mb-2">Challenges in Documenting Oral Traditions</h4>
                                <p class="text-gray-700 text-sm mb-3">By: HeritagePreserver - yesterday</p>
                                <p class="text-gray-600">
                                    "What are the best practices for accurately capturing and transcribing oral histories, especially when dealing with multiple dialects or nuanced storytelling? Any tools or methodologies recommended?"
                                </p>
                                <div class="mt-4 text-right">
                                    <button class="primary-btn px-4 py-2 rounded-md text-sm mr-4" onclick="window.showMessage('Simulating: Viewing comments.')">View Comments (8)</button>
                                    <button class="primary-btn px-4 py-2 rounded-md text-sm" onclick="window.showMessage('Simulating: Liking post.')"><i class="fas fa-thumbs-up"></i> 22</button>
                                </div>
                            </div>
                            <!-- End Sample Discussion Posts -->
                        </div>
                    </section>

                    <!-- Educational Resources & Workshops -->
                    <section class="mb-12 dashboard-card p-8 rounded-lg shadow-md">
                        <h3 class="text-3xl font-bold mb-6 brand-heading">Learning Resources & Workshops</h3>
                        <div id="learningResources" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="dashboard-sub-card p-4 rounded-lg">
                                <h4 class="text-xl font-bold text-gray-800 mb-2">Webinar: Digital Ethics in Heritage Preservation</h4>
                                <p class="text-gray-600 text-sm mb-3">Date: 2024-07-20 | Speaker: Dr. Naledi Mokoena</p>
                                <p class="text-gray-600">Explore the ethical considerations of digitizing indigenous knowledge.</p>
                                <button class="primary-btn px-4 py-2 rounded-md text-sm mt-4" onclick="window.showMessage('Simulating: Registering for webinar.')">Register Now</button>
                            </div>
                            <div class="dashboard-sub-card p-4 rounded-lg">
                                <h4 class="text-xl font-bold text-gray-800 mb-2">Guide: Understanding Ancestral Lineage</h4>
                                <p class="text-gray-600 text-sm mb-3">Format: PDF | Author: CultureMesh Team</p>
                                <p class="text-gray-600">A comprehensive guide to researching and tracing your family's heritage.</p>
                                <button class="primary-btn px-4 py-2 rounded-md text-sm mt-4" onclick="window.showMessage('Simulating: Downloading guide.')">Download Guide</button>
                            </div>
                        </div>
                    </section>

                    <section class="text-center bg-gray-100 p-8 rounded-lg shadow-md">
                        <h3 class="text-3xl font-bold mb-4 text-gray-800">Developer's Note</h3>
                        <p class="text-gray-600">
                            This "Community & Insights" section is for fostering community engagement and providing educational resources.
                            Key functionalities include forum management and content delivery.
                        </p>
                        <ul class="list-disc list-inside text-left inline-block mt-4 text-gray-600">
                            <li><strong>Discussion Board:</strong> Implement functionality to post new discussions and display existing ones from Firestore (e.g., `artifacts/{appId}/users/{userId}/culturemesh/discussions`).</li>
                            <li><strong>User Interaction:</strong> Add features for comments, likes, and replies to discussion posts.</li>
                            <li><strong>Resource Management:</strong> Integrate a system to manage and link to educational resources (e.g., PDFs, external webinars).</li>
                            <li>Consider using Gemini AI for content moderation or to summarize long discussion threads.</li>
                        </ul>
                    </section>
                </section>

                <!-- 7. Analytics Section (Dashboard) -->
                <section id="analytics" class="tab-content">
                    <section class="text-center mb-12">
                        <h2 class="text-5xl font-extrabold mb-6 brand-heading">
                            CultureMesh Analytics
                        </h2>
                        <p class="text-xl dashboard-muted-text max-w-2xl mx-auto">
                            Gain insights into cultural data ingestion, content popularity, and community engagement within CultureMesh.
                        </p>
                    </section>

                    <!-- Analytics Charts -->
                    <section class="mb-12 grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div class="dashboard-card p-6 rounded-lg shadow-md flex flex-col items-center">
                            <h4 class="text-xl font-bold dashboard-dark-text mb-4">Cultural Data Type Popularity</h4>
                            <div class="w-full h-64 relative">
                                <canvas id="analyticsRitualTypeChart"></canvas>
                            </div>
                        </div>
                        <div class="dashboard-card p-6 rounded-lg shadow-md flex flex-col items-center">
                            <h4 class="text-xl font-bold dashboard-dark-text mb-4">Community Activity Trends</h4>
                            <div class="w-full h-64 relative">
                                <canvas id="contributorActivityChart"></canvas>
                            </div>
                        </div>
                    </section>

                    <section class="text-center bg-gray-100 p-8 rounded-lg shadow-md">
                        <h3 class="text-3xl font-bold mb-4 text-gray-800">Developer's Note: Analytics</h3>
                        <p class="text-gray-600">
                            This section is for displaying analytical insights related to CultureMesh usage.
                            Your task is to populate these charts with real data from your Firestore collections.
                        </p>
                        <ul class="list-disc list-inside text-left inline-block mt-4 text-gray-600">
                            <li><strong>Charts:</strong> Fetch data from relevant Firestore collections (e.g., cultural data views, ingestion status changes, community interactions) to populate `analyticsRitualTypeChart` and `contributorActivityChart`.</li>
                            <li>Implement data aggregation and filtering as needed for the charts.</li>
                        </ul>
                    </section>
                </section>

                <!-- 8. Admin Panel Section (Dashboard) -->
                <section id="admin-panel" class="tab-content">
                    <h2 class="text-3xl font-bold dashboard-primary-text mb-6">Admin Panel</h2>
                    <p class="dashboard-muted-text mb-4">Manage users, review content, and configure system settings.</p>

                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
                        <div class="dashboard-card p-5 rounded-lg shadow-md">
                            <h3 class="text-xl font-semibold dashboard-dark-text mb-2">Total Active Admins</h3>
                            <p class="text-4xl font-bold text-accent">7</p>
                        </div>
                        <div class="dashboard-card p-5 rounded-lg shadow-md">
                            <h3 class="text-xl font-semibold dashboard-dark-text mb-2">Pending Approvals</h3>
                            <p class="text-4xl font-bold text-yellow-400">12</p>
                        </div>
                        <div class="dashboard-card p-5 rounded-lg shadow-md">
                            <h3 class="text-xl font-semibold dashboard-dark-text mb-2">System Health</h3>
                            <p class="text-4xl font-bold text-culturemesh-accent">Optimal</p>
                        </div>
                    </div>

                    <h3 class="text-2xl font-semibold dashboard-dark-text mb-4">User Management</h3>
                    <div class="flex flex-col md:flex-row gap-4 mb-6">
                        <input
                            type="text"
                            placeholder="Search users..."
                            class="flex-grow px-4 py-2 rounded-lg bg-culturemesh-light-bg border dashboard-border-dark dashboard-dark-text placeholder-dashboard-muted-text focus:outline-none focus:ring-2 focus:ring-primary-color"
                        >
                        <select class="px-4 py-2 rounded-lg bg-culturemesh-light-bg border dashboard-border-dark dashboard-dark-text focus:outline-none focus:ring-2 focus:ring-primary-color">
                            <option value="">Filter by Role</option>
                            <option value="admin">Admin</option>
                            <option value="user">User</option>
                            <option value="moderator">Moderator</option>
                        </select>
                        <button class="px-4 py-2 bg-primary-color text-white font-semibold rounded-lg hover:bg-culturemesh-secondary transition duration-200">Apply Filters</button>
                    </div>
                    <div class="overflow-x-auto mb-8">
                        <table class="min-w-full bg-culturemesh-card-bg rounded-lg shadow-md">
                            <thead>
                                <tr>
                                    <th class="py-3 px-4 text-left text-sm font-semibold dashboard-muted-text uppercase tracking-wider border-b dashboard-border-dark">User ID</th>
                                    <th class="py-3 px-4 text-left text-sm font-semibold dashboard-muted-text uppercase tracking-wider border-b dashboard-border-dark">Name</th>
                                    <th class="py-3 px-4 text-left text-sm font-semibold dashboard-muted-text uppercase tracking-wider border-b dashboard-border-dark">Email</th>
                                    <th class="py-3 px-4 text-left text-sm font-semibold dashboard-muted-text uppercase tracking-wider border-b dashboard-border-dark">Role</th>
                                    <th class="py-3 px-4 text-left text-sm font-semibold dashboard-muted-text uppercase tracking-wider border-b dashboard-border-dark">Status</th>
                                    <th class="py-3 px-4 border-b dashboard-border-dark text-left text-sm font-semibold uppercase tracking-wider">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="hover:bg-culturemesh-light-bg transition duration-200">
                                    <td class="py-3 px-4 border-b dashboard-border-dark">CM-USER-001</td>
                                    <td class="py-3 px-4 border-b dashboard-border-dark">Alice Smith</td>
                                    <td class="py-3 px-4 border-b dashboard-border-dark">alice@culturemesh.com</td>
                                    <td class="py-3 px-4 border-b dashboard-border-dark">Admin</td>
                                    <td class="py-3 px-4 border-b dashboard-border-dark"><span class="bg-culturemesh-accent text-culturemesh-primary text-xs font-semibold px-2.5 py-0.5 rounded-full">Active</span></td>
                                    <td class="py-3 px-4 border-b dashboard-border-dark">
                                        <button class="text-culturemesh-secondary hover:text-culturemesh-primary mr-2">Edit</button>
                                        <button class="text-red-500 hover:text-red-700">Delete</button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-culturemesh-light-bg transition duration-200">
                                    <td class="py-3 px-4 border-b dashboard-border-dark">CM-USER-002</td>
                                    <td class="py-3 px-4 border-b dashboard-border-dark">Bob Johnson</td>
                                    <td class="py-3 px-4 border-b dashboard-border-dark">bob@culturemesh.com</td>
                                    <td class="py-3 px-4 border-b dashboard-border-dark">User</td>
                                    <td class="py-3 px-4 border-b dashboard-border-dark"><span class="bg-yellow-500 text-white text-xs font-semibold px-2.5 py-0.5 rounded-full">Pending</span></td>
                                    <td class="py-3 px-4 border-b dashboard-border-dark">
                                        <button class="text-culturemesh-secondary hover:text-culturemesh-primary mr-2">Edit</button>
                                        <button class="text-red-500 hover:text-red-700">Delete</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <h3 class="text-2xl font-semibold dashboard-dark-text mb-4">Admin Assistant (AI Powered)</h3>
                    <p class="dashboard-muted-text mb-3">Ask Gemini AI for insights on administrative tasks, user trends, or content moderation advice.</p>
                    <textarea id="adminAIPrompt" rows="4" class="w-full p-3 rounded-lg bg-culturemesh-light-bg border dashboard-border-dark dashboard-dark-text placeholder-dashboard-muted-text focus:outline-none focus:ring-2 focus:ring-culturemesh-secondary" placeholder="e.g., 'Summarize recent user activity trends for the past week.', 'Suggest a policy for handling spam content.'"></textarea>
                    <button id="sendAdminAIPrompt" class="px-6 py-3 bg-culturemesh-secondary text-white font-semibold rounded-lg hover:bg-culturemesh-primary transition duration-200 mt-4 self-end">
                        Ask Admin Assistant
                    </button>
                    <div class="mt-4 p-4 bg-culturemesh-light-bg rounded-lg border dashboard-border-dark">
                        <h4 class="text-lg font-semibold dashboard-dark-text mb-2">Admin Assistant Response:</h4>
                        <div id="adminAIResponse" class="dashboard-dark-text whitespace-pre-wrap">
                            Your AI-powered admin assistant response will appear here.
                        </div>
                        <div id="adminAIError" class="text-red-400 mt-2 hidden"></div>
                    </div>
                </section>

                <!-- 9. AI Gemini Section (Dashboard) -->
                <section id="ai-gemini" class="tab-content">
                    <h2 class="text-3xl font-bold dashboard-primary-text mb-6">AI Gemini Integration</h2>
                    <p class="dashboard-muted-text mb-4">Interact with the Gemini AI model directly from your dashboard.</p>

                    <div class="api-key-warning mb-4">
                        <strong>Security Alert!</strong> For production, never expose your API key directly in client-side code. Use a backend server to proxy your AI requests.
                    </div>

                    <!-- General Gemini Prompt -->
                    <div class="mb-8">
                        <h3 class="text-xl font-semibold dashboard-dark-text mb-3">General Query ✨</h3>
                        <textarea id="geminiPrompt" rows="4" class="w-full p-3 rounded-lg bg-culturemesh-light-bg border dashboard-border-dark dashboard-dark-text placeholder-dashboard-muted-text focus:outline-none focus:ring-2 focus:ring-primary-color" placeholder="Enter your prompt for Gemini AI here... (e.g., 'Explain how AI works in a few words', 'Write a short poem about fruit.')"></textarea>
                        <button id="sendGeminiPrompt" class="px-6 py-3 bg-primary-color text-white font-semibold rounded-lg hover:bg-culturemesh-secondary transition duration-200 mt-4 self-end">
                            Send to Gemini
                        </button>
                        <div class="mt-4 p-4 bg-culturemesh-light-bg rounded-lg border dashboard-border-dark">
                            <h4 class="text-lg font-semibold dashboard-dark-text mb-2">Gemini AI Response:</h4>
                            <div id="geminiResponse" class="dashboard-dark-text whitespace-pre-wrap">
                                Type a general prompt and click "Send to Gemini" to get a response.
                            </div>
                            <div id="geminiError" class="text-red-400 mt-2 hidden"></div>
                        </div>
                    </div>

                    <!-- Coding Partner Feature -->
                    <div class="mb-8">
                        <h3 class="text-xl font-semibold dashboard-dark-text mb-3">Coding Partner ✨</h3>
                        <p class="dashboard-muted-text mb-3">Get explanations for code, generate snippets, or debug issues.</p>
                        <textarea id="codingPrompt" rows="6" class="w-full p-3 rounded-lg bg-culturemesh-light-bg border dashboard-border-dark dashboard-dark-text placeholder-dashboard-muted-text focus:outline-none focus:ring-2 focus:ring-secondary-color" placeholder="e.g., 'Explain this Python code: def factorial(n): ...', or 'Write a JavaScript function to sort an array.'"></textarea>
                        <button id="sendCodingPrompt" class="px-6 py-3 bg-secondary-color text-white font-semibold rounded-lg hover:bg-culturemesh-primary transition duration-200 mt-4 self-end">
                            Ask Coding Partner
                        </button>
                        <div class="mt-4 p-4 bg-culturemesh-light-bg rounded-lg border dashboard-border-dark">
                            <h4 class="text-lg font-semibold dashboard-dark-text mb-2">Coding Partner Response:</h4>
                            <div id="codingResponse" class="dashboard-dark-text whitespace-pre-wrap">
                                Ask your coding question here.
                            </div>
                            <div id="codingError" class="text-red-400 mt-2 hidden"></div>
                        </div>
                    </div>

                    <!-- Career Guide Feature -->
                    <div>
                        <h3 class="text-xl font-semibold dashboard-dark-text mb-3">Career Guide ✨</h3>
                        <p class="dashboard-muted-text mb-3">Receive advice on career paths, resume building, or interview preparation.</p>
                        <textarea id="careerPrompt" rows="4" class="w-full p-3 rounded-lg bg-culturemesh-light-bg border dashboard-border-dark dashboard-dark-text placeholder-dashboard-muted-text focus:outline-none focus:ring-2 focus:ring-culturemesh-accent" placeholder="e.g., 'What are key skills for a data scientist?', or 'Give me tips for a software engineering interview.'"></textarea>
                        <button id="sendCareerPrompt" class="px-6 py-3 bg-culturemesh-accent text-culturemesh-dark-text font-semibold rounded-lg hover:bg-culturemesh-secondary transition duration-200 mt-4 self-end">
                            Get Career Advice
                        </button>
                        <div class="mt-4 p-4 bg-culturemesh-light-bg rounded-lg border dashboard-border-dark">
                            <h4 class="text-lg font-semibold dashboard-dark-text mb-2">Career Guide Response:</h4>
                            <div id="careerResponse" class="dashboard-dark-text whitespace-pre-wrap">
                                Ask your career question here.
                            </div>
                            <div id="careerError" class="text-red-400 mt-2 hidden"></div>
                        </div>
                    </div>
                </section>

                <!-- 10. Settings Section (Dashboard) -->
                <section id="settings" class="tab-content">
                    <h2 class="text-3xl font-bold brand-heading mb-6">Global Settings</h2>
                    <p class="dashboard-muted-text mb-4">Manage your profile, application preferences, and system configurations.</p>

                    <!-- Settings Tab Navigation -->
                    <div class="flex flex-wrap gap-2 mb-6 border-b border-culturemesh-border">
                        <button class="settings-tab-btn active" data-settings-tab="profile" onclick="window.showSettingsTab('profile')">
                            <i class="fas fa-user-circle mr-2"></i> Profile
                        </button>
                        <button class="settings-tab-btn" data-settings-tab="domains" onclick="window.showSettingsTab('domains')">
                            <i class="fas fa-globe mr-2"></i> Domains & DNS
                        </button>
                        <button class="settings-tab-btn" data-settings-tab="email" onclick="window.showSettingsTab('email')">
                            <i class="fas fa-envelope mr-2"></i> Email Accounts
                        </button>
                        <button class="settings-tab-btn" data-settings-tab="company" onclick="window.showSettingsTab('company')">
                            <i class="fas fa-building mr-2"></i> Company Management
                        </button>
                        <button class="settings-tab-btn" data-settings-tab="advanced" onclick="window.showSettingsTab('advanced')">
                            <i class="fas fa-cogs mr-2"></i> Advanced
                        </button>
                    </div>

                    <!-- Settings Sub-Views -->
                    <div id="settings-profile" class="settings-sub-view panel p-6 rounded-lg shadow-md active">
                        <h3 class="text-2xl font-semibold mb-4">User Profile Settings</h3>
                        <form class="space-y-4">
                            <div class="form-control">
                                <label for="displayName" class="block text-sm font-medium mb-1">Display Name</label>
                                <input type="text" id="displayName" class="w-full p-2 border rounded-md" placeholder="Your display name">
                            </div>
                            <div class="form-control">
                                <label for="email" class="block text-sm font-medium mb-1">Email Address</label>
                                <input type="email" id="email" class="w-full p-2 border rounded-md" placeholder="your@email.com" readonly>
                            </div>
                            <div class="form-control">
                                <label for="defaultRegion" class="block text-sm font-medium mb-1">Default Region</label>
                                <select id="defaultRegion" class="w-full p-2 border rounded-md">
                                    <option value="global">Global</option>
                                    <option value="africa">Africa</option>
                                    <option value="europe">Europe</option>
                                    <option value="asia">Asia</option>
                                </select>
                            </div>
                            <div class="form-control">
                                <label for="autoClaimSetting" class="block text-sm font-medium mb-1">Auto-Claim Scrolls</label>
                                <select id="autoClaimSetting" class="w-full p-2 border rounded-md">
                                    <option value="yes">Yes</option>
                                    <option value="no">No</option>
                                    <option value="prompt">Prompt Me</option>
                                </select>
                            </div>
                            <button type="submit" class="form-action-button px-4 py-2 rounded-md">Save Profile Settings</button>
                        </form>
                    </div>

                    <div id="settings-domains" class="settings-sub-view panel p-6 rounded-lg shadow-md hidden">
                        <h3 class="text-2xl font-semibold mb-4">Domain & DNS Management</h3>

                        <div class="mb-6">
                            <h4 class="text-xl font-semibold mb-3">Your Domains</h4>
                            <ul id="domainList" class="list-disc pl-5 space-y-2">
                                <!-- Domains will be rendered here by JS -->
                            </ul>
                            <div class="mt-4 flex flex-col md:flex-row gap-4">
                                <input type="text" id="newDomainName" class="flex-grow p-2 border rounded-md" placeholder="Add new domain (e.g., mynewheritage.com)">
                                <button class="form-action-button px-4 py-2 rounded-md" onclick="window.showMessage('Domain Add', 'Adding new domain functionality coming soon!')">Add Domain</button>
                            </div>
                        </div>

                        <div class="mb-6">
                            <h4 class="text-xl font-semibold mb-3">Add-on Domains</h4>
                            <p class="text-sm dashboard-muted-text mb-3">Link additional domains to existing primary domains.</p>
                            <div class="flex flex-col md:flex-row gap-4">
                                <input type="text" id="addonDomainName" class="flex-grow p-2 border rounded-md" placeholder="Add-on domain (e.g., blog.myheritage.com)">
                                <select id="addonDomainTarget" class="p-2 border rounded-md">
                                    <!-- Options populated by JS -->
                                </select>
                                <button class="form-action-button px-4 py-2 rounded-md" onclick="window.showMessage('Add-on Domain', 'Add-on domain functionality coming soon!')">Link Domain</button>
                            </div>
                        </div>

                        <div>
                            <h4 class="text-xl font-semibold mb-3">DNS Records</h4>
                            <div class="overflow-x-auto mb-4">
                                <table class="min-w-full api-key-table bg-white rounded-lg shadow-inner">
                                    <thead>
                                        <tr class="bg-culturemesh-light-bg text-culturemesh-dark-text uppercase text-sm leading-normal">
                                            <th class="py-3 px-4 text-left">Type</th>
                                            <th class="py-3 px-4 text-left">Name</th>
                                            <th class="py-3 px-4 text-left">Value</th>
                                            <th class="py-3 px-4 text-left">TTL</th>
                                            <th class="py-3 px-4 text-right">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="dnsRecordsTableBody" class="text-culturemesh-muted-text text-sm font-light">
                                        <!-- DNS records will be rendered here by JS -->
                                    </tbody>
                                </table>
                            </div>
                            <div class="flex flex-col md:flex-row gap-4 mt-4">
                                <input type="text" id="dnsRecordTypeInput" class="flex-grow p-2 border rounded-md" placeholder="DNS Record Type (e.g., A, CNAME, MX)">
                                <button id="explainDnsBtn" class="form-action-button px-4 py-2 rounded-md">
                                    ✨ Explain DNS Type
                                </button>
                            </div>
                            <p id="dnsExplainStatus" class="text-xs dashboard-muted-text mt-1 hidden"></p>
                            <div id="dnsExplanationOutput" class="mt-4 p-3 bg-culturemesh-light-bg rounded-md border border-culturemesh-border text-culturemesh-dark-text hidden">
                                <!-- DNS explanation will appear here -->
                            </div>
                        </div>
                    </div>

                    <div id="settings-email" class="settings-sub-view panel p-6 rounded-lg shadow-md hidden">
                        <h3 class="text-2xl font-semibold mb-4">Email Accounts</h3>
                        <p class="dashboard-muted-text mb-4">Manage your CultureMesh email addresses.</p>

                        <div class="mb-6">
                            <h4 class="text-xl font-semibold mb-3">Create New Email Account</h4>
                            <div class="flex flex-col md:flex-row items-center gap-2">
                                <input type="text" id="newEmailPrefix" class="p-2 border rounded-md flex-grow" placeholder="username">
                                <span class="dashboard-dark-text">@</span>
                                <select id="newEmailDomain" class="p-2 border rounded-md">
                                    <!-- Domains will be populated here from appData.domains -->
                                </select>
                                <button id="createEmailBtn" class="form-action-button px-4 py-2 rounded-md">
                                    Create Email
                                </button>
                            </div>
                        </div>

                        <div>
                            <h4 class="text-xl font-semibold mb-3">Existing Email Accounts</h4>
                            <div class="overflow-x-auto">
                                <table class="min-w-full api-key-table bg-white rounded-lg shadow-inner">
                                    <thead>
                                        <tr class="bg-culturemesh-light-bg text-culturemesh-dark-text uppercase text-sm leading-normal">
                                            <th class="py-3 px-4 text-left">Email Address</th>
                                            <th class="py-3 px-4 text-left">Status</th>
                                            <th class="py-3 px-4 text-right">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="emailAccountsTableBody" class="text-culturemesh-muted-text text-sm font-light">
                                        <!-- Email accounts will be rendered here by JS -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div id="settings-company" class="settings-sub-view panel p-6 rounded-lg shadow-md hidden">
                        <h3 class="text-2xl font-semibold mb-4">Company & Infrastructure</h3>
                        <p class="dashboard-muted-text mb-4">Select a company to view and manage its associated infrastructure and protocols.</p>

                        <div id="settingsCompanySelectionGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-8">
                            <!-- Company cards will be rendered here by JS -->
                        </div>

                        <div id="settingsCompanyDetailsOutput" class="company-details-section p-6 rounded-lg shadow-md hidden">
                            <!-- Company details will be rendered here by JS -->
                        </div>
                    </div>

                    <div id="settings-advanced" class="settings-sub-view panel p-6 rounded-lg shadow-md hidden">
                        <h3 class="text-2xl font-semibold mb-4">Advanced Settings</h3>
                        <p class="dashboard-muted-text mb-4">Caution: These settings are for experienced users only.</p>

                        <div class="space-y-6">
                            <div class="form-control">
                                <label for="apiLogLevel" class="block text-sm font-medium mb-1">API Log Level</label>
                                <select id="apiLogLevel" class="w-full p-2 border rounded-md">
                                    <option value="info">Info</option>
                                    <option value="warn">Warn</option>
                                    <option value="error">Error</option>
                                    <option value="debug">Debug</option>
                                </select>
                                <button class="form-action-button px-4 py-2 rounded-md mt-2" onclick="window.showMessage('Log Level', 'API Log Level updated (simulated).')">Update Log Level</button>
                            </div>

                            <div class="form-control">
                                <label for="dataRetentionPeriod" class="block text-sm font-medium mb-1">Data Retention Period (Days)</label>
                                <input type="number" id="dataRetentionPeriod" class="w-full p-2 border rounded-md" value="365">
                                <button class="form-action-button px-4 py-2 rounded-md mt-2" onclick="window.showMessage('Data Retention', 'Data Retention Period updated (simulated).')">Set Retention</button>
                            </div>

                            <div class="form-control">
                                <h4 class="text-xl font-semibold mb-2">Danger Zone</h4>
                                <p class="text-red-500 text-sm mb-3">Proceed with extreme caution. These actions are irreversible.</p>
                                <button class="bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 transition duration-200" onclick="window.showMessage('Reset App', 'Resetting application data (simulated). This would delete all your data!')">
                                    <i class="fas fa-exclamation-triangle mr-2"></i> Reset Application Data
                                </button>
                            </div>
                        </div>
                    </div>
                </section>
            </main>
        </div>
    </div>

    <!-- Banimal Landing Page Content -->
    <section id="banimal-landing-page" class="hidden content-section">
        <canvas id="banimal-canvas"></canvas>
        <div class="banimal-hero-content">
            <h1>Banimal™: <br> <span>🐑Kind Creatures. Global Impact.</span></h1>
            <p>
                Discover Banimal's world of thoughtful baby essentials & innovative lighting. For every purchase, we deliver the same item to a child in need, identified by the Baobab Security Network's data-driven insights.
            </p>
            <div class="button-container flex flex-wrap justify-center gap-4 mt-6">
                <a href="javascript:void(0)" class="cta-button" onclick="window.showMessage('Simulating: Exploring Banimal World.')">
                    Explore Banimal's World <i class="fas fa-arrow-right"></i>
                </a>
                <a href="https://www.banimal.co.za/" target="_blank" class="cta-button shop-now-button">
                    Shop Now <i class="fas fa-external-link-alt"></i>
                </a>
            </div>
        </div>
    </section>

    <footer class="py-8 px-6 md:px-12 text-center">
        © 2025 CultureMesh Protocol. All Rights Reserved. Powered by ☯ glyphs + Vault API. Synced with Seedwave™.
        <div class="mt-4 space-x-4">
            <a href="https://ritual.seedwave.faa.zone/privacy" class="text-white hover:text-culturemesh-accent text-xs">Privacy</a>
            <a href="https://ritual.seedwave.faa.zone/terms" class="text-white hover:text-culturemesh-accent text-xs">Terms</a>
            <a href="https://ritual.seedwave.faa.zone/contact" class="text-white hover:text-culturemesh-accent text-xs">Contact</a>
            <a href="https://ritual.seedwave.faa.zone/copyright" class="text-white hover:text-culturemesh-accent text-xs">Copyright</a>
            <a href="https://ritual.seedwave.faa.zone/developers" class="text-white hover:text-culturemesh-accent text-xs">Developers</a>
            <a href="https://ritual.seedwave.faa.zone/vaultmesh" class="text-white hover:text-culturemesh-accent text-xs">VaultMesh</a>
            <a href="https://ritual.seedwave.faa.zone/fruitful" class="text-white hover:text-culturemesh-accent text-xs">Fruitful</a>
            <a href="https://ritual.seedwave.faa.zone/faa.zone" class="text-white hover:text-culturemesh-accent text-xs">FAA.ZONE</a>
            <a href="https://ritual.seedwave.faa.zone/about" class="text-white hover:text-culturemesh-accent text-xs">About</a>
            <a href="https://ritual.seedwave.faa.zone/accessibility" class="text-white hover:text-culturemesh-accent text-xs">Accessibility</a>
        </div>
    </footer>

    <!-- Custom Message Modal -->
    <div id="messageModal" class="modal hidden">
        <div class="modal-content">
            <span class="close-button" onclick="window.closeMessageModal()">&times;</span>
            <p id="modalMessage" class="text-lg font-semibold text-culturemesh-dark-text"></p>
            <button class="primary-btn mt-4 px-6 py-2 rounded-lg" onclick="window.closeMessageModal()">OK</button>
        </div>
    </div>

    <div id="emailDraftModal" class="custom-modal-overlay hidden">
        <div class="custom-modal-content max-w-xl w-full h-auto">
            <div class="template-preview-header">
                <h3 id="emailDraftTitle">Draft Email</h3>
                <button class="close-preview-btn" onclick="hideEmailDraftModal()"><i class="fas fa-times"></i></button>
            </div>
            <div class="template-preview-body text-left">
                <p class="text-culturemesh-muted-text text-sm mb-2">To: <span id="emailDraftTo"></span></p>
                <div class="form-control">
                    <label for="emailPurposeInput" class="text-culturemesh-dark-text text-sm mb-1">Purpose of Email</label>
                    <input type="text" id="emailPurposeInput" placeholder="e.g., Welcome new user, Support query, Marketing announcement" class="w-full p-2 rounded-md bg-culturemesh-light-bg border border-culturemesh-border text-culturemesh-dark-text text-sm">
                </div>
                <button type="button" id="generateEmailDraftBtn" class="form-action-button text-xs px-3 py-2">
                    ✨ Generate Draft
                </button>
                <p id="emailDraftStatus" class="text-xs dashboard-muted-text mt-1 hidden"></p>
                <textarea id="generatedEmailDraftOutput" rows="10" class="w-full p-2 border border-culturemesh-border rounded-md bg-culturemesh-light-bg text-culturemesh-dark-text mt-2" placeholder="Your AI-generated email draft will appear here..." readonly></textarea>
                <div class="template-preview-actions">
                    <button class="btn-primary" onclick="document.execCommand('copy'); window.showMessage('Email Copied', 'Email draft copied to clipboard!', true);">Copy to Clipboard</button>
                    <button class="btn-secondary" onclick="hideEmailDraftModal()">Close</button>
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Firebase Configuration (provided by Canvas environment)
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');

        // Initialize Firebase
        let app;
        let db;
        let auth;
        let userId = 'anonymous'; // Default to anonymous

        // --- Global Variables and Initial Setup ---
        let googleMapScriptLoaded = false;
        let leafletMapInstance = null; // Store Leaflet map instance
        let activeMainSection = 'culturemesh-dashboard-wrapper'; // Default active main section for this dashboard file
        let activeDashboardSectionTab = 'overview'; // Default active dashboard sub-section
        let activeMusicSubSection = 'allMusic'; // Default active music sub-section (if applicable)
        let banimalAnimationFrameId; // Store Banimal canvas animation frame ID

        // Banimal Canvas Variables (re-themed for CultureMesh)
        let banimalCanvas;
        let banimalCtx;
        let banimalParticles = [];
        const numBanimalParticles = 100;

        // Particle class for Banimal canvas
        class BanimalParticle {
            constructor() {
                this.x = Math.random() * banimalCanvas.width;
                this.y = Math.random() * banimalCanvas.height;
                this.size = Math.random() * 5 + 1;
                this.speedX = Math.random() * 3 - 1.5;
                this.speedY = Math.random() * 3 - 1.5;
                // Using CultureMesh palette for particles
                const colors = ['#A820A3', '#F4D03F', '#6A0572', '#E6D0E8'];
                this.color = colors[Math.floor(Math.random() * colors.length)];
            }

            update() {
                this.x += this.speedX;
                this.y += this.speedY;

                if (this.size > 0.2) this.size -= 0.01;

                if (this.x < 0 || this.x > banimalCanvas.width) this.speedX *= -1;
                if (this.y < 0 || this.y > banimalCanvas.height) this.speedY *= -1;
            }

            draw() {
                banimalCtx.fillStyle = this.color;
                banimalCtx.beginPath();
                banimalCtx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                banimalCtx.fill();
            }
        }

        // --- Simulated Data (for offline demo and initial rendering) ---
        let simulatedCulturalData = [
            { id: 'cd1', name: 'Ndebele Mural Patterns Archive', type: 'Visual Arts', status: 'Validated', lastUpdated: '2024-06-15' },
            { id: 'cd2', name: 'Khoisan Oral Histories Collection', type: 'Oral History', status: 'Processing', lastUpdated: '2024-07-01' },
            { id: 'cd3', name: 'Basotho Blanket Design Index', type: 'Traditional Craft', status: 'Pending Review', lastUpdated: '2024-06-28' },
            { id: 'cd4', name: 'Zulu Dance Choreography', type: 'Performance Arts', status: 'Validated', lastUpdated: '2024-06-20' },
            { id: 'cd5', name: 'Indian Diaspora Culinary Traditions', type: 'Culinary Heritage', status: 'Processing', lastUpdated: '2024-07-02' },
            { id: 'cd6', name: 'Afrikaans Folk Music Scores', type: 'Musical Heritage', status: 'Validated', lastUpdated: '2024-06-25' },
        ];

        let simulatedMedia = [
            { id: 'm1', title: 'Zulu Wedding Ceremony', type: 'Video', description: 'Recorded 2023-09-10.', url: 'https://placehold.co/200x150/6A0572/F4D03F?text=Video' },
            { id: 'm2', title: 'San Bushman Storytelling', type: 'Audio', description: 'Oral history from 1980s.', url: 'https://placehold.co/200x150/A820A3/F4D03F?text=Audio' },
            { id: 'm3', title: 'Sacred Ndebele Patterns', type: 'Image', description: 'Detailed imagery of traditional art.', url: 'https://placehold.co/200x150/F4D03F/6A0572?text=Image' },
        ];

        let simulatedProvenanceRecords = [
            { id: 'p1', contentId: 'cd1', event: 'Initial Ingestion', timestamp: '2023-01-15 10:30 SAST', hash: '0xabc1234567890def' },
            { id: 'p2', contentId: 'cd1', event: 'Community Validation', timestamp: '2023-01-20 14:00 SAST', hash: '0xdef4567890abc1' },
            { id: 'p3', contentId: 'cd2', event: 'Expert Review Approval', timestamp: '2023-02-01 09:00 SAST', hash: '0xghi7890123456def' },
            { id: 'p4', contentId: 'cd2', event: 'Linked to CultureMesh Vault', timestamp: '2023-02-05 11:45 SAST', hash: '0xjkl01234567890' },
        ];

        let simulatedDiscussionPosts = [
            { id: 'd1', title: 'The Role of Water in Cleansing Rituals', author: 'CommunityMember123', timestamp: '2 hours ago', content: "I've been researching the use of water in various African cleansing ceremonies. It seems to symbolize purity and renewal across many cultures. Does anyone have insights into specific regional variations or historical contexts?", likes: 15, comments: 3 },
            { id: 'd2', title: 'Challenges in Documenting Oral Traditions', author: 'HeritagePreserver', timestamp: 'yesterday', content: "What are the best practices for accurately capturing and transcribing oral histories, especially when dealing with multiple dialects or nuanced storytelling? Any tools or methodologies recommended?", likes: 22, comments: 8 },
        ];

        let simulatedLearningResources = [
            { id: 'lr1', title: 'Webinar: Digital Ethics in Heritage Preservation', type: 'Webinar', date: '2024-07-20', speaker: 'Dr. Naledi Mokoena', description: 'Explore the ethical considerations of digitizing indigenous knowledge.', action: 'Register Now' },
            { id: 'lr2', title: 'Guide: Understanding Ancestral Lineage', type: 'Guide', format: 'PDF', author: 'CultureMesh Team', description: 'A comprehensive guide to researching and tracing your family\'s heritage.', action: 'Download Guide' },
        ];


        // --- Chart Instances ---
        let culturalDomainChartInstance;
        let ingestionProgressChartInstance;
        let overallStatusChartInstance;
        let monthlyRateChartInstance;
        let analyticsCulturalTypeChartInstance;
        let communityActivityChartInstance;

        // --- Custom Message Modal Functions ---
        window.showMessage = function(title, message, isSuccess = true) {
            const modal = document.getElementById('messageModal');
            const modalMessage = document.getElementById('modalMessage');
            const modalTitle = modal.querySelector('p:first-child'); // Assuming first p is title
            
            modalTitle.textContent = title;
            modalMessage.textContent = message;
            
            if (isSuccess) {
                modalTitle.classList.remove('text-red-600');
                modalTitle.classList.add('text-culturemesh-primary');
            } else {
                modalTitle.classList.remove('text-culturemesh-primary');
                modalTitle.classList.add('text-red-600');
            }
            
            modal.classList.remove('hidden');
        }

        window.closeMessageModal = function() {
            const modal = document.getElementById('messageModal');
            modal.classList.add('hidden');
        }

        // --- Main Dashboard Functions ---

        // Function to toggle main dashboard sections
        window.showMainSection = function(sectionIdToShow) {
            // Stop any active canvas animations
            if (banimalAnimationFrameId) {
                cancelAnimationFrame(banimalAnimationFrameId);
                banimalAnimationFrameId = null;
            }

            // Hide all landing page sections AND the dashboard wrapper
            document.querySelectorAll('.landing-section').forEach(section => {
                section.classList.add('hidden');
            });
            document.getElementById('culturemesh-dashboard-wrapper').classList.add('hidden');
            document.getElementById('culturemesh-dashboard-wrapper').classList.remove('flex');

            // Show the selected section
            const sectionToShow = document.getElementById(sectionIdToShow);
            if (sectionToShow) {
                sectionToShow.classList.remove('hidden');
            }

            // Update active state for main header navigation links
            document.querySelectorAll('header nav a').forEach(link => {
                link.classList.remove('header-nav-active');
            });
            const clickedLink = document.querySelector(`header nav a[href*="${sectionIdToShow}"]`);
            if (clickedLink) {
                clickedLink.classList.add('header-nav-active');
            }

            // Special handling for dashboard display
            if (sectionIdToShow === 'culturemesh-dashboard-wrapper') {
                sectionToShow.classList.add('flex'); // Ensure dashboard wrapper uses flex for layout
                requestAnimationFrame(() => {
                    window.showDashboardSectionTab(activeDashboardSectionTab);
                });
            } else {
                // Ensure dashboard content is hidden when not viewing dashboard
                document.querySelectorAll('#culturemesh-dashboard-wrapper main section').forEach(section => {
                    section.classList.add('hidden');
                });
            }

            // Special handling for Banimal page to start canvas animation
            if (sectionIdToShow === 'banimal-landing-page') {
                window.initBanimalParticles();
                window.animateBanimalCanvas();
            }

            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Function to load terminal content into the iframe (from landing page)
        window.loadTerminal = function(url) {
            document.getElementById('vault-frame').src = url;
            // Remove ring from all buttons and add to the clicked one
            document.querySelectorAll('.terminal-btn').forEach(btn => btn.classList.remove('ring', 'ring-culturemesh-accent'));
            // Use event.currentTarget to ensure the clicked button is targeted
            if (event && event.currentTarget) {
                event.currentTarget.classList.add('ring', 'ring-culturemesh-accent');
            }
            console.log("🧬 Terminal loaded:", url);
        }

        // Script for Share Signal (mock price update from landing page)
        window.updateSharePrice = function() {
            const mockPrice = (80 + Math.random() * 10).toFixed(2);
            document.getElementById('price').innerText = `$${mockPrice}`;
            document.getElementById('timestamp').innerText = new Date().toLocaleTimeString();
        }

        // Chart.js for CultureMesh Growth & Impact (from landing page)
        window.initializeBrandChart = function() {
            const ctx = document.getElementById('brandChart')?.getContext('2d');
            if (ctx) {
                new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: ['Q1', 'Q2', 'Q3', 'Q4'],
                        datasets: [{
                            label: 'Cultural Data Ingested (Thousands)',
                            data: [30, 70, 130, 210], /* Adjusted data for CultureMesh context */
                            borderWidth: 2,
                            borderColor: 'var(--culturemesh-accent)', /* Vibrant yellow */
                            tension: 0.4,
                            fill: true,
                            backgroundColor: 'rgba(244, 208, 63, 0.15)', /* Yellow with transparency */
                            pointRadius: 4,
                            pointBackgroundColor: 'var(--culturemesh-accent)',
                            pointBorderColor: 'var(--culturemesh-card-bg)',
                            pointHoverRadius: 6
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                grid: {
                                    color: 'rgba(106, 5, 114, 0.1)', /* Light purple grid lines */
                                    drawBorder: false
                                },
                                ticks: {
                                    color: 'var(--culturemesh-dark-text)'
                                }
                            },
                            x: {
                                grid: {
                                    color: 'rgba(106, 5, 114, 0.1)',
                                    drawBorder: false
                                },
                                ticks: {
                                    color: 'var(--culturemesh-dark-text)'
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                display: false,
                                labels: {
                                    color: 'var(--culturemesh-dark-text)'
                                }
                            }
                        }
                    }
                });
            }
        }

        // --- CultureMesh Master Dashboard Functions ---

        // Function to switch between tabs/sections within the CultureMesh Dashboard
        window.showDashboardSectionTab = function(tabId) {
            // Deactivate all sidebar tab buttons
            document.querySelectorAll('#culturemesh-dashboard-wrapper .dashboard-sidebar-nav-item').forEach(button => {
                button.classList.remove('active');
            });
            // Hide all tab content sections
            document.querySelectorAll('#culturemesh-dashboard-wrapper .tab-content').forEach(content => {
                content.classList.remove('active');
            });

            // Activate the clicked sidebar tab button
            const clickedSidebarButton = document.querySelector(`#culturemesh-dashboard-wrapper .dashboard-sidebar-nav-item[data-tab="${tabId}"]`);
            if (clickedSidebarButton) {
                clickedSidebarButton.classList.add('active');
            } else {
                console.error(`Dashboard sidebar button with data-tab="${tabId}" not found.`);
                return;
            }

            // Show its corresponding content section
            const contentSection = document.getElementById(tabId);
            if (contentSection) {
                contentSection.classList.add('active');
            } else {
                console.error(`Dashboard content section with id="${tabId}" not found.`);
                return;
            }

            // Update global activeDashboardSectionTab
            activeDashboardSectionTab = tabId;

            // Re-render charts when their section becomes active to ensure they draw correctly
            requestAnimationFrame(() => {
                if (tabId === 'overview') {
                    window.updateOverviewMetrics();
                    window.updateCulturalDomainChart();
                    window.updateIngestionProgressChart();
                } else if (tabId === 'documentation-progress') {
                    window.updateProgressMetrics();
                    window.populateProgressTable();
                    window.updateOverallStatusChart();
                    window.updateMonthlyRateChart();
                } else if (tabId === 'totemtrack') {
                    window.renderCulturalDataList();
                } else if (tabId === 'vaultspirit') {
                    window.renderMediaList();
                } else if (tabId === 'glyphtag') {
                    window.renderProvenanceChainDisplay();
                } else if (tabId === 'scrollloop') {
                    window.renderDiscussionPosts();
                    window.renderLearningResources();
                } else if (tabId === 'analytics') {
                    window.updateAnalyticsCulturalTypeChart();
                    window.updateCommunityActivityChart();
                } else if (tabId === 'settings') {
                    loadSettings();
                    showSettingsTab('profile');
                }
            });
        }

        // --- Overview Section Functions (Dashboard) ---
        window.updateOverviewMetrics = function() {
            document.getElementById('totalRitualsCount').textContent = simulatedCulturalData.length;
            document.getElementById('activeContributorsCount').textContent = 250; // Simulated active communities
            document.getElementById('storageUsed').textContent = (simulatedCulturalData.length * 0.1 + Math.random() * 5).toFixed(2) + ' TB'; // Simulated global coverage
        }

        window.updateCulturalDomainChart = function() {
            const ctx = document.getElementById('culturalDomainChart')?.getContext('2d');
            if (!ctx) return;

            const counts = {};
            simulatedCulturalData.forEach(data => {
                counts[data.type] = (counts[data.type] || 0) + 1;
            });

            const labels = Object.keys(counts);
            const data = Object.values(counts);
            const colors = ['#A820A3', '#F4D03F', '#6A0572', '#E6D0E8', '#FF8C00']; // CultureMesh colors

            if (culturalDomainChartInstance) {
                culturalDomainChartInstance.destroy();
            }

            culturalDomainChartInstance = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: labels,
                    datasets: [{
                        data: data,
                        backgroundColor: labels.map((_, i) => colors[i % colors.length]),
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                color: 'var(--culturemesh-dark-text)'
                            }
                        },
                        title: {
                            display: false
                        }
                    }
                }
            });
        }

        window.updateIngestionProgressChart = function() {
            const ctx = document.getElementById('ingestionProgressChart')?.getContext('2d');
            if (!ctx) return;

            const statusCounts = {};
            simulatedCulturalData.forEach(data => {
                statusCounts[data.status] = (statusCounts[data.status] || 0) + 1;
            });

            const labels = ['Validated', 'Processing', 'Pending Review'];
            const data = [
                statusCounts['Validated'] || 0,
                statusCounts['Processing'] || 0,
                statusCounts['Pending Review'] || 0
            ];
            const colors = ['var(--culturemesh-accent)', 'var(--culturemesh-secondary)', 'var(--culturemesh-primary)'];

            if (ingestionProgressChartInstance) {
                ingestionProgressChartInstance.destroy();
            }

            ingestionProgressChartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Number of Data Streams',
                        data: data,
                        backgroundColor: colors,
                        borderColor: colors,
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        title: {
                            display: false
                        }
                    },
                    scales: {
                        x: {
                            ticks: {
                                color: 'var(--culturemesh-dark-text)'
                            },
                            grid: {
                                color: 'rgba(0,0,0,0.1)'
                            }
                        },
                        y: {
                            beginAtZero: true,
                            ticks: {
                                color: 'var(--culturemesh-dark-text)'
                            },
                            grid: {
                                color: 'rgba(0,0,0,0.1)'
                            }
                        }
                    }
                }
            });
        }

        // --- Data Ingestion Progress Section Functions (Dashboard) ---
        window.updateProgressMetrics = function() {
            const total = simulatedCulturalData.length;
            const inProgress = simulatedCulturalData.filter(d => d.status === 'Processing' || d.status === 'Pending Review').length;
            const completed = simulatedCulturalData.filter(d => d.status === 'Validated').length;

            document.getElementById('docProgressTotalEntries').textContent = total;
            document.getElementById('docProgressInProgress').textContent = inProgress;
            document.getElementById('docProgressCompletedVerified').textContent = completed;
        }

        window.populateProgressTable = function() {
            const tableBody = document.getElementById('docProgressTableBody');
            if (!tableBody) return;

            tableBody.innerHTML = ''; // Clear existing rows

            simulatedCulturalData.forEach(data => {
                const row = document.createElement('tr');
                row.className = 'border-b border-gray-200 hover:bg-culturemesh-light-bg';

                let statusClass = '';
                if (data.status === 'Validated') {
                    statusClass = 'bg-culturemesh-accent text-culturemesh-primary';
                } else if (data.status === 'Processing') {
                    statusClass = 'bg-yellow-200 text-yellow-800';
                } else if (data.status === 'Pending Review') {
                    statusClass = 'bg-red-200 text-red-800';
                }

                row.innerHTML = `
                    <td class="py-3 px-6 text-left whitespace-nowrap">${data.name}</td>
                    <td class="py-3 px-6 text-left">${data.type}</td>
                    <td class="py-3 px-6 text-left"><span class="py-1 px-3 rounded-full text-xs ${statusClass}">${data.status}</span></td>
                    <td class="py-3 px-6 text-left">${data.lastUpdated}</td>
                    <td class="py-3 px-6 text-center">
                        <button class="text-culturemesh-secondary hover:text-culturemesh-primary text-sm" onclick="window.showMessage('Simulating view details for ${data.name}')">View</button>
                    </td>
                `;
                tableBody.appendChild(row);
            });
        }

        window.updateOverallStatusChart = function() {
            const ctx = document.getElementById('overallStatusChart')?.getContext('2d');
            if (!ctx) return;

            const validatedCount = simulatedCulturalData.filter(d => d.status === 'Validated').length;
            const processingCount = simulatedCulturalData.filter(d => d.status === 'Processing').length;
            const pendingReviewCount = simulatedCulturalData.filter(d => d.status === 'Pending Review').length;

            const labels = ['Validated', 'Processing', 'Pending Review'];
            const data = [validatedCount, processingCount, pendingReviewCount];
            const colors = ['var(--culturemesh-accent)', 'var(--culturemesh-secondary)', 'var(--culturemesh-primary)'];

            if (overallStatusChartInstance) {
                overallStatusChartInstance.destroy();
            }

            overallStatusChartInstance = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: labels,
                    datasets: [{
                        data: data,
                        backgroundColor: colors,
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                color: 'var(--culturemesh-dark-text)'
                            }
                        },
                        title: {
                            display: false
                        }
                    }
                }
            });
        }

        window.updateMonthlyRateChart = function() {
            const ctx = document.getElementById('monthlyRateChart')?.getContext('2d');
            if (!ctx) return;

            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'];
            const newDataAdded = [8, 10, 15, 12, 9, 18]; // Example data for new data streams

            if (monthlyRateChartInstance) {
                monthlyRateChartInstance.destroy();
            }

            monthlyRateChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: months,
                    datasets: [{
                        label: 'New Data Streams Ingested',
                        data: newDataAdded,
                        borderColor: 'var(--culturemesh-primary)',
                        backgroundColor: 'rgba(106, 5, 114, 0.2)',
                        tension: 0.3,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        title: {
                            display: false
                        }
                    },
                    scales: {
                        x: {
                            ticks: {
                                color: 'var(--culturemesh-dark-text)'
                            },
                            grid: {
                                color: 'rgba(0,0,0,0.1)'
                            }
                        },
                        y: {
                            beginAtZero: true,
                            ticks: {
                                color: 'var(--culturemesh-dark-text)'
                            },
                            grid: {
                                color: 'rgba(0,0,0,0.1)'
                            }
                        }
                    }
                }
            });
        }

        // --- Cultural Data Vault Section Functions (Dashboard) ---
        window.handleAddTotemForm = function(event) {
            event.preventDefault();
            const dataName = document.getElementById('totemName').value.trim();
            const dataDescription = document.getElementById('totemDescription').value.trim();
            const dataOrigin = document.getElementById('totemOrigin').value.trim();
            // const dataFile = document.getElementById('totemImage').files[0]; // For real upload

            if (!dataName) {
                window.showMessage('Data Record Name is required!');
                return;
            }

            const newData = {
                id: `cd${Date.now()}`,
                name: dataName,
                description: dataDescription,
                origin: dataOrigin,
                // fileUrl: dataFile ? 'simulated-url-for-uploaded-file.jpg' : '' // For real upload
            };
            simulatedCulturalData.push(newData);
            window.renderCulturalDataList();
            window.showMessage('Success', 'Data record added. In a real app, this would save to Firestore.', true);
            document.getElementById('addTotemForm').reset();
        }

        window.renderCulturalDataList = function() {
            const dataListContainer = document.getElementById('totemList');
            if (!dataListContainer) return;

            dataListContainer.innerHTML = '';
            if (simulatedCulturalData.length === 0) {
                dataListContainer.innerHTML = '<p class="dashboard-muted-text text-center">No cultural data records yet. Add one above!</p>';
                return;
            }

            simulatedCulturalData.forEach(data => {
                const card = document.createElement('div');
                card.className = 'dashboard-sub-card p-4 rounded-lg flex items-center justify-between';
                card.innerHTML = `
                    <div>
                        <p class="font-semibold dashboard-dark-text">${data.name}</p>
                        <p class="dashboard-muted-text text-sm">${data.description}</p>
                    </div>
                    <button class="primary-btn px-4 py-2 rounded-md text-sm" onclick="window.showMessage('Simulating: Viewing details for ${data.name}.')">View Details</button>
                `;
                dataListContainer.appendChild(card);
            });
        }

        // --- Media & Artifact Upload Section Functions (Dashboard) ---
        window.handleUploadMediaForm = function(event) {
            event.preventDefault();
            const mediaTitle = document.getElementById('mediaTitle').value.trim();
            const mediaType = document.getElementById('mediaType').value;
            const mediaDescription = document.getElementById('mediaDescription').value.trim();
            // const mediaFile = document.getElementById('mediaFile').files[0]; // For real upload

            if (!mediaTitle || !mediaType) {
                window.showMessage('Error', 'Media Title and Type are required!', false);
                return;
            }

            const newMedia = {
                id: `m${Date.now()}`,
                title: mediaTitle,
                type: mediaType,
                description: mediaDescription,
                url: `https://placehold.co/200x150/${Math.floor(Math.random()*16777215).toString(16)}/${Math.floor(Math.random()*16777215).toString(16)}?text=${mediaType}` // Simulated URL with random colors
            };
            simulatedMedia.push(newMedia);
            window.renderMediaList();
            window.showMessage('Success', 'Media uploaded. In a real app, this would use Firebase Storage.', true);
            document.getElementById('uploadMediaForm').reset();
        }

        window.renderMediaList = function() {
            const mediaListContainer = document.getElementById('mediaList');
            if (!mediaListContainer) return;

            mediaListContainer.innerHTML = '';
            if (simulatedMedia.length === 0) {
                mediaListContainer.innerHTML = '<p class="dashboard-muted-text text-center">No media vaulted yet. Upload some above!</p>';
                return;
            }

            simulatedMedia.forEach(media => {
                const card = document.createElement('div');
                card.className = 'dashboard-sub-card p-4 rounded-lg flex items-center justify-between';
                card.innerHTML = `
                    <div>
                        <p class="font-semibold dashboard-dark-text">${media.title} (${media.type})</p>
                        <p class="dashboard-muted-text text-sm">${media.description}</p>
                    </div>
                    <button class="primary-btn px-4 py-2 rounded-md text-sm" onclick="window.showMessage('Simulating: Playing/Viewing ${media.title}.')">Play/View</button>
                `;
                mediaListContainer.appendChild(card);
            });
        }

        // --- Provenance & Verification Section Functions (Dashboard) ---
        window.handleVerifyProvenanceForm = function(event) {
            event.preventDefault();
            const hashInput = document.getElementById('provenanceHash').value.trim();
            const resultDisplay = document.getElementById('verificationResult');

            if (!hashInput) {
                resultDisplay.textContent = 'Please enter a hash to verify.';
                return;
            }

            const found = simulatedProvenanceRecords.find(record => record.hash === hashInput);
            if (found) {
                resultDisplay.innerHTML = `
                    <p class="text-culturemesh-accent font-bold">Hash Verified! <i class="fas fa-check-circle"></i></p>
                    <p class="text-sm mt-2">Content ID: ${found.contentId}</p>
                    <p class="text-sm">Event: ${found.event}</p>
                    <p class="text-sm">Timestamp: ${found.timestamp}</p>
                `;
            } else {
                resultDisplay.innerHTML = `
                    <p class="text-red-600 font-bold">Hash Not Found or Invalid. <i class="fas fa-times-circle"></i></p>
                    <p class="text-sm mt-2">This hash does not match any known provenance record.</p>
                `;
            }
        }

        window.handleGenerateGlyphTagForm = function(event) {
            event.preventDefault();
            const contentId = document.getElementById('contentIdToTag').value.trim();
            const description = document.getElementById('taggingDescription').value.trim();
            const generatedHashDisplay = document.getElementById('generatedHash');

            if (!contentId) {
                window.showMessage('Error', 'Content ID is required to generate a Provenance Tag!', false);
                return;
            }

            const newHash = `0x${Math.random().toString(16).substring(2, 10)}${Math.random().toString(16).substring(2, 10)}${Math.random().toString(16).substring(2, 10)}${Math.random().toString(16).substring(2, 10)}`;
            const newRecord = {
                id: `p${Date.now()}`,
                contentId: contentId,
                event: description || 'New Provenance Tag generated',
                timestamp: new Date().toLocaleString(),
                hash: newHash
            };
            simulatedProvenanceRecords.push(newRecord);
            generatedHashDisplay.innerHTML = `
                <p class="text-culturemesh-accent font-bold">Provenance Tag Generated! <i class="fas fa-check-circle"></i></p>
                <code class="block text-culturemesh-secondary break-all text-sm mt-1">${newHash}</code>
                <p class="text-xs dashboard-muted-text mt-2">Record saved (simulated).</p>
            `;
            document.getElementById('generateGlyphTagForm').reset();
            window.renderProvenanceChainDisplay();
        }

        window.renderProvenanceChainDisplay = function() {
            const chainDisplay = document.getElementById('provenanceChainDisplay');
            if (!chainDisplay) return;

            chainDisplay.innerHTML = '';
            if (simulatedProvenanceRecords.length === 0) {
                chainDisplay.innerHTML = '<p class="dashboard-muted-text text-center">No provenance records to display. Generate a Provenance Tag!</p>';
                return;
            }

            simulatedProvenanceRecords.forEach(record => {
                const step = document.createElement('div');
                step.className = 'provenance-step';
                step.innerHTML = `
                    <p class="font-semibold dashboard-dark-text">Content ID: ${record.contentId}</p>
                    <p class="dashboard-muted-text text-sm">Event: ${record.event}</p>
                    <p class="dashboard-muted-text text-sm">Timestamp: ${record.timestamp}</p>
                    <p class="dashboard-muted-text text-xs mt-1">Hash: <code>${record.hash}</code></p>
                `;
                chainDisplay.appendChild(step);
            });
        }

        // --- Community & Insights Section Functions (Dashboard) ---
        window.handleNewDiscussionForm = function(event) {
            event.preventDefault();
            const postTitle = document.getElementById('postTitle').value.trim();
            const postContent = document.getElementById('postContent').value.trim();

            if (!postTitle || !postContent) {
                window.showMessage('Error', 'Discussion Title and Content are required!', false);
                return;
            }

            const newPost = {
                id: `d${Date.now()}`,
                title: postTitle,
                author: 'CultureMesh User (Simulated)',
                timestamp: 'Just now',
                content: postContent,
                likes: 0,
                comments: 0
            };
            simulatedDiscussionPosts.unshift(newPost);
            window.renderDiscussionPosts();
            window.showMessage('Success', 'New discussion post created.', true);
            document.getElementById('newDiscussionForm').reset();
        }

        window.renderDiscussionPosts = function() {
            const postsContainer = document.getElementById('discussionPosts');
            if (!postsContainer) return;

            postsContainer.innerHTML = '';
            if (simulatedDiscussionPosts.length === 0) {
                postsContainer.innerHTML = '<p class="dashboard-muted-text text-center">No discussions yet. Start one above!</p>';
                return;
            }

            simulatedDiscussionPosts.forEach(post => {
                const postElement = document.createElement('div');
                postElement.className = 'discussion-post';
                postElement.innerHTML = `
                    <h4 class="text-xl font-bold dashboard-dark-text mb-2">${post.title}</h4>
                    <p class="dashboard-muted-text text-sm mb-3">By: ${post.author} - ${post.timestamp}</p>
                    <p class="dashboard-muted-text">
                        "${post.content}"
                    </p>
                    <div class="mt-4 text-right">
                        <button class="primary-btn px-4 py-2 rounded-md text-sm mr-4" onclick="window.showMessage('Info', 'Simulating: Viewing comments.')">View Comments (${post.comments})</button>
                        <button class="primary-btn px-4 py-2 rounded-md text-sm" onclick="window.showMessage('Info', 'Simulating: Liking post.')"><i class="fas fa-thumbs-up"></i> ${post.likes}</button>
                    </div>
                `;
                postsContainer.appendChild(postElement);
            });
        }

        window.renderLearningResources = function() {
            const resourcesContainer = document.getElementById('learningResources');
            if (!resourcesContainer) return;

            resourcesContainer.innerHTML = '';
            if (simulatedLearningResources.length === 0) {
                resourcesContainer.innerHTML = '<p class="dashboard-muted-text text-center">No learning resources available yet.</p>';
                return;
            }

            simulatedLearningResources.forEach(resource => {
                const card = document.createElement('div');
                card.className = 'dashboard-sub-card p-4 rounded-lg';
                card.innerHTML = `
                    <h4 class="text-xl font-bold dashboard-dark-text mb-2">${resource.title}</h4>
                    <p class="dashboard-muted-text text-sm mb-3">
                        ${resource.type}: ${resource.date || resource.format} | ${resource.speaker ? `Speaker: ${resource.speaker}` : `Author: ${resource.author}`}
                    </p>
                    <p class="dashboard-muted-text">${resource.description}</p>
                    <button class="primary-btn px-4 py-2 rounded-md text-sm mt-4" onclick="window.showMessage('Info', 'Simulating: ${resource.action} for ${resource.title}.')">
                        ${resource.action}
                    </button>
                `;
                resourcesContainer.appendChild(card);
            });
        }

        // --- Analytics Section Functions (Dashboard Charts) ---
        window.updateAnalyticsCulturalTypeChart = function() {
            const ctx = document.getElementById('analyticsRitualTypeChart')?.getContext('2d');
            if (!ctx) return;

            const counts = {};
            simulatedCulturalData.forEach(data => {
                counts[data.type] = (counts[data.type] || 0) + 1;
            });

            const labels = Object.keys(counts);
            const data = Object.values(counts);
            const colors = ['#A820A3', '#F4D03F', '#6A0572', '#E6D0E8', '#FF8C00']; // CultureMesh colors

            if (analyticsCulturalTypeChartInstance) {
                analyticsCulturalTypeChartInstance.destroy();
            }

            analyticsCulturalTypeChartInstance = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: labels,
                    datasets: [{
                        data: data,
                        backgroundColor: labels.map((_, i) => colors[i % colors.length]),
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                color: 'var(--dashboard-dark-text)'
                            }
                        },
                        title: {
                            display: false
                        }
                    }
                }
            });
        }

        window.updateCommunityActivityChart = function() {
            const ctx = document.getElementById('contributorActivityChart')?.getContext('2d');
            if (!ctx) return;

            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'];
            const activeCommunitiesData = [150, 180, 250, 220, 280, 300];
            const newDataSubmissions = [20, 35, 50, 45, 60, 75];

            if (communityActivityChartInstance) {
                communityActivityChartInstance.destroy();
            }

            communityActivityChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: months,
                    datasets: [
                        {
                            label: 'Active Communities',
                            data: activeCommunitiesData,
                            borderColor: 'var(--culturemesh-primary)',
                            backgroundColor: 'rgba(106, 5, 114, 0.2)',
                            tension: 0.3,
                            fill: true,
                            yAxisID: 'y'
                        },
                        {
                            label: 'New Data Submissions',
                            data: newDataSubmissions,
                            borderColor: 'var(--culturemesh-accent)',
                            backgroundColor: 'rgba(244, 208, 63, 0.2)',
                            tension: 0.3,
                            fill: true,
                            yAxisID: 'y1'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                color: 'var(--dashboard-dark-text)'
                            }
                        },
                        title: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            ticks: {
                                color: 'var(--dashboard-dark-text)'
                            },
                            grid: {
                                color: 'rgba(0,0,0,0.1)'
                            }
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            grid: {
                                drawOnChartArea: false,
                                color: 'rgba(0,0,0,0.1)'
                            },
                            ticks: {
                                color: 'var(--dashboard-dark-text)'
                            }
                        },
                        x: {
                            ticks: {
                                color: 'var(--dashboard-dark-text)'
                            },
                            grid: {
                                color: 'rgba(0,0,0,0.1)'
                            }
                        }
                    }
                }
            });
        }

        // --- Settings Section Functions (Dashboard) ---
        function loadSettings() {
            const displayNameInput = document.getElementById('displayName');
            const emailInput = document.getElementById('email');
            const defaultRegionSelect = document.getElementById('defaultRegion');
            const autoClaimSettingSelect = document.getElementById('autoClaimSetting');

            if (displayNameInput) displayNameInput.value = appData.user.displayName;
            if (emailInput) emailInput.value = appData.user.email;
            if (defaultRegionSelect) defaultRegionSelect.value = appData.user.defaultRegion;
            if (autoClaimSettingSelect) autoClaimSettingSelect.value = appData.user.autoClaim;

            renderDnsRecords();
            renderEmailAccounts();
            renderDomains();
            renderSettingsCompanySelection();
        }

        function showSettingsTab(tabId) {
            document.querySelectorAll('#settings .settings-sub-view').forEach(view => {
                view.classList.add('hidden');
            });
            document.getElementById(`settings-${tabId}`).classList.remove('hidden');

            document.querySelectorAll('#settings .settings-tab-btn').forEach(btn => {
                if (btn.getAttribute('data-settings-tab') === tabId) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });

            if (tabId === 'domains') {
                renderDnsRecords();
                renderEmailAccounts();
                renderDomains();
                renderSettingsCompanySelection();
            }
        }
        window.showSettingsTab = showSettingsTab;

        function renderDnsRecords() {
            const dnsTableBody = document.getElementById('dnsRecordsTableBody');
            if (!dnsTableBody) return;
            dnsTableBody.innerHTML = '';
            appData.dnsRecords.forEach(record => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="font-semibold">${record.type}</td>
                    <td>${record.name}</td>
                    <td>${record.value}</td>
                    <td>${record.ttl}</td>
                    <td class="text-right">
                        <button class="text-culturemesh-secondary hover:text-culturemesh-primary text-sm mr-2" onclick="window.showMessage('Info', 'Edit functionality for ${record.name} coming soon!')">Edit</button>
                        <button class="text-red-500 hover:text-red-700 text-sm" onclick="window.showMessage('Info', 'Delete functionality for ${record.name} coming soon!')">Delete</button>
                    </td>
                `;
                dnsTableBody.appendChild(row);
            });
        }

        function renderDomains() {
            const domainList = document.getElementById('domainList');
            const addonDomainTargetSelect = document.getElementById('addonDomainTarget');
            const newEmailDomainSelect = document.getElementById('newEmailDomain');

            if (!domainList || !addonDomainTargetSelect || !newEmailDomainSelect) return;
            
            domainList.innerHTML = '';
            addonDomainTargetSelect.innerHTML = '<option value="">Select Primary Domain</option>';
            newEmailDomainSelect.innerHTML = '';

            appData.domains.forEach(domain => {
                const listItem = document.createElement('li');
                const statusIcon = domain.type.includes('Pending') ? 'fas fa-hourglass-half text-yellow-500' : 'fas fa-check-circle text-culturemesh-accent';
                listItem.innerHTML = `<i class="${statusIcon} mr-2"></i> ${domain.name} (${domain.type})`;
                domainList.appendChild(listItem);

                if (domain.type.includes('Primary') || domain.type.includes('Subdomain')) {
                    const option = document.createElement('option');
                    option.value = domain.name;
                    option.textContent = domain.name;
                    addonDomainTargetSelect.appendChild(option);

                    const emailDomainOption = document.createElement('option');
                    emailDomainOption.value = domain.name;
                    emailDomainOption.textContent = domain.name;
                    newEmailDomainSelect.appendChild(emailDomainOption);
                }
            });
        }

        function renderEmailAccounts() {
            const emailAccountsTableBody = document.getElementById('emailAccountsTableBody');
            if (!emailAccountsTableBody) return;
            emailAccountsTableBody.innerHTML = '';
            appData.emailAccounts.forEach(account => {
                const row = document.createElement('tr');
                const statusClass = account.status === 'Active' ? 'text-culturemesh-accent' : 'text-yellow-500';
                row.innerHTML = `
                    <td class="font-semibold">${account.email}</td>
                    <td><span class="${statusClass}">${account.status}</span></td>
                    <td class="text-right">
                        <button class="text-culturemesh-secondary hover:text-culturemesh-primary text-sm mr-2" onclick="window.showMessage('Info', 'Edit email ${account.email} functionality coming soon!')">Edit</button>
                        <button class="text-red-500 hover:text-red-700 text-sm" onclick="window.showMessage('Info', 'Delete email ${account.email} functionality coming soon!')">Delete</button>
                        <button class="form-action-button text-xs px-3 py-2 mt-2 ml-2" onclick="window.openEmailDraftModal('${account.email}')">
                            ✨ Draft Email
                        </button>
                    </td>
                `;
                emailAccountsTableBody.appendChild(row);
            });
        }

        function renderSettingsCompanySelection() {
            const settingsCompanySelectionGrid = document.getElementById('settingsCompanySelectionGrid');
            if (settingsCompanySelectionGrid) {
                settingsCompanySelectionGrid.innerHTML = '';
                const filteredCompanies = Object.entries(companyData).filter(([key, company]) => company.sector_key === "ritual-culture");

                filteredCompanies.forEach(([key, company]) => {
                    const card = document.createElement('div');
                    card.className = 'company-select-card p-4 rounded-lg text-center shadow-md cursor-pointer';
                    card.innerHTML = `
                        <h3 class="text-lg font-bold">${company.name}</h3>
                        <p class="text-xs">Sector: ${sectorList[company.sector_key] ? sectorList[company.sector_key].name : 'N/A'}</p>
                    `;
                    card.onclick = () => window.renderSettingsCompanyDetails(key);
                    settingsCompanySelectionGrid.appendChild(card);
                });
            }
        }

        window.renderSettingsCompanyDetails = function(companyKey) {
            const company = companyData[companyKey];
            const detailsOutput = document.getElementById('settingsCompanyDetailsOutput');
            if (!company || !detailsOutput) return;

            detailsOutput.innerHTML = `
                <h4 class="text-xl font-bold mb-4">${company.name} Infrastructure Details</h4>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    ${Object.entries(company.details).map(([key, value]) => `
                        <div class="bg-culturemesh-light-bg p-4 rounded-md border border-culturemesh-border">
                            <strong class="text-culturemesh-accent">${key}:</strong> ${value}
                        </div>
                    `).join('')}
                </div>
                <button class="primary-btn mt-4 bg-red-600 hover:bg-red-700" onclick="window.showMessage('Info', 'Advanced company management tools coming soon!', true)">
                    <i class="fas fa-cogs mr-1"></i> Manage Company Infrastructure
                </button>
            `;
            detailsOutput.classList.remove('hidden');
        };

        // --- Email Draft Modal ---
        let currentEmailForDraft = '';

        window.openEmailDraftModal = function(emailAddress) {
            currentEmailForDraft = emailAddress;
            const modal = document.getElementById('emailDraftModal');
            const modalTitle = modal.querySelector('h3');
            const emailDraftTo = document.getElementById('emailDraftTo');
            const emailPurposeInput = document.getElementById('emailPurposeInput');
            const generatedEmailDraftOutput = document.getElementById('generatedEmailDraftOutput');
            const emailDraftStatus = document.getElementById('emailDraftStatus');

            if (modal && modalTitle && emailDraftTo && emailPurposeInput && generatedEmailDraftOutput && emailDraftStatus) {
                modalTitle.textContent = `Draft Email for ${emailAddress}`;
                emailDraftTo.textContent = emailAddress;
                emailPurposeInput.value = '';
                generatedEmailDraftOutput.value = '';
                emailDraftStatus.classList.add('hidden');
                modal.classList.add('active');
            }
        };

        window.hideEmailDraftModal = function() {
            document.getElementById('emailDraftModal')?.classList.remove('active');
            currentEmailForDraft = '';
        };

        // --- Gemini API Call Function (Simplified for Template) ---
        window.callGeminiAPI = async function(prompt, targetElementId, statusElementId, buttonElement, type) {
            const targetElement = document.getElementById(targetElementId);
            const statusElement = document.getElementById(statusElementId);
            
            if (!targetElement || !statusElement || !buttonElement) {
                console.error("Missing target, status element, or button element for Gemini API call.");
                return null;
            }

            statusElement.textContent = "Generating...";
            statusElement.classList.remove('hidden');
            targetElement.classList.add('hidden');
            buttonElement.disabled = true;
            buttonElement.innerHTML = `<span class="inline-block border-4 border-t-culturemesh-primary border-culturemesh-border rounded-full w-5 h-5 animate-spin"></span>`;

            try {
                let simulatedResponse = "";
                if (type === 'Explain DNS Type') {
                    const dnsType = document.getElementById('dnsRecordTypeInput').value.trim();
                    simulatedResponse = `A ${dnsType} record is used for... (Simulated Explanation)`;
                } else if (type === 'Draft Email') {
                    const emailPurpose = document.getElementById('emailPurposeInput').value.trim();
                    simulatedResponse = `Subject: Regarding your ${emailPurpose}
Dear User,

This is a simulated email draft based on your request.
Purpose: ${emailPurpose}

Best regards,
Your CultureMesh Team`;
                } else if (type === 'General Query') {
                    simulatedResponse = `This is a simulated AI response to your general query: "${prompt}". CultureMesh's AI integration can provide insights on cultural data trends, community engagement, and more.`;
                } else if (type === 'Coding Partner') {
                    simulatedResponse = `// Simulated code response for: "${prompt}"
function exampleCode() {
    console.log("This is a simulated code snippet from CultureMesh's AI coding partner.");
}`;
                } else if (type === 'Career Guide') {
                    simulatedResponse = `Simulated career advice for: "${prompt}". CultureMesh's AI can help you navigate career paths in cultural preservation, digital heritage, and community building.`;
                }

                targetElement.innerHTML = simulatedResponse;
                targetElement.classList.remove('hidden');
                statusElement.textContent = "Generation complete!";
                return simulatedResponse;

            } catch (error) {
                statusElement.textContent = "Error: API call failed.";
                console.error("Error calling Gemini API:", error);
                return null;
            } finally {
                buttonElement.disabled = false;
                let originalButtonText = '';
                if (type === 'Explain DNS Type') originalButtonText = 'Explain DNS Type';
                else if (type === 'Draft Email') originalButtonText = 'Generate Draft';
                else if (type === 'General Query') originalButtonText = 'Send to Gemini';
                else if (type === 'Coding Partner') originalButtonText = 'Ask Coding Partner';
                else if (type === 'Career Guide') originalButtonText = 'Get Career Advice';
                
                buttonElement.innerHTML = `✨ ${originalButtonText}`;
                setTimeout(() => statusElement.classList.add('hidden'), 3000);
            }
        };

        // --- Event Listeners for AI Gemini Section (Dashboard) ---
        document.getElementById('sendGeminiPrompt')?.addEventListener('click', async (event) => {
            const prompt = document.getElementById('geminiPrompt').value.trim();
            const button = event.currentTarget;
            if (!prompt) {
                window.showMessage('Input Required', 'Please enter a prompt for Gemini AI.');
                return;
            }
            await window.callGeminiAPI(prompt, 'geminiResponse', 'geminiError', button, 'General Query');
        });

        document.getElementById('sendCodingPrompt')?.addEventListener('click', async (event) => {
            const prompt = document.getElementById('codingPrompt').value.trim();
            const button = event.currentTarget;
            if (!prompt) {
                window.showMessage('Input Required', 'Please enter a coding question.');
                return;
            }
            await window.callGeminiAPI(prompt, 'codingResponse', 'codingError', button, 'Coding Partner');
        });

        document.getElementById('sendCareerPrompt')?.addEventListener('click', async (event) => {
            const prompt = document.getElementById('careerPrompt').value.trim();
            const button = event.currentTarget;
            if (!prompt) {
                window.showMessage('Input Required', 'Please enter your career question.');
                return;
            }
            await window.callGeminiAPI(prompt, 'careerResponse', 'careerError', button, 'Career Guide');
        });


        // --- Initial Load Functions ---
        document.addEventListener('DOMContentLoaded', () => {
            // Firebase Initialization (existing from previous dashboard)
            if (Object.keys(firebaseConfig).length > 0) {
                app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);

                onAuthStateChanged(auth, async (user) => {
                    if (user) {
                        userId = user.uid;
                        console.log("Firebase Auth: Signed in as", userId);
                    } else {
                        if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                            try { await signInWithCustomToken(auth, __initial_auth_token); } catch (error) { console.warn("Firebase Auth: Custom token sign-in failed.", error); await signInAnonymously(auth); }
                        } else {
                            await signInAnonymously(auth);
                        }
                    }
                });
            } else {
                console.warn("Firebase config not found. Running in demo mode without persistence.");
            }

            // Initialize landing page features
            window.updateSharePrice();
            setInterval(window.updateSharePrice, 9000);
            window.initializeBrandChart();

            // Set up main navigation listeners
            document.querySelectorAll('header nav a').forEach(link => {
                link.addEventListener('click', (event) => {
                    if (link.getAttribute('href').startsWith('javascript:void(0)')) {
                        event.preventDefault();
                    }
                });
            });


            // Set up dashboard tab navigation listeners
            document.querySelectorAll('#culturemesh-dashboard-wrapper .dashboard-sidebar-nav-item').forEach(button => {
                button.addEventListener('click', () => {
                    window.showDashboardSectionTab(button.dataset.tab);
                });
            });

            // Set up form submission listeners for dashboard sections
            document.getElementById('addTotemForm')?.addEventListener('submit', window.handleAddTotemForm);
            document.getElementById('uploadMediaForm')?.addEventListener('submit', window.handleUploadMediaForm);
            document.getElementById('verifyProvenanceForm')?.addEventListener('submit', window.handleVerifyProvenanceForm);
            document.getElementById('generateGlyphTagForm')?.addEventListener('submit', window.handleGenerateGlyphTagForm);
            document.getElementById('newDiscussionForm')?.addEventListener('submit', window.handleNewDiscussionForm);


            // Initial rendering of all sections' dynamic content for the dashboard
            window.updateOverviewMetrics();
            window.updateCulturalDomainChart();
            window.updateIngestionProgressChart();
            window.updateProgressMetrics();
            window.populateProgressTable();
            window.updateOverallStatusChart();
            window.updateMonthlyRateChart();
            window.renderCulturalDataList();
            window.renderMediaList();
            window.renderProvenanceChainDisplay();
            window.renderDiscussionPosts();
            window.renderLearningResources();
            window.updateAnalyticsCulturalTypeChart();
            window.updateCommunityActivityChart();

            // Show the default main section (CultureMesh Dashboard)
            window.showMainSection('culturemesh-dashboard-wrapper');
            const dashboardLink = document.querySelector(`header nav a[href*="sectors/culturemesh/index.html"]`);
            if (dashboardLink) {
                dashboardLink.classList.add('header-nav-active');
            }

            // Setup DNS Explain button listener
            document.getElementById('explainDnsBtn')?.addEventListener('click', async (event) => {
                const dnsType = document.getElementById('dnsRecordTypeInput').value.trim();
                const button = event.currentTarget;
                if (!dnsType) {
                    window.showMessage('Input Required', 'Please enter a DNS record type (e.g., A, CNAME, MX) to explain.', false);
                    return;
                }
                const prompt = `Explain what a "${dnsType}" DNS record is, its primary purpose, and a typical use case. Keep the explanation concise and easy to understand for a non-expert.`;
                await window.callGeminiAPI(prompt, 'dnsExplanationOutput', 'dnsExplainStatus', button, 'Explain DNS Type');
            });

            // Event listener for Create Email Button
            document.getElementById('createEmailBtn')?.addEventListener('click', async (event) => {
                const emailPrefix = String(document.getElementById('newEmailPrefix').value).trim();
                const emailDomain = String(document.getElementById('newEmailDomain').value).trim();
                const fullEmail = `${emailPrefix}@${emailDomain}`;

                if (!emailPrefix || !emailDomain) {
                    window.showMessage('Input Required', 'Please enter both an email prefix and domain to create a new email account.', false);
                    return;
                }

                window.showMessage('Email Account Creation', `Creating email account: ${fullEmail} (Simulated).`, true);
                appData.emailAccounts.push({ email: fullEmail, status: 'Active' });
                renderEmailAccounts();
                document.getElementById('newEmailPrefix').value = '';

                window.openEmailDraftModal(fullEmail);
            });

            document.getElementById('generateEmailDraftBtn')?.addEventListener('click', async (event) => {
                const emailPurpose = document.getElementById('emailPurposeInput').value.trim();
                const button = event.currentTarget;
                if (!emailPurpose) {
                    window.showMessage('Input Required', 'Please enter a purpose for the email.', false);
                    return;
                }
                const prompt = `Draft a professional email (max 200 words) for the purpose of "${emailPurpose}" from the email address "${currentEmailForDraft}". Focus on a clear and polite tone. Provide only the email body.`;
                await window.callGeminiAPI(prompt, 'generatedEmailDraftOutput', 'emailDraftStatus', button, 'Draft Email');
            });
        });
    </script>
</body>
</html>
